function q(c,t){let e=0;return function(...n){const s=Date.now();s-e>=t&&(e=s,c.apply(this,n))}}class _ extends HTMLElement{#t=null;#e=0;#n=null;#s=null;#r=!1;#i=null;#a=null;#o=-1;static#l=!1;static#d(){if(_.#l)return;const t=document.createElement("style");t.textContent=`scroll-progress {
	display: block;
	--scroll-progress: 0;
	will-change: transform;
	transform-style: preserve-3d;
	backface-visibility: hidden; }`,document.head.appendChild(t),_.#l=!0}static get observedAttributes(){return["playhead-element-start","playhead-viewport-start","playhead-element-end","playhead-viewport-end"]}constructor(){super(),_.#d()}connectedCallback(){this.#e=window.innerHeight,this.#f(),this.#g(),this.#y(),this.#x()}disconnectedCallback(){this.#v(),this.#S(),this.#m()}attributeChangedCallback(t,e,n){e!==n&&this.#t&&this.#f()}#f(){const t=this.getBoundingClientRect();this.#t={elementStartAnchor:this.getAttribute("playhead-element-start")||"top",viewportStartAnchor:this.getAttribute("playhead-viewport-start")||"bottom",elementEndAnchor:this.getAttribute("playhead-element-end")||"bottom",viewportEndAnchor:this.getAttribute("playhead-viewport-end")||"top",elementStartPosition:0,elementEndPosition:0,viewportStartPosition:0,viewportEndPosition:0,totalDistance:0},this.#c(t)}#c(t){t||(t=this.getBoundingClientRect()),this.#t&&(this.#t.elementStartPosition=this.#h(this.#t.elementStartAnchor,t),this.#t.elementEndPosition=this.#h(this.#t.elementEndAnchor,t),this.#t.viewportStartPosition=this.#u(this.#t.viewportStartAnchor,this.#e),this.#t.viewportEndPosition=this.#u(this.#t.viewportEndAnchor,this.#e),this.#t.totalDistance=this.#t.elementEndPosition-this.#t.viewportEndPosition-(this.#t.elementStartPosition-this.#t.viewportStartPosition),this.#t.totalDistance<0&&(console.warn("<scroll-progress> totalDistance negative, check anchors"),this.#t.totalDistance=Math.abs(this.#t.totalDistance)))}#h(t,e){return t==="top"?e.top:t==="center"?e.top+e.height/2:e.bottom}#u(t,e){return t==="top"?0:t==="center"?e/2:e}#p(t,e,n){return t<e?e:t>n?n:t}#x(){const t=()=>{this.#r&&this.#b(),this.#i=requestAnimationFrame(t)};this.#i=requestAnimationFrame(t)}#v(){this.#i&&(cancelAnimationFrame(this.#i),this.#i=null)}#b(){if(!this.#t)return;const t=this.getBoundingClientRect(),e=this.#h(this.#t.elementStartAnchor,t),n=this.#t.viewportStartPosition-e,s=this.#t.totalDistance===0?0:this.#p(n/this.#t.totalDistance,0,1);Math.abs(s-this.#o)>.001&&(this.#o=s,this.style.setProperty("--scroll-progress",s),this.dispatchEvent(new CustomEvent("scroll-progress:update",{detail:{progress:s},bubbles:!0})))}#g(){if("ResizeObserver"in window&&(this.#n=new ResizeObserver(t=>{t.forEach(e=>{e.target===this&&this.#c(e.contentRect)})}),this.#n.observe(this)),"IntersectionObserver"in window){const t={rootMargin:"50% 0px 50% 0px"};this.#s=new IntersectionObserver(e=>{e.forEach(n=>{n.target===this&&(this.#r=n.isIntersecting)})},t),this.#s.observe(this)}else this.#r=!0}#m(){this.#n&&(this.#n.disconnect(),this.#n=null),this.#s&&(this.#s.disconnect(),this.#s=null)}#y(){const t=()=>{this.#e=window.innerHeight,this.#t&&(this.#t.viewportStartPosition=this.#u(this.#t.viewportStartAnchor,this.#e),this.#t.viewportEndPosition=this.#u(this.#t.viewportEndAnchor,this.#e),this.#t.totalDistance=this.#t.elementEndPosition-this.#t.viewportEndPosition-(this.#t.elementStartPosition-this.#t.viewportStartPosition),this.#c())};this.#a=q(t,50),window.addEventListener("resize",this.#a)}#S(){this.#a&&(window.removeEventListener("resize",this.#a),this.#a=null)}getProgress(){return parseFloat(this.style.getPropertyValue("--scroll-progress")||0)}update(){this.#t&&this.#c()}pause(){this.#v()}resume(){this.#i||this.#x()}}customElements.get("scroll-progress")||customElements.define("scroll-progress",_);/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/class B{#t;constructor(){this.#t=new Map}on(t,e){if(typeof e!="function")throw new TypeError("Listener must be a function");const n=this.#t.get(t)||[];return n.includes(e)||n.push(e),this.#t.set(t,n),this}off(t,e){const n=this.#t.get(t);if(!n)return this;const s=n.indexOf(e);return s!==-1&&(n.splice(s,1),n.length===0?this.#t.delete(t):this.#t.set(t,n)),this}emit(t,...e){const n=this.#t.get(t);if(!n||n.length===0)return!1;for(let s=0,i=n.length;s<i;++s)try{n[s]!==void 0&&n[s].apply(this,e)}catch(r){console.error(`Error in listener for event '${t}':`,r)}return!0}destroy(){this.#t.clear()}}const E={UNKNOWN:0,VERTICAL:-1,HORIZONTAL:1};class z{constructor(t){const e=this;e.ctx=t,e.track=t.track,e.dragThreshold=3,e.drag={isDragging:!1,start:0,current:0,prev:0,delta:0,velocity:0,dragThresholdMet:!1,scrollWheelDelta:0,scrollWheelActive:!1},e.debouncedScrollEnd=e.ctx.utils.debounce(n=>{e.drag.scrollWheelDelta=0,e.handleScrollEnd(n)},80),e.handlers={click:n=>e.handleClick(n),pointerdown:n=>e.handleDragStart(n),pointermove:n=>e.handleDragMove(n),pointerup:n=>e.handleDragEnd(n),pointerleave:n=>e.handleDragEnd(n),pointercancel:n=>e.handleDragEnd(n),touchstart:n=>e.handleTouchStart(n),touchmove:n=>e.handleTouchMove(n),dblclick:n=>(n.preventDefault(),n.stopPropagation(),!1),wheel:n=>e.handleSidewaysScroll(n)},e.bindUI()}bindUI(){const t=this,e=t.track;e.addEventListener("click",t.handlers.click),e.addEventListener("pointerdown",t.handlers.pointerdown,{passive:!1}),e.addEventListener("pointermove",t.handlers.pointermove,{passive:!1}),e.addEventListener("pointerup",t.handlers.pointerup,{passive:!1}),e.addEventListener("pointerleave",t.handlers.pointerleave,{passive:!1}),e.addEventListener("pointercancel",t.handlers.pointercancel,{passive:!1}),e.addEventListener("touchstart",t.handlers.touchstart,{passive:!1}),e.addEventListener("touchmove",t.handlers.touchmove,{passive:!1}),e.addEventListener("dblclick",t.handlers.dblclick)}handleSidewaysScroll(t){const e=this;if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){t.preventDefault();const n=e.drag;n.delta===0&&e.ctx.emitter.emit(e.ctx.events.drag.start,{event:t,drag:n}),n.delta+=t.deltaX*-1,e.ctx.emitter.emit(e.ctx.events.drag.move,{event:t,drag:n}),e.debouncedScrollEnd(t)}}handleScrollEnd(t){const e=this,n=e.drag;e.ctx.emitter.emit(e.ctx.events.drag.end,{event:t,drag:n}),n.delta=0}handleClick(t){const e=this;if(e.drag.dragThresholdMet){t.preventDefault();return}const n=t.target.closest("tarot-slide");if(n){const s=parseInt(n.getAttribute("index"))||0,i=n.renderIndex;e.ctx.emitter.emit(e.ctx.events.slides.click,{index:s,renderIndex:i,event:t})}}handleTouchStart(t){const e=this;t.touches.length>1&&(e.drag.isDragging=!1)}handleTouchMove(t){const e=this,n=e.drag;if(!n.isDragging)return;if(n.touchDirection===E.HORIZONTAL){t.preventDefault();return}const s=Math.abs(n.startX-t.touches[0].screenX),i=Math.abs(n.startY-t.touches[0].screenY);if(s*1.15>i){t.preventDefault(),n.touchDirection=E.HORIZONTAL;return}n.isDragging=!1,n.touchDirection=E.VERTICAL,n.delta=0,e.ctx.emitter.emit(e.ctx.events.drag.end,{event:t,drag:n})}handleDragStart(t){t.preventDefault();const e=this,n=e.drag;n.hasTouch=t.pointerType==="touch",n.touchDirection=E.UNKNOWN,n.isDragging=!0,n.dragThresholdMet=!1,n.startX=t.screenX,n.startY=t.screenY,n.velocity=0,n.delta=0,e.ctx.emitter.emit(e.ctx.events.drag.start,{event:t,drag:n})}handleDragMove(t){const e=this,n=e.drag;if(!n.isDragging)return;const s=Math.abs(n.startX-t.screenX),i=Math.abs(n.startY-t.screenY);if(n.touchDirection===E.UNKNOWN&&s*1.15>i&&(n.touchDirection=E.HORIZONTAL),!(n.hasTouch&&n.touchDirection!=E.HORIZONTAL)&&(t.preventDefault(),n.prev=n.current,n.current=t.screenX,n.delta=n.current-n.startX,n.velocity=n.current-n.prev,!n.dragThresholdMet&&Math.abs(n.delta)>e.dragThreshold&&(n.dragThresholdMet=!0),!!n.dragThresholdMet))return e.ctx.emitter.emit(e.ctx.events.drag.move,{event:t,drag:n}),!1}handleDragEnd(t){const e=this,n=e.drag;n.isDragging&&(t.preventDefault(),n.isDragging=!1,e.ctx.emitter.emit(e.ctx.events.drag.end,{event:t,drag:n}),n.delta=0)}destroy(){const t=this,e=t.track;t.debouncedScrollEnd&&t.debouncedScrollEnd.cancel(),e.removeEventListener("click",t.handlers.click),e.removeEventListener("pointerdown",t.handlers.pointerdown),e.removeEventListener("pointermove",t.handlers.pointermove),e.removeEventListener("pointerup",t.handlers.pointerup),e.removeEventListener("pointerleave",t.handlers.pointerleave),e.removeEventListener("pointercancel",t.handlers.pointercancel),e.removeEventListener("touchstart",t.handlers.touchstart),e.removeEventListener("touchmove",t.handlers.touchmove),e.removeEventListener("dblclick",t.handlers.dblclick),e.removeEventListener("wheel",t.handlers.wheel)}}class N{static defaultRules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:0,right:0}};#t;#e;#n=null;constructor(t,e){const n=this;n.#t=t,n.#e=e,n.handlers={optionsChanged:({currentOptions:s})=>{const i=n.#n?.constructor?.effectName||n.#n?.constructor?.name;s.effect!==i&&n.loadEffect(s.effect)}},n.bindEvents(),n.handlers.effectRegistered=s=>{try{const i=s?.detail?.effectName,r=String(n.#t.store.getOptions().effect||"").toLowerCase();i&&r&&i===r&&n.loadEffect(r)}catch{}},typeof window<"u"&&typeof window.addEventListener=="function"&&window.addEventListener("tarot:effect-registered",n.handlers.effectRegistered)}init(){}reInit(){this.loadCurrentEffect()}bindEvents(){this.#t.emitter.on(this.#t.events.store.optionsChanged,this.handlers.optionsChanged)}loadCurrentEffect(){const t=this.#t.store.getOptions();this.loadEffect(t.effect)}loadEffect(t){const e=this;if(!t){console.error("Error: no effect detected or could not load effect ",t);return}const n=e.#e[t];if(!n){console.warn(`Effect '${t}' not registered yet; falling back to 'carousel' until it loads`),t!=="carousel"&&this.loadEffect("carousel");return}const s=e.#n,i=s?.constructor?.effectName||s?.constructor?.name;e.#n&&(e.#n.destroy(),e.#t.emitter.emit(e.#t.events.effect.destroyed,{effectName:i})),e.#n=new n(e.#t),e.#t.carousel.setAttribute("effect",t),e.#t.emitter.emit(e.#t.events.effect.loaded,{effect:e.#n,effectName:t}),e.#t.emitter.emit(e.#t.events.effect.changed,{previousEffect:s,currentEffect:e.#n,effectName:t}),e.#n.render&&e.#t.store.getState()}getRules(){const t=this;return!t.#n||!t.#n.rules?t.constructor.defaultRules:t.#n.rules}getEffect(){return this.#n}getEffectName(){return this.#n&&(this.#n.constructor?.effectName||this.#n.constructor?.name)||null}hasEffect(){return this.#n!==null}destroy(){const t=this;if(typeof window<"u"&&typeof window.removeEventListener=="function"&&t.handlers?.effectRegistered&&window.removeEventListener("tarot:effect-registered",t.handlers.effectRegistered),t.#t.emitter.off(t.#t.events.store.optionsChanged,t.handlers.optionsChanged),t.#n){const e=t.getEffectName();t.#n.destroy(),t.#t.emitter.emit(t.#t.events.effect.destroyed,{effectName:e}),t.#n=null}}}const S=Object.freeze({carousel:Object.freeze({init:"carousel:init",ready:"carousel:ready",reinit:"carousel:reinit",destroy:"carousel:destroy",error:"carousel:error",beforeTransition:"carousel:before-transition",afterTransition:"carousel:after-transition",hasFocus:"carousel:has-focus",lostFocus:"carousel:lost-focus"}),store:Object.freeze({optionsChanged:"options:changed",stateChanged:"state:changed",layoutChanged:"layout:changed",slidesChanged:"slides:changed",pageIndexChanged:"page-index:changed",pageCountChanged:"page-count:changed",selectedIndexChanged:"selected-index:changed",renderIndexChanged:"render-index:changed",transformPointsChanged:"transform-points:changed",changedDirty:"store:changed-dirty",changedClean:"store:changed-clean"}),drag:Object.freeze({start:"drag:start",move:"drag:move",end:"drag:end",cancel:"drag:cancel"}),frame:Object.freeze({beforeRender:"frame:before-render",afterRender:"frame:after-render"}),slides:Object.freeze({click:"slides:click",visibleChanged:"slides:visible-changed"}),window:Object.freeze({resize:"window:resize",orientationChange:"window:orientation-change",visibilityChange:"window:visibility-change",hasFocus:"window:has-focus",lostFocus:"window:lost-focus"}),track:Object.freeze({looped:"track:looped",shifted:"track:shifted",requestFrame:"track:request-frame",positionChanged:"track:position-changed"}),effect:Object.freeze({changed:"effect:changed",loaded:"effect:loaded",destroyed:"effect:destroyed"}),animation:Object.freeze({requested:"animation:requested",started:"animation:started",completed:"animation:completed"}),engine:Object.freeze({positionChanged:"engine:position-changed",finished:"engine:finished"}),user:Object.freeze({interacted:"user:interacted"}),keyboard:Object.freeze({arrow:"keyboard:arrow"})});class H{constructor(t){const e=this;e.ctx=t,e.defaultOptions={asNavFor:!1,animation:{attraction:.026,friction:.24,speed:5,velocityBoost:1.1},autoplay:{interval:0,stopAfterInteraction:!0,afterInteraction:"pause"},breakpoints:{},breakpointElement:"window",centerSelectedSlide:!1,dragThreshold:40,filterClass:"",focusOnSelect:!1,initialIndex:0,loop:!1,effect:"carousel",gap:0,paddingLeft:0,paddingRight:0,slideMinWidth:"50px",slidesPerView:1,slidesPerMove:1,navigation:{showButtons:!0,showPrevButton:!0,showNextButton:!0,prevButtonSelector:!1,nextButtonSelector:!1,smartButtons:!1,showPagination:!0,paginationSelector:!1},goToSelectedSlide:!1,syncWith:!1,announcements:!0},e.userOptions={},e.userOptionsElement=e.ctx.carousel.querySelector(":scope > [data-tarot-options]"),e.currentBreakpoint={minWidth:0,options:{}},e.prevBreakpoint={minWidth:0,options:{}},e.checkBreakpointsDebounced=e.ctx.utils.debounce(()=>e.checkBreakpoints(),4),e.handlers={onWindowResize:e.checkBreakpointsDebounced,onOrientationChange:e.checkBreakpointsDebounced},e.init()}init(){const t=this;t.bindEvents(),t.loadUserOptions(),t.currentBreakpoint=t.getCurrentBreakpoint(),t.applyMergedOptions()}reInit(){this.checkBreakpoints()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.window.resize,t.handlers.onWindowResize),t.ctx.emitter.on(t.ctx.events.window.orientationChange,t.handlers.onOrientationChange)}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.window.resize,t.handlers.onWindowResize),t.ctx.emitter.off(t.ctx.events.window.orientationChange,t.handlers.onOrientationChange),t.checkBreakpointsDebounced&&typeof t.checkBreakpointsDebounced.cancel=="function"&&t.checkBreakpointsDebounced.cancel()}setUserOptions(t={}){const e=this;return t.slidesPerMove<1&&(t.slidesPerMove=1),t.slidesPerView<1&&(t.slidesPerView=1),e.userOptions=e.ctx.utils.deepMerge(e.userOptions,t),e.currentBreakpoint=e.getCurrentBreakpoint(),e.applyMergedOptions(),e}loadUserOptions(){const t=this;if(!t.userOptionsElement)return;let e=t.userOptionsElement.textContent||"";e=e.replace(/\n/g,"").trim(),e=e.replace(/(\w+)\s*:/g,'"$1":');try{t.userOptions=JSON.parse(e)}catch(n){console.error("tarot options: failed to parse data-tarot-options json",n)}}getCurrentBreakpoint(){const t=this,{breakpoints:e={},...n}=t.userOptions,s=t.ctx.utils.deepMerge(t.defaultOptions,n);let i;if(s.breakpointElement==="viewport"&&t.ctx.viewport?i=t.ctx.viewport.offsetWidth:i=window.innerWidth,!e||typeof e!="object")return{minWidth:0,options:{}};const r=Object.keys(e).map(Number).filter(a=>!Number.isNaN(a)).sort((a,l)=>a-l);let o=0;for(let a=0;a<r.length;a++){const l=r[a];if(i>=l)o=l;else break}return{minWidth:o,options:e[o]||{}}}checkBreakpoints(){const t=this,e=t.getCurrentBreakpoint();e.minWidth!==t.currentBreakpoint.minWidth&&(t.prevBreakpoint=t.currentBreakpoint,t.currentBreakpoint=e,t.applyMergedOptions())}applyMergedOptions(){const t=this,{breakpoints:e,...n}=t.userOptions;let s=t.ctx.utils.deepMerge(t.defaultOptions,n);s=t.ctx.utils.deepMerge(s,t.currentBreakpoint.options||{}),delete s.breakpoints,s.slidesPerMove<1&&(s.slidesPerMove=1),s.slidesPerView<1&&(s.slidesPerView=1),t.ctx.store.setOptions(s)}}class j{constructor(t){const e=this;e.ctx=t,e.coreSlides=null,e.observer=null,e.debouncedSlideRefresh=e.ctx.utils.debounce(()=>{e.reInit()},4),e.handlers={selectedIndexChanged:({currentIndex:n})=>{e.renderSelectedIndex(n)}},e.bindEvents(),e.init(),e.observeDOMChanges()}init(){this.reInit()}reInit(){const t=this;t.wrapSlides(),t.coreSlides=t.ctx.track.querySelectorAll(":scope > tarot-slide"),t.loadFilteredSlides(!0),t.renderSelectedIndex(t.ctx.store.getState().selectedIndex)}bindEvents(){this.ctx.emitter.on(this.ctx.events.store.selectedIndexChanged,this.handlers.selectedIndexChanged)}wrapSlides(){const e=this.ctx.track;Array.from(e.children).forEach(s=>{if(s.tagName.toLowerCase()!=="tarot-slide"){const i=document.createElement("tarot-slide");e.replaceChild(i,s),i.appendChild(s)}})}observeDOMChanges(){const t=this;t.observer=new MutationObserver(e=>{for(const n of e)if(n.type==="childList"){t.debouncedSlideRefresh();break}}),t.observer.observe(t.ctx.track,{childList:!0,subtree:!1})}resetSlideIndexes(t){for(let e=0,n=t.length;e<n;++e)t[e].renderIndex=e,t[e].index=e,t[e].setAttribute("index",e)}prepSlidesForFrame(){const t=this,e=t.ctx.store.getSlides(),n=t.ctx.store.getWidths(),s=t.ctx.store.getAnimation(),i=t.ctx.store.getOptions();t.updateSlidePositions(s.trackPosition,e,n,i);function r(o){return Math.round(o*2)/2}for(let o=0,a=e.length;o<a;++o){const l=e[o];l.trackPosition=r(l.renderIndex*n.slideAndGap),l.centerPoint=r(l.trackPosition+n.slide/2)}}updateSlidePositions(t,e,n,s){const i=this;if(!i.ctx.utils.canLoop(e.length,s)){i.resetAllSlides(e);return}const r=n.viewport,o=n.slide,a=n.gap,l=o+a,d=-t,f=d+r,h=new Set,u=Math.floor(d/l)-2,m=Math.ceil(f/l)+2;for(let p=u;p<=m;p++){const w=p*l;w+o>d&&w<f&&h.add(p)}const y=i.ctx.commands.getEffect()?.constructor?.rules?.loopBuffer||{left:0,right:0};if(h.size>0){const p=Array.from(h),w=Math.min(...p),L=Math.max(...p);for(let b=1;b<=y.left;b++)h.add(w-b);for(let b=1;b<=y.right;b++)h.add(L+b)}const x=e.length,v=new Set;for(const p of h){const w=(p%x+x)%x;v.add(w)}if(v.size<x){const p=Array.from(h);if(p.length>0){const w=Math.min(...p),L=Math.max(...p),b=x-v.size,k=Math.floor(b/2),O=b-k;for(let I=1;I<=k;I++)h.add(w-I);for(let I=1;I<=O;I++)h.add(L+I)}}const C=new Map;for(const p of h){const w=(p%x+x)%x;C.set(e[w],p)}for(const p of e){const w=C.get(p);w!==void 0&&(p.renderIndex=w)}}resetAllSlides(t){for(let e=0;e<t.length;e++)t[e].renderIndex=e}loadFilteredSlides(t=!1){const e=this,n=e.ctx.store.getOptions().filterClass,s=e.coreSlides,i=e.ctx.track;if(e.resetSlideIndexes(s),!n){i.innerHTML="",s.forEach(o=>i.appendChild(o)),e.ctx.store.setSlides(Array.from(s));return}const r=[];i.innerHTML="",s.forEach(o=>{o.classList.contains(n)&&(i.appendChild(o),r.push(o))}),e.ctx.store.setSlides(r)}addSlide(t,e){const n=this,s=n.ctx.track;let i;if(typeof t=="string"){const o=document.createElement("div");o.innerHTML=`<tarot-slide>${t.trim()}</tarot-slide>`,i=o.firstChild}else{const o=document.createElement("tarot-slide");o.appendChild(t),i=o}const r=Array.from(n.ctx.store.getSlides());typeof e=="number"&&e>=0&&e<r.length?s.insertBefore(i,r[e]):s.appendChild(i),n.loadFilteredSlides()}removeSlide(t){const e=this,n=e.ctx.track,s=Array.from(e.coreSlides);t<0||t>=s.length||(n.removeChild(s[t]),e.loadFilteredSlides())}renderSelectedIndex(t){const n=this.ctx.store.getSlides();for(let s=0,i=n.length;s<i;++s){const r=n[s];r.selected=r.index===t}}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.store.selectedIndexChanged,t.handlers.selectedIndexChanged),t.observer&&(t.observer.disconnect(),t.observer=null),t.debouncedSlideRefresh&&typeof t.debouncedSlideRefresh.cancel=="function"&&t.debouncedSlideRefresh.cancel(),t.debouncedSlideRefresh=null,t.coreSlides=null}}class X{#t;#e;#n;#s;#r;#i;#a;#o;#l;#d;#f;#c;constructor({attraction:t=.026,friction:e=.28}={}){const n=this;n.#h(t),n.#u(e),n.#t=t,n.#e=e,n.#n=1-e,n.#s=0,n.#r=0,n.#i=0,n.#a=0,n.#o=!1,n.#l=null,n.#c=0,n.#d=new B}animateTo(t,e,n){const s=this;if(s.#o&&s.stop(),isNaN(e)){console.log("end value is not a number");return}++s.#c,n*=1.4,s.#a=t,s.#r=t,s.#i=e,s.#s=n,s.#o=!0,s.#l=null,s.#d.emit("engine:position-changed",{position:s.#r,positionDelta:0,progress:0,velocity:s.#s})}tick(t){const e=this;if(!e.#o)return;const n=e.#l==null?8.33:t-e.#l;e.#l=t;const s=e.#i-e.#a;let r=Math.max(Math.abs(s)-230,1)/200;r=Math.max(.8,Math.min(r,1.3));const o=n/(13*r),l=(e.#i-e.#r)*e.#t;e.#s+=l*o,e.#s*=Math.pow(e.#n,o);const d=e.#s*o;e.#r+=d;const f=e.#r-e.#a;let h=s!==0?f/s:0;if(Math.abs(d)<.01&&Math.abs(e.#r-e.#i)<.1){e.#o=!1,e.#r=e.#i,e.#d.emit("engine:position-changed",{position:e.#r,positionDelta:0,progress:1,velocity:0}),e.#d.emit("engine:finished");return}e.#d.emit("engine:position-changed",{position:e.#r,positionDelta:d,progress:h,velocity:e.#s})}stop(){this.#o=!1}isAnimating(){return this.#o}setAttraction(t){this.#h(t),this.#t=t}setFriction(t){this.#u(t),this.#e=t,this.#n=1-t}on(t,e){this.#d.on(t,e)}off(t,e){this.#d.off(t,e)}#h(t){if(typeof t!="number"||t<=0||t>=1)throw new Error("Attraction must be a number between 0 and 1 (exclusive).")}#u(t){if(typeof t!="number"||t<=0||t>=1)throw new Error("Friction must be a number between 0 and 1 (exclusive).")}destroy(){this.stop(),this.#d.destroy(),this.#d=null}}class U{#t=0;#e=0;#n=0;#s=0;#r="";#i=0;constructor(t){const e=this;e.ctx=t;const n=e.ctx.store.getOptions();e.engine=new X({attraction:n.animation.attraction,friction:n.animation.friction}),e.#e=1,e.handlers={optionsChanged:({currentOptions:s})=>{e.engine.setAttraction(s.animation?.attraction||.1),e.engine.setFriction(s.animation?.friction||.8)},dragStart:({event:s,drag:i})=>{e.stop(),e.#e=e.#t,e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"drag",event:s})},dragMove:({event:s,drag:i})=>{e.setPos(e.#e+i.delta,1,null,"drag",0),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"drag",event:s})},dragEnd:({event:s,drag:i})=>{if(e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"drag",event:s}),Math.abs(i.delta)<e.ctx.store.getOptions().dragThreshold){e.ctx.commands.getTrackManager().settleTrack();return}i.delta<0?e.ctx.commands.next(i.velocity):e.ctx.commands.prev(i.velocity)},enginePositionChanged:({position:s,positionDelta:i,progress:r,velocity:o})=>{r===1?e.setPos(e.#s,r,o,e.#r,e.#i):e.setPos(e.#t+i,r,o,e.#r,e.#i)},engineAnimationFinished:()=>{e.ctx.emitter.emit("animationFinished",e.#s)},trackRequestFrame:({time:s})=>{e.engine.tick(s)}},e.bindEvents()}init(){}reInit(){}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.store.optionsChanged,t.handlers.optionsChanged),e.on(n.drag.start,t.handlers.dragStart),e.on(n.drag.move,t.handlers.dragMove),e.on(n.drag.end,t.handlers.dragEnd),e.on(n.track.requestFrame,t.handlers.trackRequestFrame),t.engine.on("engine:position-changed",t.handlers.enginePositionChanged),t.engine.on("engine:finished",t.handlers.engineAnimationFinished)}get currentPos(){return this.#t}getIsAnimating(){return this.engine.isAnimating()}canLoop(){const t=this,e=t.ctx.store.getOptions(),n=t.ctx.store.getSlides().length;return t.ctx.utils.canLoop(n,e)}stop(){this.engine.stop()}animateToPosition(t,e,n,s=0){const i=this;if(i.stop(),i.#r=n,i.#i=s,n==="jump"){this.setPos(t,1,0,"jump",s);return}i.engine.isAnimating()&&i.#s==t||(e||(t<i.#t?e=i.#n*-1:e=i.#n),i.#s=t,i.engine.animateTo(i.#t,t,e))}setPos(t,e,n=0,s,i=null){const r=this;let o=t-r.#t;if(r.#t,s!=="drag"&&e==1&&(o=0),r.#t=t,r.canLoop()){const l=r.ctx.store.getWidths().track;r.#t>0?r.shiftTrack("forwards"):r.#t<=-l&&r.shiftTrack("backwards")}r.ctx.store.setAnimation({type:s,trackPosition:t,trackDelta:o,velocity:n,progress:e,isAnimating:r.engine.isAnimating(),direction:i!==null?i:r.#i})}shiftTrack(t=1){const e=this,s=e.ctx.store.getWidths().track;let i;t==="forwards"?i=-1:t==="backwards"?i=1:i=t,e.#t+=s*i,e.#e+=s*i,e.#s+=s*i,e.ctx.emitter.emit(e.ctx.events.track.shifted,{trackPosition:e.#t,animationType:"shift"})}destroy(){const t=this;if(t.engine&&(t.engine.off("engine:position-changed",t.handlers.enginePositionChanged),t.engine.off("engine:finished",t.handlers.engineAnimationFinished),t.engine.stop(),t.engine=null),t.ctx){const{emitter:e,events:n}=t.ctx;e.off(n.store.optionsChanged,t.handlers.optionsChanged),e.off(n.drag.start,t.handlers.dragStart),e.off(n.drag.move,t.handlers.dragMove),e.off(n.drag.end,t.handlers.dragEnd),e.off(n.track.requestFrame,t.handlers.trackRequestFrame)}t.handlers=null}}class G{constructor(t,e){const n=this;n.ctx=t,n.animator=e,n.handlers={animationRequested:s=>{const{index:i,trackPosition:r,velocity:o,type:a}=s;r!==void 0?this.animateToTrackPosition(r,o,a):i!==void 0&&this.animateToSlide(i,o,a)}},n.bindEvents()}init(){}reInit(){}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.animation.requested,t.handlers.animationRequested)}settleTrack(){const t=this.ctx.store.getState().renderIndex;this.animateToSlide(t,0,"settle")}animateToSlide(t,e,n){const s=this.getTrackPosForIndex(t);this.animateToTrackPosition(s,e,n)}animateToTrackPosition(t,e,n){const s=this,i=s.animator.currentPos;let r=t;const o=s.ctx.store.getWidths().track;if(n==="jump"){s.animator.animateToPosition(r,0,"jump",0);return}if(s.ctx.store.getOptions().loop){const l=Math.abs(i-r);l===o/2?e&&e!=0?e<0?r>i&&(r-=o):r<=i&&(r+=o):r>i&&(r-=o):l>o/2&&(r>=i?r-=o:r+=o)}e===void 0?e=r<i?-15:15:(e*=1.2,Math.abs(e)<15&&(e*=1.3));let a=0;r<i?a=-1:r>i&&(a=1),s.animator.animateToPosition(r,e,n,a)}getTrackPosForIndex(t){const e=this,n=e.ctx.store.getOptions(),s=e.ctx.store.getWidths();let i=t*(s.slide+s.gap);const r=0-s.paddingLeft,o=s.track-s.viewport-s.gap+s.paddingRight-.1;return i!=r&&i!=o&&n.centerSelectedSlide?(i-=s.viewport/2,i+=s.slide/2):i-=s.paddingLeft,!n.loop&&i<0&&(i=r),!n.loop&&i>o&&(i=o),i!==0&&(i*=-1),i}destroy(){const t=this,{emitter:e,events:n}=t.ctx;e.off(n.animation.requested,t.handlers.animationRequested)}}class Y{constructor(t){const e=this;e.ctx=t,e.carousel=t.carousel,e.viewport=t.viewport,e.isInsideCarousel=n=>{const s=n?.composedPath?.()||[];return s.length?s.includes(e.carousel):e.carousel.contains(n?.target)},e.handlers={handleResize:n=>{e.ctx.emitter.emit(e.ctx.events.window.resize,{event:n})},handleCarouselClick:n=>{n.target.matches('button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])')||e.carousel.focus({preventScroll:!0})},handleWindowFocus:n=>{e.ctx.emitter.emit(e.ctx.events.window.hasFocus,{})},handleWindowBlur:n=>{e.ctx.emitter.emit(e.ctx.events.window.lostFocus,{})},handleCarouselFocus:n=>{e.ctx.emitter.emit(e.ctx.events.carousel.hasFocus,{}),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"focus",event:n})},handleCarouselBlur:n=>{e.ctx.emitter.emit(e.ctx.events.carousel.lostFocus,{})},handleVisibilityChange:()=>{e.ctx.emitter.emit(e.ctx.events.window.visibilityChange,{hidden:document.hidden})},handleKeyDown:n=>{if(e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"key",event:n}),["ArrowLeft","ArrowRight"].includes(n.key)&&n.target===e.carousel){n.preventDefault();const s=n.key==="ArrowLeft"?-1:1;e.ctx.emitter.emit(e.ctx.events.keyboard.arrow,{direction:s,event:n})}},handleWheel:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"wheel",event:n})},unifiedResizeHandler:e.ctx.utils.debounce(n=>{e.handlers.handleResize(n)},4)},e.viewportObserver=new ResizeObserver(n=>{e.handlers.unifiedResizeHandler(n?.[0])}),e.init()}init(){const t=this;window.addEventListener("resize",t.handlers.unifiedResizeHandler),window.addEventListener("orientationchange",t.handlers.unifiedResizeHandler),window.addEventListener("focus",t.handlers.handleWindowFocus),window.addEventListener("blur",t.handlers.handleWindowBlur),t.carousel.addEventListener("focus",t.handlers.handleCarouselFocus,!0),t.carousel.addEventListener("blur",t.handlers.handleCarouselBlur,!0),document.addEventListener("visibilitychange",t.handlers.handleVisibilityChange),t.carousel.addEventListener("keydown",t.handlers.handleKeyDown,!0),t.carousel.addEventListener("wheel",t.handlers.handleWheel,{passive:!0}),t.carousel.addEventListener("click",t.handlers.handleCarouselClick,!0),t.viewport&&t.viewportObserver.observe(t.viewport)}destroy(){const t=this;window.removeEventListener("resize",t.handlers.unifiedResizeHandler),window.removeEventListener("orientationchange",t.handlers.unifiedResizeHandler),window.removeEventListener("focus",t.handlers.handleWindowFocus),window.removeEventListener("blur",t.handlers.handleWindowBlur),t.carousel.removeEventListener("focus",t.handlers.handleCarouselFocus,!0),t.carousel.removeEventListener("blur",t.handlers.handleCarouselBlur,!0),document.removeEventListener("visibilitychange",t.handlers.handleVisibilityChange),t.carousel.removeEventListener("keydown",t.handlers.handleKeyDown,!0),t.carousel.removeEventListener("wheel",t.handlers.handleWheel,{passive:!0}),t.carousel.removeEventListener("click",t.handlers.handleCarouselClick,!0),t.viewportObserver&&(t.viewportObserver.disconnect(),t.viewportObserver=null)}}class K{ctx;constructor(t){const e=this;e.ctx=t,e.handlers={renderIndexChanged:({currentIndex:n})=>{e.handleSlideNavigation(n)}},e.ctx.emitter.on(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged)}updateSlides(t=null){const e=this;t===null&&(t=e.ctx.store.getAnimation().trackPosition||0),e.updateAllSlidesSelection();const n=e.ctx.utils.getSlidesInViewport(e.ctx,t);for(const s of n)e.updateSlideState(s)}updateAllSlidesSelection(){const e=this.ctx.store.getSlides();for(const n of e)n.selected?n.classList.add("tarot-selected"):n.classList.remove("tarot-selected")}updateSlideState(t){const e=this,{slide:n,isVisible:s,isFullyVisible:i,visibilityPercent:r,leftVisibility:o,rightVisibility:a,parallax:l,parallaxVisibility:d}=t;n.style.setProperty("--tarot-visibility",r.toFixed(3)),n.style.setProperty("--tarot-left-visibility",o.toFixed(3)),n.style.setProperty("--tarot-right-visibility",a.toFixed(3)),n.style.setProperty("--tarot-parallax",l.toFixed(3)),n.style.setProperty("--tarot-parallax-visibility",d.toFixed(3)),n.classList.remove("tarot-hidden","tarot-visible","tarot-fully-visible"),s?(n.classList.add("tarot-visible"),i&&n.classList.add("tarot-fully-visible")):n.classList.add("tarot-hidden"),e.updateSlideARIA(n,s,r),e.updateSlideTabindex(n,s)}updateSlideARIA(t,e,n){const s=this;if(t.setAttribute("aria-hidden",String(!e)),t.hasAttribute("role")||t.setAttribute("role","group"),!t.hasAttribute("aria-label")&&!t.hasAttribute("aria-labelledby")){const o=t.getAttribute("index")||"0",a=parseInt(o,10)||0,l=s.ctx.store.getState().slideCount||s.ctx.store.getSlides().length||0;t.setAttribute("aria-label",`slide ${a+1} of ${l}`)}const i=s.ctx.store.getState().renderIndex,r=t.getAttribute("index");r!=null&&Number(r)===i?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")}updateSlideTabindex(t,e){t.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])').forEach(s=>{if(e){const i=s.getAttribute("data-original-tabindex");i!==null&&(s.setAttribute("tabindex",i),s.removeAttribute("data-original-tabindex"))}else{const i=s.getAttribute("tabindex");i!=="-1"&&(i!==null&&s.setAttribute("data-original-tabindex",i),s.setAttribute("tabindex","-1"))}})}getSlideVisibility(){const t=this,e=t.ctx.store.getAnimation().trackPosition||0;return t.ctx.utils.getSlidesInViewport(t.ctx,e)}getVisibleSlides(){return this.getSlideVisibility().filter(e=>e.isVisible).map(e=>e.slide)}getFullyVisibleSlides(){return this.getSlideVisibility().filter(e=>e.isFullyVisible).map(e=>e.slide)}destroy(){const e=this.ctx.carousel.querySelectorAll("tarot-slide");for(const n of e)n.classList.remove("tarot-hidden","tarot-visible","tarot-fully-visible","tarot-selected"),n.style.removeProperty("--tarot-visibility"),n.style.removeProperty("--tarot-left-visibility"),n.style.removeProperty("--tarot-right-visibility"),n.style.removeProperty("--tarot-parallax"),n.style.removeProperty("--tarot-parallax-visibility"),n.removeAttribute("aria-hidden"),n.removeAttribute("aria-current"),n.querySelectorAll("[data-original-tabindex]").forEach(i=>{const r=i.getAttribute("data-original-tabindex");r!==null?i.setAttribute("tabindex",r):i.removeAttribute("tabindex"),i.removeAttribute("data-original-tabindex")})}handleSlideNavigation(t){const e=this;if(!e.ctx.store.getOptions().announcements||!e.ctx.announcements)return;const i=e.ctx.store.getSlides().length,r=`Slide ${t+1} of ${i}`;e.ctx.announcements.textContent=r}destroy(){const t=this;t.handlers?.renderIndexChanged&&t.ctx.emitter.off(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged)}}function M(c,t,e){if(c==="L+")return Number.NEGATIVE_INFINITY;if(c==="R+")return Number.POSITIVE_INFINITY;const n=e?.[c];if(n==null)throw new Error(`getPointValue: unknown point "${c}". Available points: ${Object.keys(e||{}).join(", ")}`);return n+t}function D(c,t,e,n){const s=M(c,e,n),i=M(t,e,n);return s>i?{start:s,end:i}:{start:i,end:s}}function Z(c,t,e,n,s){function i(u){return Math.round(u*2)/2}const{start:r,end:o}=D(t,e,n,s),a=i(r),l=i(o),d=i(c.centerPoint),f=d<=a&&d>l;let h=0;if(f)if(Number.isFinite(a)&&Number.isFinite(l)){const u=a-l;h=u>0?Math.max(0,Math.min(1,(d-l)/u)):1}else h=1;return{isInRange:f,percent:h,start:a,end:l}}function J(c){const{animation:t,transformPoints:e}=c,n=t.trackPosition===0?0:-t.trackPosition;return{getPointValue:s=>M(s,n,e),getRange:(s,i)=>D(s,i,n,e),isSlideInRange:(s,i,r)=>Z(s,i,r,n,e),trackPosition:n,transformPoints:e,frame:c}}class Q{#t;ctx;constructor(t){const e=this;e.ctx=t,e.#t=new K(t),e.effect=null,e.rafId=null,e.handlers={effectChanged:()=>{e.effect=t.commands.getEffect(),e.requestFrame()},storeDirty:()=>{e.requestFrame()}},e.bindEvents()}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.effect.changed,t.handlers.effectChanged),e.on(n.store.changedDirty,t.handlers.storeDirty)}requestFrame(){const t=this;t.rafId===null&&(t.rafId=requestAnimationFrame(t.onFrame.bind(t)))}cancel(){const t=this;t.rafId!==null&&(cancelAnimationFrame(t.rafId),t.rafId=null)}onFrame(t){const e=this;e.rafId=null,e.ctx.commands.getSlideManager().prepSlidesForFrame();const n=e.ctx.store.getSnapshot(),s=[...n.slides].sort((r,o)=>r.renderIndex-o.renderIndex),i=Object.freeze({state:n.state,widths:n.widths,options:n.options,slides:s,animation:n.animation,transformPoints:n.transformPoints,time:t});e.renderFrame(i),e.ctx.store.markAsClean(),n.animation.isAnimating&&(e.ctx.emitter.emit(e.ctx.events.track.requestFrame,{time:t}),e.requestFrame())}renderFrame(t){const e=this;e.ctx.emitter.emit(e.ctx.events.frame.beforeRender,t);const n=J(t);e.effect.render(t,n),e.#t.updateSlides(t.animation.trackPosition),e.ctx.emitter.emit(e.ctx.events.frame.afterRender,t)}destroy(){const t=this,{emitter:e,events:n}=t.ctx;t.cancel(),e.off(n.effect.changed,t.handlers.effectChanged),e.off(n.store.changedDirty,t.handlers.storeDirty),t.#t&&(t.#t.destroy(),t.#t=null),t.effect=null}}class tt{#t;#e;#n;#s;#r;#i;#a;#o;constructor(t){const e=this;if(!t||typeof t.emit!="function")throw new Error("data-store requires an emitter with an emit method");e.#t=t,e.#o=!1,e.#e={},e.#n={selectedIndex:0,renderIndex:0,pageIndex:0,pageCount:1,isDragging:!1,slideCount:0},e.#s={viewport:0,track:0,slide:0,slideMin:0,gap:0,slideAndGap:0,paddingLeft:0,paddingRight:0},e.#r=[],e.#i={},e.#a={type:"jump",trackPosition:0,trackDelta:0,velocity:0,progress:1,isAnimating:!1,direction:0}}getOptions(){return Object.freeze({...this.#e})}setOptions(t={}){const e=this,n=e.getOptions();e.#e={...e.#e,...t};const s=e.getOptions();e.#l(),e.#t.emit(S.store.optionsChanged,{prevOptions:n,currentOptions:s})}getState(){return Object.freeze({...this.#n})}setState(t={}){const e=this,n=e.getState();e.#n={...e.#n,...t};const s=e.getState();e.#l(),e.#t.emit(S.store.stateChanged,{prevState:n,currentState:s}),t.selectedIndex!==void 0&&t.selectedIndex!==n.selectedIndex&&e.#t.emit(S.store.selectedIndexChanged,{prevIndex:n.selectedIndex,currentIndex:t.selectedIndex}),t.renderIndex!==void 0&&t.renderIndex!==n.renderIndex&&e.#t.emit(S.store.renderIndexChanged,{prevIndex:n.renderIndex,currentIndex:t.renderIndex}),t.pageIndex!==void 0&&t.pageIndex!==n.pageIndex&&e.#t.emit(S.store.pageIndexChanged,{prevPageIndex:n.pageIndex,currentPageIndex:t.pageIndex}),t.pageCount!==void 0&&t.pageCount!==n.pageCount&&e.#t.emit(S.store.pageCountChanged,{count:t.pageCount})}getWidths(){return Object.freeze({...this.#s})}setWidths(t={}){const e=this,n=e.getWidths();e.#s={...t};const s=e.getWidths();e.#l(),e.#t.emit(S.store.layoutChanged,{prevWidths:n,currentWidths:s})}getSlides(){return Object.freeze([...this.#r])}setSlides(t=[]){const e=this,n=e.getSlides();e.#r=[...t];const s=e.getSlides();e.setState({slideCount:e.#r.length}),e.#l(),e.#t.emit(S.store.slidesChanged,{prevSlides:n,currentSlides:s})}getTransformPoints(){return Object.freeze({...this.#i})}setTransformPoints(t={}){const e=this,n=e.getTransformPoints();e.#i={...t},e.#l(),e.#t.emit(S.store.transformPointsChanged,{prevPoints:n,currentPoints:Object.freeze({...e.#i})})}setAnimation(t={}){const e=this,n={...e.#a};e.#a={...e.#a,...t},e.#l(),t.trackPosition!==void 0&&t.trackPosition!==n.trackPosition&&e.#t.emit(S.track.positionChanged,{prevTrackPosition:n.trackPosition,currentTrackPosition:t.trackPosition,trackDelta:t.trackPosition-n.trackPosition,animationType:t.type||"unknown"})}getAnimation(){return Object.freeze({...this.#a})}clearAnimation(){this.#a={type:"jump",trackPosition:0,trackDelta:0,velocity:0,progress:1}}isDirty(){return this.#o}markAsClean(){const t=this;t.#o&&(t.#o=!1,t.#t.emit(S.store.changedClean))}#l(){const t=this;t.#o||(t.#o=!0,t.#t.emit(S.store.changedDirty))}getSnapshot(){const t=this;return Object.freeze({state:t.getState(),widths:t.getWidths(),slides:t.getSlides(),transformPoints:t.getTransformPoints(),options:t.getOptions(),animation:t.getAnimation()})}destroy(){const t=this;t.#t=null,t.#e=null,t.#n=null,t.#s=null,t.#r=null,t.#i=null,t.#a=null,t.#o=!1}}function et(c,t){var e=!1;return function(...n){e||(c.apply(this,n),e=!0,setTimeout(function(){e=!1},t))}}function nt(c,t,e){var n;return function(...s){var i=this,r=function(){n=null,e||c.apply(i,s)},o=e&&!n;clearTimeout(n),n=setTimeout(r,t),o&&c.apply(i,s)}}function V(c,t){const e=n=>n&&typeof n=="object";return Object.keys(t).reduce((n,s)=>(Array.isArray(n[s])&&Array.isArray(t[s])?n[s]=n[s].concat(t[s]):e(n[s])&&e(t[s])?n[s]=V({...n[s]},t[s]):n[s]=t[s],n),{...c})}function R(c,t){return typeof c=="number"?c>0&&c<1?c*t:c:c.indexOf("px")>-1?parseFloat(c.replace("px","")):c.indexOf("%")>-1?parseFloat(c.replace("%",""))/100*t:0}function F(c,t){if(c===t)return!0;if(typeof c!="object"||c===null||typeof t!="object"||t===null)return!1;if(Array.isArray(c)&&Array.isArray(t)){if(c.length!==t.length)return!1;for(let s=0;s<c.length;s++)if(!F(c[s],t[s]))return!1;return!0}const e=Object.keys(c),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e)if(!n.includes(s)||!F(c[s],t[s]))return!1;return!0}function st(c,t){const e=t.slidesPerView||1;return!!(t.loop&&c>e)}function it(c,t=null,e=0){const n=c.store.getWidths(),s=c.store.getSlides();c.store.getState(),t===null&&(t=c.store.getAnimation().trackPosition||0);const i=n.viewport,r=n.slide;n.gap;const o=n.slideAndGap,a=-t-e,l=a+i+e*2,d=-t+i/2,f=[];for(let h=0;h<s.length;h++){const u=s[h],m=u.renderIndex!==void 0?u.renderIndex:h,g=m*o,y=g+r,x=Math.max(g,a),v=Math.min(y,l),C=Math.max(0,v-x),p=Math.max(0,Math.min(1,C/r)),w=p>0,L=p>=.66;let b=0,k=0,O=0,I=1;if(C>0){const W=g+r/2-d;O=Math.max(-1,Math.min(1,W/(i/2))),W>0?(k=Math.max(0,Math.min(1,p)),I=1-k):k=1,W<0?(b=Math.max(0,Math.min(1,p)),I=(1-b)*-1):b=1,p>=1&&(b=1,k=1,I=0)}else{const W=g+r/2-d;W>0&&(I=1),W<0&&(I=-1)}f.push({slide:u,index:h,renderIndex:m,visibilityPercent:p,isVisible:w,isFullyVisible:L,leftVisibility:b,rightVisibility:k,parallax:O,parallaxVisibility:I,slideStart:g,slideEnd:y})}return f}const rt=Object.freeze({throttle:et,debounce:nt,deepMerge:V,convertValueToNumber:R,areOptionsEqual:F,canLoop:st,getSlidesInViewport:it});function ot({viewportEl:c,options:t,slideCount:e}){const n=c.offsetWidth||0,s=Math.max(1,Number(t.slidesPerView)||1),i=R(t.gap,n),r=R(t.paddingLeft,n),o=R(t.paddingRight,n),a=r+o,l=i*(s-1),d=Math.max(0,n-l-a);let f=s>0?Math.round(d/s*1e3)/1e3:0;const h=R(t.slideMinWidth,f);f<h&&(f=h);const u=Math.max(0,e)*(f+i);return{viewport:n,track:u,slide:f,slideMin:h,gap:i,slideAndGap:Math.round((f+i)*1e3)/1e3,paddingLeft:r,paddingRight:o}}function at({loop:c,slidesPerMove:t,slidesPerView:e,slideCount:n}){if(c)return Math.max(1,Math.ceil(n/t));if(n<=e)return 1;const s=n-e;return Math.ceil(s/t)+1}function lt(c){const{store:t}=c,e=t.getWidths(),n=t.getOptions(),s=e.slide/2,i=e.slideAndGap,r=n.slidesPerView,o=e.paddingLeft+s,a={CL1:o};for(let d=1;d<=r;d++)a[`CL${d}`]=o+i*(d-1);for(let d=1;d<=r;d++){const f=r-d+1;a[`CR${d}`]=a[`CL${f}`]}r===1?a.C=a.CL1:a.C=(a.CL1+a[`CL${r}`])/2;for(let d=1;d<=10;d++)a[`L${d}`]=o-i*d;const l=a[`CL${r}`];for(let d=1;d<=10;d++)a[`R${d}`]=l+i*d;return a}class P{static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:0,right:0}};constructor(t){const e=this;e.ctx=t,e.currentSlideWidth=0,e.currentTrackWidth=0}init(){}reInit(){}renderSlideWidth(t){this.currentSlideWidth!==t&&(this.currentSlideWidth=t,this.ctx.viewport.style.setProperty("--tarot-slide-width",`${t}px`))}renderTrackPosition(t){let e=t.isAnimating?`translate3d(${t.trackPosition}px,0,0)`:`translateX(${t.trackPosition}px)`;this.ctx.track.style.transform=e}renderTrackWidth(t){this.currentTrackWidth!==t&&(this.currentTrackWidth=t,this.ctx.track.style.width=`${t}px`)}render(t,e){}get rules(){return this.constructor.rules}destroy(){}}class dt extends P{static effectName="carousel";constructor(t){super(t)}render(t,e){const{slides:n,widths:s,state:i,animation:r}=t,o=this;o.renderTrackWidth(s.track),o.renderSlideWidth(s.slide),o.renderTrackPosition(r);for(let a=0,l=n.length;a<l;++a){const d=n[a];d&&d.style&&(d.style.transition="none",d.style.transform=`translateX(${d.trackPosition}px)`)}}destroy(){this.ctx.track.style.transform="",this.ctx.track.style.width=""}}class ct extends P{static effectName="fade";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1,loopBuffer:{left:0,right:0}};constructor(t){super(t);const e=this;e.blurAmount=10,e.scaleAmount=.1,e.lastState=new WeakMap}render(t,e){const n=this,{slides:s,widths:i,animation:r}=t;n.renderSlideWidth(i.slide);const o=n.lastState;for(let a=0,l=s.length;a<l;++a){const d=s[a];if(e.isSlideInRange(d,"L+","L1").isInRange){o.get(d)!=="hiddenLeft"&&(n.applyHiddenLeftFilter(d),o.set(d,"hiddenLeft"));continue}const h=e.isSlideInRange(d,"CL1","L1");if(h.isInRange){const g=`fadeLeft:${Math.round(h.percent*100)}`;o.get(d)!==g&&(n.applyFadeLeftFilter(d,h.percent),o.set(d,g));continue}if(e.isSlideInRange(d,"R1","CL1").isInRange){o.get(d)!=="fadeRight"&&(n.applyFadeRightFilter(d),o.set(d,"fadeRight"));continue}if(e.isSlideInRange(d,"R+","R1").isInRange){o.get(d)!=="hiddenRight"&&(n.applyHiddenRightFilter(d),o.set(d,"hiddenRight"));continue}}}applyHiddenLeftFilter(t){t.style.opacity="0",t.style.display="none",t.style.zIndex="1",t.style.filter=`blur(${this.blurAmount}px)`,t.style.transform=`scale(${1+this.scaleAmount})`}applyFadeLeftFilter(t,e){e>.995&&(e=1);const n=(1-e)*this.blurAmount,s=1+(1-e)*this.scaleAmount;t.style.opacity=String(e),t.style.display="block",t.style.zIndex="1",t.style.filter=`blur(${n}px)`,t.style.transform=`scale(${s})`}applyFadeRightFilter(t){t.style.opacity="1",t.style.display="block",t.style.zIndex="0",t.style.filter="blur(0px)",t.style.transform="scale(1)"}applyHiddenRightFilter(t){t.style.opacity="0",t.style.display="none",t.style.zIndex="0",t.style.filter="blur(0px)",t.style.transform="scale(1)"}destroy(){super.destroy();const t=this.ctx.store.getSlides()||[];for(let e=0;e<t.length;e++){const n=t[e];!n||!n.style||(n.style.opacity="",n.style.display="",n.style.zIndex="",n.style.filter="",n.style.transform="")}this.lastState=null}}class ht{constructor(t){const e=this;e.ctx=t,e.otherCarousel=null,e.isNavCarousel=!0,e.isActive=!1,e.handlers={otherAnimationRequested:({index:n,velocity:s,type:i})=>{e.ctx.store.getState().selectedIndex!==n&&setTimeout(()=>{e.ctx.commands.goToSlide(n)},1)},renderIndexChanged:({currentIndex:n})=>{if(!e.isActive)return;e.ctx.store.getState().selectedIndex!==n&&e.ctx.store.setState({selectedIndex:n})},optionsChanged:()=>{e.reInit()},selectedIndexChanged:({prevIndex:n,currentIndex:s})=>{e.isActive&&(e.updateOtherCarousel(),e.updateNavClasses(n,s))},keyDown:n=>{e.isActive&&e.handleKeyDown(n)},slideClick:({index:n,renderIndex:s,event:i})=>{if(!e.isActive)return;const o=e.ctx.store.getSlides()[n];if(o&&typeof o.focus=="function")try{o.focus({preventScroll:!0})}catch{}e.ctx.commands.goToSlide(n)}},e.bindEvents(),e.init()}init(){const t=this,n=t.ctx.store.getOptions().asNavFor;if(!n){t.disableNavUI?.(),t.isActive=!1;return}const s=document.querySelector(n);if(!s){t.disableNavUI?.(),t.isActive=!1;return}t.otherCarousel=s,t.isActive=!0,t.setupNavOptions(),t.enableNavUI?.(),setTimeout(()=>{t.otherCarousel.on(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.updateNavClasses(-1,t.ctx.store.getState().selectedIndex);const{renderIndex:i,selectedIndex:r}=t.ctx.store.getState();i!==r&&t.ctx.store.setState({selectedIndex:i})},40)}reInit(){const t=this;t.otherCarousel&&(t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null),t.disableNavUI(),t.isActive=!1,t.init()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged),t.ctx.emitter.on(t.ctx.events.store.selectedIndexChanged,t.handlers.selectedIndexChanged),t.ctx.emitter.on(t.ctx.events.slides.click,t.handlers.slideClick)}enableNavUI(){const t=this;if(!t.isActive)return;t.ctx.carousel.classList.add("tarot-nav-carousel"),t.ctx.track.addEventListener("keydown",t.handlers.keyDown,!0),t.ctx.carousel.setAttribute("tabindex","0"),t.ctx.carousel.setAttribute("role","tablist"),t.ctx.carousel.setAttribute("aria-label","Carousel Navigation");const e=t.ctx.store.getSlides(),n=t.ctx.store.getState().selectedIndex;for(let s=0;s<e.length;s++){const i=e[s];i.setAttribute("role","tab"),i.setAttribute("tabindex",s===n?"0":"-1")}}disableNavUI(){const t=this;t.ctx.carousel.classList.remove("tarot-nav-carousel"),t.ctx.track.removeEventListener("keydown",t.handlers.keyDown,!0),t.ctx.carousel.removeAttribute("role"),t.ctx.carousel.removeAttribute("aria-label"),t.ctx.store.getSlides().forEach(n=>{n.removeAttribute("aria-selected"),n.removeAttribute("role")})}setupNavOptions(){const t=this;t.ctx.store.getOptions().centerSelectedSlide||t.ctx.store.setOptions({centerSelectedSlide:!0})}handleKeyDown(t){const e=this,n=e.ctx.store.getState().selectedIndex,s=e.ctx.store.getState().slideCount;switch(t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault(),t.stopPropagation();const i=n>0?n-1:e.ctx.store.getOptions().loop?s-1:n;e.ctx.commands.goToSlide(i);const o=e.ctx.store.getSlides()[i];o&&typeof o.focus=="function"&&setTimeout(()=>{try{o.focus({preventScroll:!0})}catch{}},0);break;case"ArrowRight":case"ArrowDown":t.preventDefault(),t.stopPropagation();const a=n<s-1?n+1:e.ctx.store.getOptions().loop?0:n;e.ctx.commands.goToSlide(a);const d=e.ctx.store.getSlides()[a];d&&typeof d.focus=="function"&&setTimeout(()=>{try{d.focus({preventScroll:!0})}catch{}},0);break;case"Home":t.preventDefault(),t.stopPropagation(),e.ctx.commands.goToSlide(0);const f=e.ctx.store.getSlides();f[0]?.focus&&setTimeout(()=>{try{f[0].focus({preventScroll:!0})}catch{}},0);break;case"End":t.preventDefault(),t.stopPropagation(),e.ctx.commands.goToSlide(s-1);const h=e.ctx.store.getSlides(),u=s-1;h[u]?.focus&&setTimeout(()=>{try{h[u].focus({preventScroll:!0})}catch{}},0);break}}updateNavClasses(t,e){const s=this.ctx.store.getSlides();t>=0&&s[t]&&(s[t].setAttribute("aria-selected","false"),s[t].setAttribute("tabindex","-1")),s[e]&&(s[e].setAttribute("aria-selected","true"),s[e].setAttribute("role","tab"),s[e].setAttribute("tabindex","0"))}updateOtherCarousel(){const t=this;if(!t.otherCarousel)return;const e=t.ctx.store.getState().selectedIndex;setTimeout(()=>{t.otherCarousel.goToSlide(e)},1)}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged),t.ctx.emitter.off(t.ctx.events.store.selectedIndexChanged,t.handlers.selectedIndexChanged),t.ctx.emitter.off(t.ctx.events.slides.click,t.handlers.slideClick),t.disableNavUI(),t.otherCarousel&&t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null,t.isActive=!1}}class ut{constructor(t){const e=this;e.ctx=t,e.otherCarousel=null,e.handlers={otherAnimationRequested:({index:n,velocity:s,type:i})=>{e.ctx.store.getState().renderIndex!==n&&e.ctx.commands.goToSlide(n)},optionsChanged:n=>{e.reInit()},renderIndexChanged:({prevIndex:n,currentIndex:s})=>{e.updateSyncWithCarousel()}},e.bindEvents(),e.init()}init(){const t=this,n=t.ctx.store.getOptions().syncWith;n&&(t.otherCarousel=document.querySelector(n),t.otherCarousel&&setTimeout(()=>{t.otherCarousel.on(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested)},100))}reInit(){const t=this;t.otherCarousel&&(t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null),t.init()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged)}updateSyncWithCarousel(){const t=this;if(!t.otherCarousel)return;const e=t.ctx.store.getState().renderIndex;t.otherCarousel.goToSlide(e)}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged),t.otherCarousel&&t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null}}class ft{constructor(t){const e=this;e.ctx=t,e.autoplayTimer=null,e.autoplayOptions=e.ctx.store.getOptions().autoplay||{},e.debouncedResume=e.ctx.utils.debounce(()=>e.start(),1e4),e.handlers={userInteracted:()=>{e.pause()},optionsChanged:()=>{e.autoplayOptions=e.ctx.store.getOptions().autoplay||{},e.reInit()},tick:()=>{document.hasFocus?.()&&e.ctx.commands.next(-5)}},e.bindEvents(),e.reInit()}reInit(){const t=this;t.autoplayOptions=t.ctx.store.getOptions().autoplay||{},t.autoplayOptions.interval?t.start():t.stop()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.user.interacted,t.handlers.userInteracted),t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged)}start(){const t=this;if(t.stop(),!t.autoplayOptions.interval)return;let e=t.autoplayOptions.interval;e===0||e===!1||(e===!0&&(e=4e3),t.autoplayTimer=setInterval(t.handlers.tick,e))}stop(){const t=this;clearInterval(t.autoplayTimer),t.autoplayTimer=null}pause(){const t=this;t.stop(),t.autoplayOptions.interval&&t.debouncedResume()}destroy(){const t=this;t.stop(),t.ctx.emitter.off(t.ctx.events.user.interacted,t.handlers.userInteracted),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.debouncedResume.cancel&&t.debouncedResume.cancel()}}class pt{constructor(t){const e=this;e.ctx=t,e.navOptions={},e.prevButtonButton=null,e.nextButtonButton=null,e.handlers={prevClick:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"button",event:n}),e.ctx.commands.prev(5)},nextClick:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"button",event:n}),e.ctx.commands.next(-5)},buttonFocus:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"focus",event:n})},buttonBlur:n=>{},optionsChanged:()=>{e.reInit()},pageChanged:()=>{e.checkDisabledState()},windowResize:()=>{e.updateSmartButtons()}},e.init()}init(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.queryButtons(),t.nextButton||t.buildNextButton(),t.prevButton||t.buildPrevButton(),t.checkButtonOptions(),t.bindUI(),t.bindEvents(),t.checkDisabledState(),setTimeout(()=>{t.updateSmartButtons()},8),setTimeout(()=>{t.updateSmartButtons()},30)}reInit(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.checkButtonOptions(),t.checkDisabledState(),t.updateSmartButtons()}bindUI(){const t=this;t.unbindUI(),t.prevButton&&(t.prevButton.addEventListener("click",t.handlers.prevClick,!0),t.prevButton.addEventListener("focus",t.handlers.buttonFocus),t.prevButton.addEventListener("blur",t.handlers.buttonBlur)),t.nextButton&&(t.nextButton.addEventListener("click",t.handlers.nextClick,!0),t.nextButton.addEventListener("focus",t.handlers.buttonFocus),t.nextButton.addEventListener("blur",t.handlers.buttonBlur));const e=t.ctx.store.getSlides();if(e.length>0){let n=e[0].el?.querySelector("img")||!1;n&&n.complete?t.updateSmartButtons(n):n&&(n.onload=function(){t.updateSmartButtons(n)})}}unbindUI(){const t=this;t.prevButton&&(t.prevButton.removeEventListener("click",t.handlers.prevClick,!0),t.prevButton.removeEventListener("focus",t.handlers.buttonFocus),t.prevButton.removeEventListener("blur",t.handlers.buttonBlur)),t.nextButton&&(t.nextButton.removeEventListener("click",t.handlers.nextClick,!0),t.nextButton.removeEventListener("focus",t.handlers.buttonFocus),t.nextButton.removeEventListener("blur",t.handlers.buttonBlur))}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.ctx.emitter.on(t.ctx.events.window.resize,t.handlers.windowResize)}checkButtonOptions(){const t=this;t.navOptions.showButtons?t.showButtons():t.hideButtons()}queryButtons(){const t=this,e=t.navOptions;if(e.prevButtonSelector&&(t.prevButton=document.querySelector(e.prevButtonSelector)),e.nextButtonSelector&&(t.nextButton=document.querySelector(e.nextButtonSelector)),!t.prevButton){const n=t.ctx.carousel.querySelectorAll('[data-action="tarot-prev"]');t.prevButton=Array.from(n).find(s=>s.closest("tarot-carousel")===t.ctx.carousel)||null}if(!t.nextButton){const n=t.ctx.carousel.querySelectorAll('[data-action="tarot-next"]');t.nextButton=Array.from(n).find(s=>s.closest("tarot-carousel")===t.ctx.carousel)||null}}buildPrevButton(){const t=this;t.ctx.carousel.insertAdjacentHTML("afterbegin",`
			<button class="tarot-button" data-action="tarot-prev" aria-label="previous slide">
				<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
					<title>angle left</title>
					<path d="m21 7-9 9 9 9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
				</svg>
			</button>
		`),t.prevButton=t.ctx.carousel.querySelector('[data-action="tarot-prev"]')}buildNextButton(){const t=this;t.ctx.carousel.insertAdjacentHTML("afterbegin",`
			<button class="tarot-button" data-action="tarot-next" aria-label="next slide">
				<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
					<title>angle right</title>
					<path d="m11 25 9-9-9-9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
				</svg>
			</button>
		`),t.nextButton=t.ctx.carousel.querySelector('[data-action="tarot-next"]')}showButtons(){const t=this,e=t.prevButton,n=t.nextButton;e&&t.navOptions.showPrevButton!==!1?(e.style.display="",e.setAttribute("aria-label","previous"),e.classList.add("tarot-button","tarot-prev")):t.hidePrevButton(),n&&t.navOptions.showNextButton!==!1?(n.style.display="",n.setAttribute("aria-label","next"),n.classList.add("tarot-button","tarot-next")):t.hideNextButton()}hideButtons(){this.hidePrevButton(),this.hideNextButton()}hidePrevButton(){const t=this;t.prevButton&&(t.prevButton.style.display="none")}hideNextButton(){const t=this;t.nextButton&&(t.nextButton.style.display="none")}updateSmartButtons(){const t=this,e=t.ctx.store.getOptions().navigation?.smartButtons||!1,n=t.prevButton,s=t.nextButton,i=40,r=t.ctx.viewport,o=r?.offsetWidth||0,a=t.ctx.store.getSlides();if(!r||!a||a.length===0)return;if(!e){n&&n.classList.remove("tarot-smart-position"),s&&s.classList.remove("tarot-smart-position");return}const l=a[0]?.el;if(!l)return;const d=window.getComputedStyle(r),f=parseInt(d.paddingTop)||0;let h=r.offsetHeight;const u=l.querySelector("img");u&&u.offsetHeight<h&&(h=u.height+f*2),h=h/2;const m=t.ctx.store.getWidths(),g=m.paddingLeft||0,y=m.paddingRight||0,x=m.gap||0;if(n){n.classList.add("tarot-smart-position"),n.style.top=`${h}px`;let v=i,C=g-x/2,p=g;window.innerWidth===o?C<i?p>=i?v=p:x>0&&(v+=x):C>=i&&(v=C):v=p,n.style.left=`${v}px`}if(s){s.classList.add("tarot-smart-position"),s.style.top=`${h}px`;let v=i,C=y-x/2,p=y;window.innerWidth===o?C<i?p>=i?v=p:x>0&&(v+=x):C>=i&&(v=C):v=p,s.style.right=`${v}px`}}checkDisabledState(){const t=this,e=t.ctx.store.getState(),n=t.ctx.store.getOptions(),s=e.pageIndex,i=e.pageCount;n.loop||(t.prevButton&&(s==0?t.prevButton.disabled=!0:t.prevButton.disabled=!1),t.nextButton&&(s==i-1?t.nextButton.disabled=!0:t.nextButton.disabled=!1))}destroy(){const t=this;t.unbindUI(),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.ctx.emitter.off(t.ctx.events.window.resize,t.handlers.windowResize),t.prevButtonButton=null,t.nextButtonButton=null}}class gt{constructor(t){const e=this;e.ctx=t,e.handlers={userInteracted:()=>{e.checkLazyImages(),e.ctx.emitter.off(e.ctx.events.user.interacted,e.handlers.userInteracted)},slidesChanged:()=>{e.reInit()}},e.init()}init(){const t=this;t.bindEvents(),t.checkLazyImages()}reInit(){this.checkLazyImages()}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.user.interacted,t.handlers.userInteracted),e.on(n.store.slidesChanged,t.handlers.slidesChanged)}checkLazyImages(){const e=this.ctx.store.getSlides();if(!e||typeof e.length>"u"){console.warn("LazyLoad: Slides not available");return}let n;for(let s=0,i=e.length;s<i;++s)if(!(!e[s]||!e[s].el)){n=e[s].el.querySelectorAll('img[loading="lazy"]');for(let r=0,o=n.length;r<o;++r)n[r].removeAttribute("loading")}}destroy(){const t=this,{emitter:e,events:n}=t.ctx;e.off(n.user.interacted,t.handlers.userInteracted),e.off(n.store.slidesChanged,t.handlers.slidesChanged)}}class mt{constructor(t){const e=this;e.ctx=t,e.navOptions={},e.paginationContainer=null,e.dotsList=null,e.isAutoGeneratedNav=!1,e.debouncedRender=e.ctx.utils.debounce(()=>e.render(),20),e.handlers={paginationClick:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"pagination",event:n});const s=n.target.closest('[data-action="tarot-go-to-page"]');if(!s)return;const i=parseInt(s.getAttribute("data-page-index"),10);e.activateDot(i)},keyDown:n=>{if(!["ArrowLeft","ArrowRight","Home","End"].includes(n.key))return;const i=Array.from(e.paginationContainer.querySelectorAll(".tarot-dots-button")),r=i.findIndex(l=>l.getAttribute("tabIndex")==="0");let o=r;const a=e.ctx.store.getOptions();switch(n.key){case"ArrowRight":o=r+1,o>=i.length&&(o=a.loop?0:r);break;case"ArrowLeft":o=r-1,o<0&&(o=a.loop?i.length-1:r);break;case"Home":o=0;break;case"End":o=i.length-1;break;default:return}n.preventDefault(),n.stopPropagation(),i.forEach((l,d)=>{l.tabIndex=d===o?0:-1}),i[o].focus(),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"key",event:n}),e.activateDot(o)},optionsChanged:()=>{e.reInit()},slidesChanged:()=>{e.reInit()},pageChanged:()=>{e.updateSelectedDot()}},e.init()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.slidesChanged,t.handlers.slidesChanged),t.ctx.emitter.on(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.paginationContainer.addEventListener("click",t.handlers.paginationClick,!1),t.paginationContainer.addEventListener("keydown",t.handlers.keyDown,!1)}init(){const t=this;if(t.navOptions=t.ctx.store.getOptions().navigation||{},t.isAutoGeneratedNav=!1,t.navOptions&&t.navOptions.paginationSelector){const e=document.querySelector(t.navOptions.paginationSelector);e&&(t.paginationContainer=e)}if(!t.paginationContainer){t.isAutoGeneratedNav=!0;const e=document.createElement("nav");e.setAttribute("aria-label","carousel navigation"),t.paginationContainer=document.createElement("div"),e.appendChild(t.paginationContainer),t.ctx.carousel.appendChild(e)}t.paginationContainer.innerHTML="",t.paginationContainer.classList.add("tarot-dots-container"),t.dotsList=document.createElement("ul"),t.dotsList.classList.add("tarot-dots-list"),t.dotsList.setAttribute("role","tablist"),t.dotsList.setAttribute("aria-orientation","horizontal"),t.paginationContainer.appendChild(t.dotsList),t.bindEvents(),t.render()}reInit(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.debouncedRender()}render(){const t=this,e=t.ctx.store.getState(),n=e.pageIndex,s=e.pageCount,i=t.ctx.carousel.id||"";t.dotsList.innerHTML="";for(let r=0;r<s;++r){const o=document.createElement("li");o.setAttribute("role","presentation");const a=document.createElement("button");a.type="button",a.classList.add("tarot-dots-button"),a.setAttribute("role","tab"),a.setAttribute("data-page-index",r),a.setAttribute("data-action","tarot-go-to-page"),a.setAttribute("aria-selected",n===r?"true":"false"),a.tabIndex=n===r?0:-1,a.setAttribute("aria-label",`page ${r+1}`),a.id=`carousel-tab-${r+1}`,i&&a.setAttribute("aria-controls",i);const l=document.createElement("span");l.className="tarot-visually-hidden",l.textContent=`slide ${r+1}`,a.appendChild(l),o.appendChild(a),t.dotsList.appendChild(o)}t.updateSelectedDot(),t.navOptions&&t.navOptions.showPagination?t.show():t.hide()}activateDot(t){const e=this;e.ctx.commands.goToPage(t),e.updateSelectedDot()}updateSelectedDot(){const t=this,e=t.paginationContainer.querySelectorAll(".tarot-dots-button"),n=`${t.ctx.store.getState().pageIndex}`;e.forEach(s=>{s.dataset.pageIndex===n?(s.setAttribute("aria-selected","true"),s.tabIndex=0):(s.setAttribute("aria-selected","false"),s.tabIndex=-1)})}show(){this.paginationContainer.parentElement?this.paginationContainer.parentElement.style.display="":this.paginationContainer.style.display=""}hide(){this.paginationContainer.parentElement?this.paginationContainer.parentElement.style.display="none":this.paginationContainer.style.display="none"}destroy(){const t=this;t.paginationContainer&&(t.paginationContainer.removeEventListener("click",t.handlers.paginationClick,!1),t.paginationContainer.removeEventListener("keydown",t.handlers.keyDown,!1)),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.slidesChanged,t.handlers.slidesChanged),t.ctx.emitter.off(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.debouncedRender&&typeof t.debouncedRender.cancel=="function"&&t.debouncedRender.cancel(),t.isAutoGeneratedNav&&t.paginationContainer&&t.paginationContainer.parentNode&&t.paginationContainer.parentNode.parentNode===t.ctx.carousel&&t.ctx.carousel.removeChild(t.paginationContainer.parentNode),t.paginationContainer=null,t.dotsList=null,t.debouncedRender=null}}class A extends HTMLElement{static effects={carousel:dt,fade:ct};static plugins=[ht,ut,ft,pt,gt,mt];static instanceCount=0;static registerEffect(t){const e=this;if(!t){console.warn("tarot-carousel.registerEffect requires an effect class");return}let n=t.effectName;if(!n){console.warn("tarot-carousel.registerEffect: effect must have a static string id (e.g., effectName)");return}const s=String(n).trim().toLowerCase().replace(/effect$/,"");e.effects[s]&&console.warn(`tarot-carousel: overwriting existing effect '${s}'`),e.effects[s]=t;try{typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("tarot:effect-registered",{detail:{effectName:s}}))}catch{}}static use(t){const e=this;return e.plugins||(e.plugins=[]),e.plugins.push(t),e}#t;#e;#n;#s;#r;#i;#a;#o;#l;#d;#f;#c=[];#h;#u;#p;constructor(){super();const t=this;t.id||(t.id=`tarot-carousel-${A.instanceCount}`),A.instanceCount++,t.#t=new B,t.#e=new tt(t.#t)}async connectedCallback(){const t=this;customElements.get("tarot-slide")||(await customElements.whenDefined("tarot-slide"),await new Promise(requestAnimationFrame)),t.#v(),t.setAttribute("tabindex","0"),t.#n=t.#x();const e=t.#n;t.#a=new H(e),t.#d=new Y(e),t.#i=new j(e),t.#o=new N(e,t.constructor.effects),t.#l=new z(e),t.#r=new U(e),t.#s=new G(e,t.#r),t.#f=new Q(e),t.#b(),t.#o.loadCurrentEffect(),t.#g(),t.constructor.plugins.forEach(i=>{try{const r=new i(e);t.#c.push(r)}catch(r){console.error(`plugin ${i?.name||"(anonymous)"} failed to initialize:`,r)}});const s=t.#e.getOptions().initialIndex??0;t.jumpToSlide(s),t.#f.requestFrame()}#x(){const t=this;return Object.freeze({emitter:t.#t,events:S,store:t.#e,utils:rt,carousel:t,viewport:t.#h,track:t.#u,announcements:t.#p,commands:{goToSlide:(e,n=0)=>t.goToSlide(e,n),jumpToSlide:e=>t.jumpToSlide(e),next:(e=0)=>t.next(e),prev:(e=0)=>t.prev(e),goToPage:(e,n=0)=>t.goToPage(e,n),jumpToPage:e=>t.jumpToPage(e),requestTrackPosition:e=>t.requestTrackPosition(e),getEffect:()=>t.#o.getEffect(),getSlideManager:()=>t.#i,getTrackManager:()=>t.#s,requestFrame:()=>t.#f.requestFrame(0)}})}#v(){const t=this;let e=t.querySelector(":scope tarot-viewport"),n=t.querySelector(":scope tarot-slides");if(!e&&!n)throw new Error("tarot-carousel: missing both <tarot-viewport> and <tarot-slides> elements");if(n&&!e&&(e=document.createElement("tarot-viewport"),n.parentNode.insertBefore(e,n),e.appendChild(n)),e&&!n){for(n=document.createElement("tarot-slides");e.firstChild;)n.appendChild(e.firstChild);e.appendChild(n)}const s=document.createElement("div");s.className="tarot-visually-hidden tarot-announcements",s.id=`tarot-announcements-${t.id}`,s.setAttribute("aria-live","polite"),s.setAttribute("aria-atomic","true"),t.insertBefore(s,t.firstChild),t.#h=e,t.#u=n,t.#p=s}#b(){const t=this,{emitter:e,events:n,store:s}=t.#n;e.on(n.store.optionsChanged,({currentOptions:i})=>{t.#g(i),t.#o.reInit(),t.jumpToSlide(s.getState().renderIndex)}),e.on(n.window.resize,()=>{t.#g(s.getOptions()),t.#o.reInit(),t.jumpToSlide(s.getState().renderIndex)}),e.on(n.slides.click,({index:i})=>{t.#e.setState({selectedIndex:i}),t.#e.getOptions().goToSelectedSlide&&t.goToSlide(i)}),e.on(n.keyboard.arrow,({direction:i})=>{i===-1?t.prev():t.next()})}#g(t){const e=this,n=t||e.#e.getOptions(),s=e.#e.getSlides(),i=ot({viewportEl:e.#h,options:n,slideCount:s.length});e.#e.setWidths(i);const r=lt(e.#n);e.#e.setTransformPoints(r);const o=at({loop:n.loop,slidesPerMove:n.slidesPerMove,slidesPerView:n.slidesPerView,slideCount:s.length});e.#e.setState({pageCount:o})}next(t=0){this.goToPage(this.state.pageIndex+1,t)}prev(t=0){this.goToPage(this.state.pageIndex-1,t)}goToSlide(t,e=0){if(t===void 0)return;const n=this,s=n.#e.getState(),i=n.#e.getSlides(),r=s.slideCount??i.length;if(t<0){const o=n.#e.getOptions();t=o.loop?(t%r+r)%r:0,!o.loop&&!e&&(e=10)}else if(t>=r){const o=n.#e.getOptions();t=o.loop?t%r:r-1,!o.loop&&!e&&(e=-10)}n.#e.setState({renderIndex:t,pageIndex:n.#y(t)}),n.#t.emit(S.animation.requested,{index:t,velocity:e,type:"animate"})}jumpToSlide(t){if(t===void 0)return;const e=this,n=e.#e.getState(),s=e.#e.getSlides(),i=(n.slideCount??s.length)-1;if(t<0||t>i)throw new Error(`slide index ${t} is out of bounds. valid range is 0 to ${i}.`);e.#e.setState({renderIndex:t,pageIndex:e.#y(t)}),e.#t.emit(S.animation.requested,{index:t,velocity:0,type:"jump"})}goToPage(t,e=0){if(t===void 0)return;const n=this,s=n.#e.getState(),i=n.#e.getOptions();t<0?(t=i.loop?(t%s.pageCount+s.pageCount)%s.pageCount:0,!i.loop&&!e&&(e=10)):t>=s.pageCount&&(t=i.loop?0:s.pageCount-1,!i.loop&&!e&&(e=-10));const r=t*(i.slidesPerMove??1);n.goToSlide(r,e)}jumpToPage(t){if(t===void 0)return;const e=this,n=e.#e.getState(),s=e.#e.getOptions();t<0?t=s.loop?(t%n.pageCount+n.pageCount)%n.pageCount:0:t>=n.pageCount&&(t=s.loop?0:n.pageCount-1);const i=t*(s.slidesPerMove??1);e.jumpToSlide(i)}requestTrackPosition(t){const e=this;if(t==null)return;e.#e.getState(),e.#e.getOptions();let n=0;if(typeof t=="string")if(t.endsWith("px"))n=parseFloat(t.replace("px",""));else if(t.endsWith("%")){const s=parseFloat(t.replace("%",""));n=e.#m(s)}else{const s=parseFloat(t);n=e.#m(s)}else if(typeof t=="number")n=e.#m(t);else{console.warn("requestTrackPosition: invalid position type",t);return}e.#t.emit(S.animation.requested,{trackPosition:n,velocity:0,type:"jump"})}#m(t){const e=this,n=e.#e.getState(),s=e.#e.getOptions();if(t=Math.max(0,Math.min(100,t)),n.pageCount<=1)return 0;const r=(n.pageCount-1)*(s.slidesPerMove??1),o=e.#s.getTrackPosForIndex(r);return t/100*o}#y(t){const n=this.#e.getOptions().slidesPerMove??1;return Math.floor(t/n)}get state(){return this.#e.getState()}get slides(){return this.#e.getSlides()}get options(){return this.#e.getOptions()}get viewport(){return this.#h}get track(){return this.#u}getEffects(){return Object.keys(this.constructor.effects)}getUserOptions(){return this.#a.getUserOptions?.()}getIndex(){return this.state.renderIndex}getPage(){return this.state.pageIndex}getSelectedIndex(){return this.state.selectedIndex}setSelectedIndex(t){const e=this,s=e.#e.getSlides().length;if(t<0||t>=s){console.warn(`setSelectedIndex: index ${t} out of bounds (0-${s-1})`);return}e.#e.setState({selectedIndex:t})}getSelectedSlide(){return this.#e.getSlides()[this.state.selectedIndex]}getSlideAtIndex(t){return this.#e.getSlides()[t]}updateOptions(t){this.#a.updateOptions?.(t)}on(t,e){this.#t.on(t,e)}off(t,e){this.#t.off(t,e)}_emit(t,...e){this.#t.emit(t,...e)}destroy(){const t=this;t.#c.forEach(e=>e?.destroy?.()),t.#c.length=0,t.#s?.destroy?.(),t.#o?.destroy?.(),t.#i?.destroy?.(),t.#l?.destroy?.(),t.#d?.destroy?.(),t.#f?.destroy?.(),t.#p?.parentNode&&t.#p.parentNode.removeChild(t.#p),t.#p=null,t.#t?.removeAllListeners?.()}}class xt extends HTMLElement{constructor(){super()}}class vt extends HTMLElement{constructor(){super()}}class yt extends HTMLElement{constructor(){super(),this.index=0,this.renderIndex=0,this.selected=!1,this.trackPosition=0,this.renderPosition=0,this.centerPoint=0}}class bt extends HTMLElement{constructor(){super()}}class St extends HTMLElement{constructor(){super()}}customElements.define("tarot-viewport",xt);customElements.define("tarot-slides",vt);customElements.define("tarot-slide",yt);customElements.define("tarot-content",bt);customElements.define("tarot-slide-icon",St);customElements.define("tarot-carousel",A);/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/class wt{#t=0;#e=0;constructor(t,e){const n=this;n.ctx=t,n.effect=e}init(){this.reInit()}reInit(){const t=this;t.options=t.ctx.store.getOptions();const e=t.ctx.store.getWidths();t.viewportWidth=e.viewport,t.gapWidth=e.gap,t.slideWidth=e.slide,t.slideAndGapWidth=e.slideAndGap,t.trackStartPos=e.paddingLeft,t.trackEndPos=e.viewport-e.track+e.gap-e.paddingRight}setMaxValue(t){this.#e=t}addAmount(t,e=0){const n=this;if(!(!n.options.loop&&(e>n.trackStartPos||e<n.trackEndPos)))return!n.options.loop&&t>0&&e>-1*n.slideWidth?n.#t-=t:!n.options.loop&&t<0&&e<n.trackEndPos+n.slideAndGapWidth?n.#t-=t:n.#t+=t,n.#t<0?n.#t=0:n.#t>n.#e&&(n.#t=n.#e),n.#t}getPercent(){return this.#e>0?this.#t/this.#e:0}snapToValue(t,e){const n=this;if(n.#t===0||n.#t===n.#e)return;const s=Math.abs(t)*1.25;n.#t>n.#e/2?n.addAmount(s,e):n.addAmount(-s,e)}destroy(){const t=this;t.ctx=null,t.effect=null,t.handlers=null}}class T{constructor(t){const e=this,{name:n,color:s,property:i}=t;e.enabled=!0,e.name=n,e.property=i}updateOptions({startPos:t,endPos:e,startValue:n,endValue:s,enabled:i=!0}){Object.assign(this,{enabled:i,startPos:t,endPos:e,startValue:n,endValue:s})}applyTransform(t,e,n){const s=this;if(!s.enabled||e===0)return;function i(u){return Math.round(u*2)/2}n*=-1;const r=i(n+s.startPos),o=i(n+s.endPos),a=i(t.centerPoint||0);let l=0;if(r>o){if(a>=o&&a<=r){const u=r-o;l=(a-o)/u}}else if(a>=r&&a<o){const u=o-r;l=1-(a-r)/u}if(l<=0)return;const d=s.startValue-s.endValue,f=l*d,h=e*(s.endValue+f);t[s.property]+=h}destroy(){const t=this;t.enabled=!1,t.name=null,t.property=null,t.startPos=null,t.endPos=null,t.startValue=null,t.endValue=null}}class It{constructor(t){const e=this;e.ctx=t,e.paddingLeftWidth=0,e.slideMinWidth=0,e.handlers={windowResize:()=>e.reInit(),optionsChanged:()=>e.reInit()},e.leftEndToMin=new T({property:"leftWidthTrimmed"}),e.leftMinToSquished=new T({property:"leftWidthTrimmed"}),e.leftSquishedToFull=new T({property:"leftWidthTrimmed"}),e.leftFullToMin=new T({property:"leftWidthTrimmed"}),e.leftFullToMinEnd=new T({property:"leftWidthTrimmed"}),e.rightEndToMin=new T({name:"right width end",property:"rightWidthTrimmed"}),e.rightMinToSquished=new T({property:"rightWidthTrimmed"}),e.rightSquishedToFull=new T({property:"rightWidthTrimmed"}),e.rightFullToMin=new T({property:"rightWidthTrimmed"}),e.rightFullToMinEnd=new T({property:"rightWidthTrimmed"})}init(){this.bindEvents(),this.reInit()}reInit(){const t=this,e=t.ctx.store.getWidths();t.viewportWidth=e.viewport,t.paddingLeftWidth=e.paddingLeft,t.paddingRightWidth=e.paddingRight,t.slideWidth=e.slide,t.gapWidth=e.gap,t.slideMinWidth=e.slideMin,t.trackWidth=e.track,t.shiftAmount=e.slideMin+e.gap,t.calculateTransformPoints()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.window.resize,t.handlers.windowResize),t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged)}calculateTransformPoints(){const t=this,e=t.slideWidth/2,n=t.slideWidth,s=t.slideWidth+t.gapWidth,i=t.slideMinWidth,r=(n-i)*-1,o=(t.gapWidth+i)*-1,a=e+t.paddingLeftWidth,l=a-s,d=a-n+i,f=a+s;t.leftEndToMin.updateOptions({startPos:l-t.trackWidth,endPos:l,startValue:r,endValue:r}),t.leftMinToSquished.updateOptions({startPos:l,endPos:a,startValue:r,endValue:o}),t.leftSquishedToFull.updateOptions({startPos:a,endPos:f,startValue:o,endValue:0}),t.leftFullToMin.updateOptions({startPos:d,endPos:a,startValue:r,endValue:0}),t.leftFullToMinEnd.updateOptions({startPos:d-t.trackWidth,endPos:d,startValue:r,endValue:r});const h=t.viewportWidth-e-t.paddingRightWidth,u=h-s,m=h+s,g=m+t.trackWidth,y=h+n-i;t.shiftAmount*-1,t.rightSquishedToFull.updateOptions({startPos:h,endPos:u,startValue:o,endValue:0}),t.rightMinToSquished.updateOptions({startPos:m,endPos:h,startValue:r,endValue:o}),t.rightEndToMin.updateOptions({startPos:g,endPos:m,startValue:r,endValue:r}),t.rightFullToMin.updateOptions({startPos:y,endPos:h,startValue:r,endValue:0}),t.rightFullToMinEnd.updateOptions({startPos:y+t.trackWidth,endPos:y,startValue:r,endValue:r})}applyTransforms(t,e,n,s){const i=this;i.leftEndToMin.applyTransform(t,n,e),i.leftMinToSquished.applyTransform(t,n,e),i.leftSquishedToFull.applyTransform(t,n,e),i.leftFullToMin.applyTransform(t,1-n,e),i.leftFullToMinEnd.applyTransform(t,1-n,e),i.rightEndToMin.applyTransform(t,1-n,e),i.rightMinToSquished.applyTransform(t,1-n,e),i.rightSquishedToFull.applyTransform(t,1-n,e),i.rightFullToMin.applyTransform(t,n,e),i.rightFullToMinEnd.applyTransform(t,n,e),t.leftWidthTrimmed<0&&(t.leftWidthTrimmed=Math.abs(t.leftWidthTrimmed)),t.rightWidthTrimmed<0&&(t.rightWidthTrimmed=Math.abs(t.rightWidthTrimmed))}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.window.resize,t.handlers.windowResize),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.leftEndToMin?.destroy(),t.leftMinToSquished?.destroy(),t.leftSquishedToFull?.destroy(),t.leftFullToMin?.destroy(),t.leftFullToMinEnd?.destroy(),t.rightEndToMin?.destroy(),t.rightMinToSquished?.destroy(),t.rightSquishedToFull?.destroy(),t.rightFullToMin?.destroy(),t.rightFullToMinEnd?.destroy(),t.ctx=null,t.handlers=null}}class Ct extends P{static effectName="ripple";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:2,right:2}};constructor(t){super(t);const e=this;e.ctx=t,e.rippleWindow=new wt(t,e),e.rippleTransforms=new It(t,e),e.init()}init(){this.rippleWindow.init(),this.rippleTransforms.init()}reInit(){this.rippleWindow.reInit(),this.rippleTransforms.reInit()}render(t,e){const n=this,{slides:s,widths:i,animation:r}=t;n.rippleWindow.setMaxValue(i.slide-i.slideMin),n.renderTrackWidth(i.track),n.renderTrackPosition(r),n.renderSlideWidth(i.slide);const o=r.trackPosition,a=r.trackDelta||0,l=r.type||"jump",d=r.progress||1;(l==="animate"||l==="drag")&&d<=1&&n.rippleWindow.addAmount(a,o),(l==="settle"||l==="animate"&&d>.75)&&n.rippleWindow.snapToValue(a,o);const f=n.rippleWindow.getPercent();let h=0,u;for(let g=0,y=s.length;g<y;++g){u=s[g],u.rightWidthTrimmed=0,u.leftWidthTrimmed=0,n.rippleTransforms.applyTransforms(u,o,f,t);const x=i.slide-u.rightWidthTrimmed-u.leftWidthTrimmed;u.style.transition="none",u.style.width=`${x}px`,u.renderPosition=u.trackPosition-h,h+=u.rightWidthTrimmed}let m=0;for(let g=s.length-1;g>=0;--g)u=s[g],m+=u.leftWidthTrimmed,u.renderPosition+=m,u.style.transform=`translateX(${u.renderPosition}px)`}destroy(){super.destroy();const t=this;t.rippleWindow?.destroy(),t.rippleTransforms?.destroy();const e=t.ctx.store.getSlides()||[];for(let n=0,s=e.length;n<s;++n){const i=e[n];!i||!i.style||(i.removeAttribute("aria-hidden"),i.style.width="",i.style.transform="",i.style.transition="")}t.rippleWindow=null,t.rippleTransforms=null}}typeof A<"u"&&A.registerEffect(Ct);/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/class Tt extends P{static effectName="butterfly";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:2,right:2}};constructor(t){super(t);const e=this;e.stepsLeft=3,e.stepsRight=3,e.L1Scale=.85,e.L2Scale=.7,e.L3Scale=.7,e.L1Angle=0,e.L2Angle=0,e.L3Angle=0,e.slideWidth=0,e.gapWidth=0,e.slideAndGapWidth=0,e.init()}init(){super.init()}reInit(){super.reInit()}calculateWidths(t){const e=this;e.viewportWidth=t.viewport,e.slideWidth=e.viewportWidth/2,e.gapWidth=t.gap,e.slideAndGapWidth=e.slideWidth+e.gapWidth,e.ctx.viewport.style.setProperty("--tarot-slide-width",`${e.slideWidth}px`);const n=e.slideWidth/2-e.gapWidth*2,s=e.slideWidth*e.L1Scale,i=e.slideWidth*e.L2Scale,r=e.slideWidth*e.L3Scale,o=n*.6,a=n*.4,l=n*.4;e.L1Angle=e.getAngleFromFinalWidth(s,o),e.L2Angle=e.getAngleFromFinalWidth(i,a),e.L3Angle=e.getAngleFromFinalWidth(r,l)}getRotatedWidth(t,e,n=1500){const s=t*Math.PI/180;return e*Math.cos(s)/(1+e*Math.sin(s)/n)}getAngleFromFinalWidth(t,e,n=1500){if(e>=t)return 0;if(e<=0||t<=0||n<=0)return null;const s=t*e/n,i=t*t+s*s,r=2*e*s,o=e*e-t*t,a=r*r-4*i*o;if(a<0)return null;const l=Math.sqrt(a),d=(-r+l)/(2*i),f=(-r-l)/(2*i),h=d>=0&&d<=1?d:f>=0&&f<=1?f:null;return h===null?null:Math.asin(h)*180/Math.PI}applyL1(t,e){const n=this.L1Scale+(1-this.L1Scale)*e,s=this.L1Angle*(1-e);t.style.transformOrigin="left center",t._scaleTransform=`scale(${n})`,t._rotateTransform=`rotateY(${s}deg)`,t.leftWidthTrimmed=this.slideWidth-this.getRotatedWidth(s,this.slideWidth*n)}applyL2(t,e){const n=1-e,s=this.L1Scale+(this.L2Scale-this.L1Scale)*n,i=this.L1Angle+(this.L2Angle-this.L1Angle)*n;t.style.transformOrigin="left center",t._scaleTransform=`scale(${s})`,t._rotateTransform=`rotateY(${i}deg)`,t.leftWidthTrimmed=this.slideWidth-this.getRotatedWidth(i,this.slideWidth*s)}applyL3(t,e){const n=1-e,s=this.L2Scale+(this.L3Scale-this.L2Scale)*n,i=this.L2Angle+(this.L3Angle-this.L2Angle)*n;t.style.transformOrigin="left center",t._scaleTransform=`scale(${s})`,t._rotateTransform=`rotateY(${i}deg)`,t.leftWidthTrimmed=this.slideWidth-this.getRotatedWidth(i,this.slideWidth*s)}applyR1(t,e){const n=1+(this.L1Scale-1)*e,s=this.L1Angle*e;t.style.transformOrigin="right center",t._scaleTransform=`scale(${n})`,t._rotateTransform=`rotateY(-${s}deg)`,t.rightWidthTrimmed=this.slideWidth-this.getRotatedWidth(s,this.slideWidth*n)}applyR2(t,e){const n=this.L1Scale+(this.L2Scale-this.L1Scale)*e,s=this.L1Angle+(this.L2Angle-this.L1Angle)*e;t.style.transformOrigin="right center",t._scaleTransform=`scale(${n})`,t._rotateTransform=`rotateY(-${s}deg)`,t.rightWidthTrimmed=this.slideWidth-this.getRotatedWidth(s,this.slideWidth*n)}applyR3(t,e){const n=this.L2Scale+(this.L3Scale-this.L2Scale)*e,s=this.L2Angle+(this.L3Angle-this.L2Angle)*e;t.style.transformOrigin="right center",t._scaleTransform=`scale(${n})`,t._rotateTransform=`rotateY(-${s}deg)`,t.rightWidthTrimmed=this.slideWidth-this.getRotatedWidth(s,this.slideWidth*n)}render(t,e){const n=this,{slides:s,widths:i,animation:r}=t;n.calculateWidths(i),n.renderSlideWidth(n.slideWidth),n.renderTrackPosition(r);const o=[...s];for(let d=0,f=o.length;d<f;d++){const h=o[d];h.leftWidthTrimmed=0,h.rightWidthTrimmed=0,h._scaleTransform="",h._rotateTransform="";const u=e.isSlideInRange(h,"CL1","L1");if(u.isInRange){n.applyL1(h,u.percent);continue}const m=e.isSlideInRange(h,"L1","L2");if(m.isInRange){n.applyL2(h,m.percent);continue}const g=e.isSlideInRange(h,"L2","L3");if(g.isInRange){n.applyL3(h,g.percent);continue}const y=e.isSlideInRange(h,"CR1","R1");if(y.isInRange){n.applyR1(h,y.percent);continue}const x=e.isSlideInRange(h,"R1","R2");if(x.isInRange){n.applyR2(h,x.percent);continue}const v=e.isSlideInRange(h,"R2","R3");if(v.isInRange){n.applyR3(h,v.percent);continue}}let a=0;for(let d=0,f=o.length;d<f;d++){const h=o[d];a+=h.rightWidthTrimmed||0,h.renderPosition=h.trackPosition-a}let l=0;for(let d=o.length-1;d>=0;d--){const f=o[d];l+=f.leftWidthTrimmed||0,f.renderPosition+=l,f.style.transform=`translateX(${f.renderPosition}px) perspective(1500px) ${f._scaleTransform||""} ${f._rotateTransform||""}`}}destroy(){const t=this;t.ctx?.viewport?.style&&t.ctx.viewport.style.removeProperty("--tarot-slide-width"),super.destroy()}}typeof A<"u"&&A.registerEffect(Tt);/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/class At extends P{static effectName="peacock";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1,loopBuffer:{left:2,right:2}};constructor(t){super(t);const e=this;e.viewportWidth=0,e.percentMargin=.18,e.leftMargin=0,e.rightMargin=0,e.availableWidth=0,e.featherRotation=8,e.featherScale=.86,e.init()}init(){super.init()}reInit(){super.reInit()}calculateLayout(){const t=this;t.leftMargin=t.viewportWidth*t.percentMargin,t.rightMargin=t.viewportWidth*t.percentMargin,t.availableWidth=t.viewportWidth-t.leftMargin-t.rightMargin,t.availableWidth<200&&(t.availableWidth=200,t.leftMargin=(t.viewportWidth-t.availableWidth)/2,t.rightMargin=t.leftMargin)}render(t,e){const n=this,{slides:s,widths:i,animation:r}=t;n.viewportWidth=i.viewport,n.calculateLayout(),n.gap=i.gap||0,n.featherWidth=(n.availableWidth-n.gap)/2,n.renderSlideWidth(n.availableWidth);for(let o=0,a=s.length;o<a;o++){const l=s[o],d=e.isSlideInRange(l,"L2","L3");if(d.isInRange){n.applyLeftFeather3(l,d.percent);continue}if(e.isSlideInRange(l,"L3","L+").isInRange){n.applyHiddenState(l);continue}const h=e.isSlideInRange(l,"L1","L2");if(h.isInRange){n.applyLeftFeather2(l,h.percent);continue}const u=e.isSlideInRange(l,"CL1","L1");if(u.isInRange){if(u.percent>=.5){n.applyLeftFeather0(l,(u.percent-.5)/.5);continue}n.applyLeftFeather1(l,u.percent/.5);continue}const m=e.isSlideInRange(l,"CL1","CR1");if(m.isInRange){n.applyCenterSlide(l,m.percent);continue}const g=e.isSlideInRange(l,"CR1","R1");if(g.isInRange){if(g.percent<.5){n.applyRightFeather0(l,g.percent/.5);continue}n.applyRightFeather1(l,(g.percent-.5)/.5);continue}const y=e.isSlideInRange(l,"R1","R2");if(y.isInRange){n.applyRightFeather2(l,y.percent);continue}const x=e.isSlideInRange(l,"R2","R3");if(x.isInRange){n.applyRightFeather3(l,x.percent);continue}if(e.isSlideInRange(l,"R3","R+").isInRange){n.applyHiddenState(l);continue}n.applyHiddenState(l)}}applyLeftFeather3(t,e){const n=this.leftMargin,s=this.featherWidth,i=this.featherRotation+this.featherRotation*this.featherScale,r=this.featherRotation*.5,o=i+r,a=-(o+(i-o)*e),l=this.featherScale*this.featherScale*this.featherScale,d=this.featherScale*this.featherScale*.9,f=l+(d-l)*e,h=e>.5?1:1*(e/.5);t.style.transform=`translate3d(${n}px, 0px, 0px) rotate(${a}deg) scale(${f})`,t.style.transformOrigin="left bottom",t.style.zIndex=0,t.style.opacity=h,t.style.display="block",t.style.width=`${s}px`}applyLeftFeather2(t,e){const n=this.leftMargin,s=this.featherWidth,i=this.featherRotation+this.featherRotation*this.featherScale,r=this.featherRotation,o=-(i+(r-i)*e),a=this.featherScale*this.featherScale*.9,l=this.featherScale,d=a+(l-a)*e;t.style.transform=`translate3d(${n}px, 0px, 0px) rotate(${o}deg) scale(${d})`,t.style.transformOrigin="left bottom",t.style.zIndex=1,t.style.opacity=1,t.style.display="block",t.style.width=`${s}px`}applyLeftFeather1(t,e){const n=this.leftMargin,s=this.featherWidth,i=-this.featherRotation*(1-e),r=this.featherScale+(1-this.featherScale)*e;t.style.transform=`translate3d(${n}px, 0px, 0px) rotate(${i}deg) scale(${r})`,t.style.transformOrigin="left bottom",t.style.zIndex=2,t.style.opacity=1,t.style.display="block",t.style.width=`${s}px`}applyLeftFeather0(t,e){const n=this.leftMargin,s=this.featherWidth+(this.availableWidth-this.featherWidth)*e;t.style.transform=`translate3d(${n}px, 0px, 0px)`,t.style.transformOrigin="left bottom",t.style.zIndex=3,t.style.opacity=1,t.style.display="block",t.style.width=`${s}px`}applyCenterSlide(t,e){const n=this.leftMargin;t.style.transform=`translate3d(${n}px, 0px, 0px)`,t.style.transformOrigin="center center",t.style.zIndex=3,t.style.opacity=1,t.style.display="block",t.style.width=`${this.availableWidth}px`}applyRightFeather0(t,e){const n=this.availableWidth+(this.featherWidth-this.availableWidth)*e,s=this.leftMargin+(this.availableWidth-n);t.style.transform=`translate3d(${s}px, 0px, 0px)`,t.style.transformOrigin="right bottom",t.style.zIndex=3,t.style.opacity=1,t.style.display="block",t.style.width=`${n}px`}applyRightFeather1(t,e){const n=this.featherWidth,s=this.leftMargin+(this.availableWidth-n),i=this.featherRotation*e,r=1+(this.featherScale-1)*e;t.style.transform=`translate3d(${s}px, 0px, 0px) rotate(${i}deg) scale(${r})`,t.style.transformOrigin="right bottom",t.style.zIndex=2,t.style.opacity=1,t.style.display="block",t.style.width=`${n}px`}applyRightFeather2(t,e){const n=this.featherWidth,s=this.leftMargin+(this.availableWidth-n),i=this.featherRotation,r=this.featherRotation+this.featherRotation*this.featherScale,o=i+(r-i)*e,a=this.featherScale,l=this.featherScale*this.featherScale*.9,d=a+(l-a)*e;t.style.transform=`translate3d(${s}px, 0px, 0px) rotate(${o}deg) scale(${d})`,t.style.transformOrigin="right bottom",t.style.zIndex=1,t.style.opacity=1,t.style.display="block",t.style.width=`${n}px`}applyRightFeather3(t,e){const n=this.featherWidth,s=this.leftMargin+(this.availableWidth-n),i=this.featherRotation+this.featherRotation*this.featherScale,r=this.featherRotation*.5,o=i+r,a=i+(o-i)*e,l=this.featherScale*this.featherScale*.9,d=l*this.featherScale,f=l+(d-l)*e,h=e<.5?1:1*(1-(e-.5)/.5);t.style.transform=`translate3d(${s}px, 0px, 0px) rotate(${a}deg) scale(${f})`,t.style.transformOrigin="right bottom",t.style.zIndex=0,t.style.opacity=h,t.style.display="block",t.style.width=`${n}px`}applyHiddenState(t){t.style.opacity=0,t.style.display="none",t.style.zIndex=0,t.style.transform="translate3d(0px, 0px, 0px)",t.style.transformOrigin="center center",t.style.width=""}destroy(){super.destroy();const e=this.ctx.store.getSlides();for(let n=0;n<e.length;n++){const s=e[n];!s||!s.style||(s.style.transform="",s.style.transformOrigin="",s.style.opacity="",s.style.zIndex="",s.style.display="",s.style.width="")}}}typeof A<"u"&&A.registerEffect(At);
