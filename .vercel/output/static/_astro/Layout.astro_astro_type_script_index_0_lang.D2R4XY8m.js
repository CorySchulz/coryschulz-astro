var ft=(E,g)=>()=>(g||E((g={exports:{}}).exports,g),g.exports);var vt=ft((J,_)=>{function mt(E,g){let T=0;return function(...o){const l=Date.now();l-T>=g&&(T=l,E.apply(this,o))}}class tt extends HTMLElement{#t=null;#e=0;#n=null;#i=null;#r=!1;#s=null;#a=null;#o=-1;static#l=!1;static#d(){if(tt.#l)return;const g=document.createElement("style");g.textContent=`scroll-progress {
	display: block;
	--scroll-progress: 0;
	will-change: transform;
	transform-style: preserve-3d;
	backface-visibility: hidden; }`,document.head.appendChild(g),tt.#l=!0}static get observedAttributes(){return["playhead-element-start","playhead-viewport-start","playhead-element-end","playhead-viewport-end"]}constructor(){super(),tt.#d()}connectedCallback(){this.#e=window.innerHeight,this.#p(),this.#f(),this.#b(),this.#v()}disconnectedCallback(){this.#x(),this.#C(),this.#m()}attributeChangedCallback(g,T,o){T!==o&&this.#t&&this.#p()}#p(){const g=this.getBoundingClientRect();this.#t={elementStartAnchor:this.getAttribute("playhead-element-start")||"top",viewportStartAnchor:this.getAttribute("playhead-viewport-start")||"bottom",elementEndAnchor:this.getAttribute("playhead-element-end")||"bottom",viewportEndAnchor:this.getAttribute("playhead-viewport-end")||"top",elementStartPosition:0,elementEndPosition:0,viewportStartPosition:0,viewportEndPosition:0,totalDistance:0},this.#c(g)}#c(g){g||(g=this.getBoundingClientRect()),this.#t&&(this.#t.elementStartPosition=this.#h(this.#t.elementStartAnchor,g),this.#t.elementEndPosition=this.#h(this.#t.elementEndAnchor,g),this.#t.viewportStartPosition=this.#u(this.#t.viewportStartAnchor,this.#e),this.#t.viewportEndPosition=this.#u(this.#t.viewportEndAnchor,this.#e),this.#t.totalDistance=this.#t.elementEndPosition-this.#t.viewportEndPosition-(this.#t.elementStartPosition-this.#t.viewportStartPosition),this.#t.totalDistance<0&&(console.warn("<scroll-progress> totalDistance negative, check anchors"),this.#t.totalDistance=Math.abs(this.#t.totalDistance)))}#h(g,T){return g==="top"?T.top:g==="center"?T.top+T.height/2:T.bottom}#u(g,T){return g==="top"?0:g==="center"?T/2:T}#g(g,T,o){return g<T?T:g>o?o:g}#v(){const g=()=>{this.#r&&this.#y(),this.#s=requestAnimationFrame(g)};this.#s=requestAnimationFrame(g)}#x(){this.#s&&(cancelAnimationFrame(this.#s),this.#s=null)}#y(){if(!this.#t)return;const g=this.getBoundingClientRect(),T=this.#h(this.#t.elementStartAnchor,g),o=this.#t.viewportStartPosition-T,l=this.#t.totalDistance===0?0:this.#g(o/this.#t.totalDistance,0,1);Math.abs(l-this.#o)>.001&&(this.#o=l,this.style.setProperty("--scroll-progress",l),this.dispatchEvent(new CustomEvent("scroll-progress:update",{detail:{progress:l},bubbles:!0})))}#f(){if("ResizeObserver"in window&&(this.#n=new ResizeObserver(g=>{g.forEach(T=>{T.target===this&&this.#c(T.contentRect)})}),this.#n.observe(this)),"IntersectionObserver"in window){const g={rootMargin:"50% 0px 50% 0px"};this.#i=new IntersectionObserver(T=>{T.forEach(o=>{o.target===this&&(this.#r=o.isIntersecting)})},g),this.#i.observe(this)}else this.#r=!0}#m(){this.#n&&(this.#n.disconnect(),this.#n=null),this.#i&&(this.#i.disconnect(),this.#i=null)}#b(){const g=()=>{this.#e=window.innerHeight,this.#t&&(this.#t.viewportStartPosition=this.#u(this.#t.viewportStartAnchor,this.#e),this.#t.viewportEndPosition=this.#u(this.#t.viewportEndAnchor,this.#e),this.#t.totalDistance=this.#t.elementEndPosition-this.#t.viewportEndPosition-(this.#t.elementStartPosition-this.#t.viewportStartPosition),this.#c())};this.#a=mt(g,50),window.addEventListener("resize",this.#a)}#C(){this.#a&&(window.removeEventListener("resize",this.#a),this.#a=null)}getProgress(){return parseFloat(this.style.getPropertyValue("--scroll-progress")||0)}update(){this.#t&&this.#c()}pause(){this.#x()}resume(){this.#s||this.#v()}}customElements.get("scroll-progress")||customElements.define("scroll-progress",tt);/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/(function(E,g){typeof J=="object"&&typeof _<"u"?g(J):typeof define=="function"&&define.amd?define(["exports"],g):g((E=typeof globalThis<"u"?globalThis:E||self).Tarot={})})(void 0,function(E){class g{#t;constructor(){this.#t=new Map}on(t,e){if(typeof e!="function")throw new TypeError("Listener must be a function");const n=this.#t.get(t)||[];return n.includes(e)||n.push(e),this.#t.set(t,n),this}off(t,e){const n=this.#t.get(t);if(!n)return this;const i=n.indexOf(e);return i!==-1&&(n.splice(i,1),n.length===0?this.#t.delete(t):this.#t.set(t,n)),this}emit(t,...e){const n=this.#t.get(t);if(!n||n.length===0)return!1;for(let i=0,s=n.length;i<s;++i)try{n[i]!==void 0&&n[i].apply(this,e)}catch(a){console.error(`Error in listener for event '${t}':`,a)}return!0}destroy(){this.#t.clear()}}const T=0,o=-1,l=1;class c{constructor(t){const e=this;e.ctx=t,e.track=t.track,e.dragThreshold=3,e.drag={isDragging:!1,start:0,current:0,prev:0,delta:0,velocity:0,dragThresholdMet:!1,scrollWheelDelta:0,scrollWheelActive:!1},e.debouncedScrollEnd=e.ctx.utils.debounce(n=>{e.drag.scrollWheelDelta=0,e.handleScrollEnd(n)},80),e.handlers={click:n=>e.handleClick(n),pointerdown:n=>e.handleDragStart(n),pointermove:n=>e.handleDragMove(n),pointerup:n=>e.handleDragEnd(n),pointerleave:n=>e.handleDragEnd(n),pointercancel:n=>e.handleDragEnd(n),touchstart:n=>e.handleTouchStart(n),touchmove:n=>e.handleTouchMove(n),dblclick:n=>(n.preventDefault(),n.stopPropagation(),!1),wheel:n=>e.handleSidewaysScroll(n)},e.bindUI()}bindUI(){const t=this,e=t.track;e.addEventListener("click",t.handlers.click),e.addEventListener("pointerdown",t.handlers.pointerdown,{passive:!1}),e.addEventListener("pointermove",t.handlers.pointermove,{passive:!1}),e.addEventListener("pointerup",t.handlers.pointerup,{passive:!1}),e.addEventListener("pointerleave",t.handlers.pointerleave,{passive:!1}),e.addEventListener("pointercancel",t.handlers.pointercancel,{passive:!1}),e.addEventListener("touchstart",t.handlers.touchstart,{passive:!1}),e.addEventListener("touchmove",t.handlers.touchmove,{passive:!1}),e.addEventListener("dblclick",t.handlers.dblclick)}handleSidewaysScroll(t){const e=this;if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){t.preventDefault();const n=e.drag;n.delta===0&&e.ctx.emitter.emit(e.ctx.events.drag.start,{event:t,drag:n}),n.delta+=-1*t.deltaX,e.ctx.emitter.emit(e.ctx.events.drag.move,{event:t,drag:n}),e.debouncedScrollEnd(t)}}handleScrollEnd(t){const e=this,n=e.drag;e.ctx.emitter.emit(e.ctx.events.drag.end,{event:t,drag:n}),n.delta=0}handleClick(t){const e=this;if(e.drag.dragThresholdMet)return void t.preventDefault();const n=t.target.closest("tarot-slide");if(n){const i=parseInt(n.getAttribute("index"))||0,s=n.renderIndex;e.ctx.emitter.emit(e.ctx.events.slides.click,{index:i,renderIndex:s,event:t})}}handleTouchStart(t){const e=this;t.touches.length>1&&(e.drag.isDragging=!1)}handleTouchMove(t){const e=this,n=e.drag;if(n.isDragging){if(n.touchDirection===l)return void t.preventDefault();if(1.15*Math.abs(n.startX-t.touches[0].screenX)>Math.abs(n.startY-t.touches[0].screenY))return t.preventDefault(),void(n.touchDirection=l);n.isDragging=!1,n.touchDirection=o,n.delta=0,e.ctx.emitter.emit(e.ctx.events.drag.end,{event:t,drag:n})}}handleDragStart(t){t.preventDefault();const e=this,n=e.drag;n.hasTouch=t.pointerType==="touch",n.touchDirection=T,n.isDragging=!0,n.dragThresholdMet=!1,n.startX=t.screenX,n.startY=t.screenY,n.velocity=0,n.delta=0,e.ctx.emitter.emit(e.ctx.events.drag.start,{event:t,drag:n})}handleDragMove(t){const e=this,n=e.drag;if(!n.isDragging)return;const i=Math.abs(n.startX-t.screenX),s=Math.abs(n.startY-t.screenY);return n.touchDirection===T&&1.15*i>s&&(n.touchDirection=l),n.hasTouch&&n.touchDirection!=l||(t.preventDefault(),n.prev=n.current,n.current=t.screenX,n.delta=n.current-n.startX,n.velocity=n.current-n.prev,!n.dragThresholdMet&&Math.abs(n.delta)>e.dragThreshold&&(n.dragThresholdMet=!0),!n.dragThresholdMet)?void 0:(e.ctx.emitter.emit(e.ctx.events.drag.move,{event:t,drag:n}),!1)}handleDragEnd(t){const e=this,n=e.drag;n.isDragging&&(t.preventDefault(),n.isDragging=!1,e.ctx.emitter.emit(e.ctx.events.drag.end,{event:t,drag:n}),n.delta=0)}destroy(){const t=this,e=t.track;t.debouncedScrollEnd&&t.debouncedScrollEnd.cancel(),e.removeEventListener("click",t.handlers.click),e.removeEventListener("pointerdown",t.handlers.pointerdown),e.removeEventListener("pointermove",t.handlers.pointermove),e.removeEventListener("pointerup",t.handlers.pointerup),e.removeEventListener("pointerleave",t.handlers.pointerleave),e.removeEventListener("pointercancel",t.handlers.pointercancel),e.removeEventListener("touchstart",t.handlers.touchstart),e.removeEventListener("touchmove",t.handlers.touchmove),e.removeEventListener("dblclick",t.handlers.dblclick),e.removeEventListener("wheel",t.handlers.wheel)}}class r{static defaultRules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:0,right:0}};#t;#e;#n=null;constructor(t,e){const n=this;n.#t=t,n.#e=e,n.handlers={optionsChanged:({currentOptions:i})=>{const s=n.#n?.constructor?.effectName||n.#n?.constructor?.name;i.effect!==s&&n.loadEffect(i.effect)}},n.bindEvents(),n.handlers.effectRegistered=i=>{try{const s=i?.detail?.effectName,a=String(n.#t.store.getOptions().effect||"").toLowerCase();s&&a&&s===a&&n.loadEffect(a)}catch{}},typeof window<"u"&&typeof window.addEventListener=="function"&&window.addEventListener("tarot:effect-registered",n.handlers.effectRegistered)}init(){}reInit(){this.loadCurrentEffect()}bindEvents(){this.#t.emitter.on(this.#t.events.store.optionsChanged,this.handlers.optionsChanged)}loadCurrentEffect(){const t=this.#t.store.getOptions();this.loadEffect(t.effect)}loadEffect(t){const e=this;if(!t)return void console.error("Error: no effect detected or could not load effect ",t);const n=e.#e[t];if(!n)return console.warn(`Effect '${t}' not registered yet; falling back to 'carousel' until it loads`),void(t!=="carousel"&&this.loadEffect("carousel"));const i=e.#n,s=i?.constructor?.effectName||i?.constructor?.name;e.#n&&(e.#n.destroy(),e.#t.emitter.emit(e.#t.events.effect.destroyed,{effectName:s})),e.#n=new n(e.#t),e.#t.carousel.setAttribute("effect",t),e.#t.emitter.emit(e.#t.events.effect.loaded,{effect:e.#n,effectName:t}),e.#t.emitter.emit(e.#t.events.effect.changed,{previousEffect:i,currentEffect:e.#n,effectName:t}),e.#n.render&&e.#t.store.getState()}getRules(){const t=this;return t.#n&&t.#n.rules?t.#n.rules:t.constructor.defaultRules}getEffect(){return this.#n}getEffectName(){return this.#n&&(this.#n.constructor?.effectName||this.#n.constructor?.name)||null}hasEffect(){return this.#n!==null}destroy(){const t=this;if(typeof window<"u"&&typeof window.removeEventListener=="function"&&t.handlers?.effectRegistered&&window.removeEventListener("tarot:effect-registered",t.handlers.effectRegistered),t.#t.emitter.off(t.#t.events.store.optionsChanged,t.handlers.optionsChanged),t.#n){const e=t.getEffectName();t.#n.destroy(),t.#t.emitter.emit(t.#t.events.effect.destroyed,{effectName:e}),t.#n=null}}}const d=Object.freeze({carousel:Object.freeze({init:"carousel:init",ready:"carousel:ready",reinit:"carousel:reinit",destroy:"carousel:destroy",error:"carousel:error",beforeTransition:"carousel:before-transition",afterTransition:"carousel:after-transition",hasFocus:"carousel:has-focus",lostFocus:"carousel:lost-focus"}),store:Object.freeze({optionsChanged:"options:changed",stateChanged:"state:changed",layoutChanged:"layout:changed",slidesChanged:"slides:changed",pageIndexChanged:"page-index:changed",pageCountChanged:"page-count:changed",selectedIndexChanged:"selected-index:changed",renderIndexChanged:"render-index:changed",transformPointsChanged:"transform-points:changed",changedDirty:"store:changed-dirty",changedClean:"store:changed-clean"}),drag:Object.freeze({start:"drag:start",move:"drag:move",end:"drag:end",cancel:"drag:cancel"}),frame:Object.freeze({beforeRender:"frame:before-render",afterRender:"frame:after-render"}),slides:Object.freeze({click:"slides:click",visibleChanged:"slides:visible-changed"}),window:Object.freeze({resize:"window:resize",orientationChange:"window:orientation-change",visibilityChange:"window:visibility-change",hasFocus:"window:has-focus",lostFocus:"window:lost-focus"}),track:Object.freeze({looped:"track:looped",shifted:"track:shifted",requestFrame:"track:request-frame",positionChanged:"track:position-changed"}),effect:Object.freeze({changed:"effect:changed",loaded:"effect:loaded",destroyed:"effect:destroyed"}),animation:Object.freeze({requested:"animation:requested",started:"animation:started",completed:"animation:completed"}),engine:Object.freeze({positionChanged:"engine:position-changed",finished:"engine:finished"}),user:Object.freeze({interacted:"user:interacted"}),keyboard:Object.freeze({arrow:"keyboard:arrow"})});class u{constructor(t){const e=this;e.ctx=t,e.defaultOptions={asNavFor:!1,animation:{attraction:.026,friction:.24,speed:5,velocityBoost:1.1},autoplay:{interval:0,stopAfterInteraction:!0,afterInteraction:"pause"},breakpoints:{},breakpointElement:"window",centerSelectedSlide:!1,dragThreshold:40,filterClass:"",focusOnSelect:!1,initialIndex:0,loop:!1,effect:"carousel",gap:0,paddingLeft:0,paddingRight:0,slideMinWidth:"50px",slidesPerView:1,slidesPerMove:1,navigation:{showButtons:!0,showPrevButton:!0,showNextButton:!0,prevButtonSelector:!1,nextButtonSelector:!1,smartButtons:!1,showPagination:!0,paginationSelector:!1,showScrollbar:!1,scrollbarSelector:!1,scrollbarPosition:"bottom",scrollbarSize:"normal",scrollbarAutoHide:!1,scrollbarShowSnapPoints:!0,scrollbarClickToNavigate:!0,scrollbarDragToNavigate:!0},goToSelectedSlide:!1,syncWith:!1,announcements:!0},e.userOptions={},e.userOptionsElement=e.ctx.carousel.querySelector(":scope > [data-tarot-options]"),e.currentBreakpoint={minWidth:0,options:{}},e.prevBreakpoint={minWidth:0,options:{}},e.checkBreakpointsDebounced=e.ctx.utils.debounce(()=>e.checkBreakpoints(),4),e.handlers={onWindowResize:e.checkBreakpointsDebounced,onOrientationChange:e.checkBreakpointsDebounced},e.init()}init(){const t=this;t.bindEvents(),t.loadUserOptions(),t.currentBreakpoint=t.getCurrentBreakpoint(),t.applyMergedOptions()}reInit(){this.checkBreakpoints()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.window.resize,t.handlers.onWindowResize),t.ctx.emitter.on(t.ctx.events.window.orientationChange,t.handlers.onOrientationChange)}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.window.resize,t.handlers.onWindowResize),t.ctx.emitter.off(t.ctx.events.window.orientationChange,t.handlers.onOrientationChange),t.checkBreakpointsDebounced&&typeof t.checkBreakpointsDebounced.cancel=="function"&&t.checkBreakpointsDebounced.cancel()}setUserOptions(t={}){const e=this;return t.slidesPerMove<1&&(t.slidesPerMove=1),t.slidesPerView<1&&(t.slidesPerView=1),e.userOptions=e.ctx.utils.deepMerge(e.userOptions,t),e.currentBreakpoint=e.getCurrentBreakpoint(),e.applyMergedOptions(),e}loadUserOptions(){const t=this;if(!t.userOptionsElement)return;let e=t.userOptionsElement.textContent||"";e=e.replace(/\n/g,"").trim(),e=e.replace(/(\w+)\s*:/g,'"$1":');try{t.userOptions=JSON.parse(e)}catch(n){console.error("tarot options: failed to parse data-tarot-options json",n)}}getCurrentBreakpoint(){const t=this,{breakpoints:e={},...n}=t.userOptions;let i;if(i=t.ctx.utils.deepMerge(t.defaultOptions,n).breakpointElement==="viewport"&&t.ctx.viewport?t.ctx.viewport.offsetWidth:window.innerWidth,!e||typeof e!="object")return{minWidth:0,options:{}};const s=Object.keys(e).map(Number).filter(h=>!Number.isNaN(h)).sort((h,p)=>h-p);let a=0;for(let h=0;h<s.length;h++){const p=s[h];if(!(i>=p))break;a=p}return{minWidth:a,options:e[a]||{}}}checkBreakpoints(){const t=this,e=t.getCurrentBreakpoint();e.minWidth!==t.currentBreakpoint.minWidth&&(t.prevBreakpoint=t.currentBreakpoint,t.currentBreakpoint=e,t.applyMergedOptions())}applyMergedOptions(){const t=this,{breakpoints:e,...n}=t.userOptions;let i=t.ctx.utils.deepMerge(t.defaultOptions,n);i=t.ctx.utils.deepMerge(i,t.currentBreakpoint.options||{}),delete i.breakpoints,i.slidesPerMove<1&&(i.slidesPerMove=1),i.slidesPerView<1&&(i.slidesPerView=1),t.ctx.store.setOptions(i)}}class x{constructor(t){const e=this;e.ctx=t,e.coreSlides=null,e.observer=null,e.debouncedSlideRefresh=e.ctx.utils.debounce(()=>{e.reInit()},4),e.handlers={selectedIndexChanged:({currentIndex:n})=>{e.renderSelectedIndex(n)}},e.bindEvents(),e.init(),e.observeDOMChanges()}init(){this.reInit()}reInit(){const t=this;t.wrapSlides(),t.coreSlides=t.ctx.track.querySelectorAll(":scope > tarot-slide"),t.loadFilteredSlides(!0),t.renderSelectedIndex(t.ctx.store.getState().selectedIndex)}bindEvents(){this.ctx.emitter.on(this.ctx.events.store.selectedIndexChanged,this.handlers.selectedIndexChanged)}wrapSlides(){const t=this.ctx.track;Array.from(t.children).forEach(e=>{if(e.tagName.toLowerCase()!=="tarot-slide"){const n=document.createElement("tarot-slide");t.replaceChild(n,e),n.appendChild(e)}})}observeDOMChanges(){const t=this;t.observer=new MutationObserver(e=>{for(const n of e)if(n.type==="childList"){t.debouncedSlideRefresh();break}}),t.observer.observe(t.ctx.track,{childList:!0,subtree:!1})}resetSlideIndexes(t){for(let e=0,n=t.length;e<n;++e)t[e].renderIndex=e,t[e].index=e,t[e].setAttribute("index",e)}prepSlidesForFrame(){const t=this,e=t.ctx.store.getSlides(),n=t.ctx.store.getWidths(),i=t.ctx.store.getAnimation(),s=t.ctx.store.getOptions();function a(h){return Math.round(2*h)/2}t.updateSlidePositions(i.trackPosition,e,n,s);for(let h=0,p=e.length;h<p;++h){const b=e[h];b.trackPosition=a(b.renderIndex*n.slideAndGap),b.centerPoint=a(b.trackPosition+n.slide/2)}}updateSlidePositions(t,e,n,i){const s=this;if(!s.ctx.utils.canLoop(e.length,i))return void s.resetAllSlides(e);const a=n.viewport,h=n.slide,p=h+n.gap,b=-t,y=b+a,P=new Set,R=Math.floor(b/p)-2,M=Math.ceil(y/p)+2;for(let C=R;C<=M;C++){const I=C*p;I+h>b&&I<y&&P.add(C)}const F=s.ctx.commands.getEffect(),O=F?.constructor?.rules?.loopBuffer||{left:0,right:0};if(P.size>0){const C=Array.from(P),I=Math.min(...C),Z=Math.max(...C);for(let V=1;V<=O.left;V++)P.add(I-V);for(let V=1;V<=O.right;V++)P.add(Z+V)}const L=e.length,B=new Set;for(const C of P){const I=(C%L+L)%L;B.add(I)}if(B.size<L){const C=Array.from(P);if(C.length>0){const I=Math.min(...C),Z=Math.max(...C),V=L-B.size,H=Math.floor(V/2),G=V-H;for(let j=1;j<=H;j++)P.add(I-j);for(let j=1;j<=G;j++)P.add(Z+j)}}const S=new Map;for(const C of P){const I=(C%L+L)%L;S.set(e[I],C)}for(const C of e){const I=S.get(C);I!==void 0&&(C.renderIndex=I)}}resetAllSlides(t){for(let e=0;e<t.length;e++)t[e].renderIndex=e}loadFilteredSlides(t=!1){const e=this,n=e.ctx.store.getOptions().filterClass,i=e.coreSlides,s=e.ctx.track;if(e.resetSlideIndexes(i),!n)return s.innerHTML="",i.forEach(h=>s.appendChild(h)),void e.ctx.store.setSlides(Array.from(i));const a=[];s.innerHTML="",i.forEach(h=>{h.classList.contains(n)&&(s.appendChild(h),a.push(h))}),e.ctx.store.setSlides(a)}addSlide(t,e){const n=this,i=n.ctx.track;let s;if(typeof t=="string"){const h=document.createElement("div");h.innerHTML=`<tarot-slide>${t.trim()}</tarot-slide>`,s=h.firstChild}else{const h=document.createElement("tarot-slide");h.appendChild(t),s=h}const a=Array.from(n.ctx.store.getSlides());typeof e=="number"&&e>=0&&e<a.length?i.insertBefore(s,a[e]):i.appendChild(s),n.loadFilteredSlides()}removeSlide(t){const e=this,n=e.ctx.track,i=Array.from(e.coreSlides);t<0||t>=i.length||(n.removeChild(i[t]),e.loadFilteredSlides())}renderSelectedIndex(t){const e=this.ctx.store.getSlides();for(let n=0,i=e.length;n<i;++n){const s=e[n];s.selected=s.index===t}}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.store.selectedIndexChanged,t.handlers.selectedIndexChanged),t.observer&&(t.observer.disconnect(),t.observer=null),t.debouncedSlideRefresh&&typeof t.debouncedSlideRefresh.cancel=="function"&&t.debouncedSlideRefresh.cancel(),t.debouncedSlideRefresh=null,t.coreSlides=null}}class v{#t;#e;#n;#i;#r;#s;#a;#o;#l;#d;#p;#c;constructor({attraction:t=.026,friction:e=.28}={}){const n=this;n.#h(t),n.#u(e),n.#t=t,n.#e=e,n.#n=1-e,n.#i=0,n.#r=0,n.#s=0,n.#a=0,n.#o=!1,n.#l=null,n.#c=0,n.#d=new g}animateTo(t,e,n){const i=this;i.#o&&i.stop(),isNaN(e)?console.log("end value is not a number"):(++i.#c,n*=1.4,i.#a=t,i.#r=t,i.#s=e,i.#i=n,i.#o=!0,i.#l=null,i.#d.emit("engine:position-changed",{position:i.#r,positionDelta:0,progress:0,velocity:i.#i}))}tick(t){const e=this;if(!e.#o)return;const n=e.#l==null?8.33:t-e.#l;e.#l=t;const i=e.#s-e.#a;let s=Math.max(Math.abs(i)-230,1)/200;s=Math.max(.8,Math.min(s,1.3));const a=n/(13*s),h=(e.#s-e.#r)*e.#t;e.#i+=h*a,e.#i*=Math.pow(e.#n,a);const p=e.#i*a;e.#r+=p;const b=e.#r-e.#a;let y=i!==0?b/i:0;if(Math.abs(p)<.01&&Math.abs(e.#r-e.#s)<.1)return e.#o=!1,e.#r=e.#s,e.#d.emit("engine:position-changed",{position:e.#r,positionDelta:0,progress:1,velocity:0}),void e.#d.emit("engine:finished");e.#d.emit("engine:position-changed",{position:e.#r,positionDelta:p,progress:y,velocity:e.#i})}stop(){this.#o=!1}isAnimating(){return this.#o}setAttraction(t){this.#h(t),this.#t=t}setFriction(t){this.#u(t),this.#e=t,this.#n=1-t}on(t,e){this.#d.on(t,e)}off(t,e){this.#d.off(t,e)}#h(t){if(typeof t!="number"||t<=0||t>=1)throw new Error("Attraction must be a number between 0 and 1 (exclusive).")}#u(t){if(typeof t!="number"||t<=0||t>=1)throw new Error("Friction must be a number between 0 and 1 (exclusive).")}destroy(){this.stop(),this.#d.destroy(),this.#d=null}}class m{#t=0;#e=0;#n=0;#i=0;#r="";#s=0;constructor(t){const e=this;e.ctx=t;const n=e.ctx.store.getOptions();e.engine=new v({attraction:n.animation.attraction,friction:n.animation.friction}),e.#e=1,e.handlers={optionsChanged:({currentOptions:i})=>{e.engine.setAttraction(i.animation?.attraction||.1),e.engine.setFriction(i.animation?.friction||.8)},dragStart:({event:i,drag:s})=>{e.stop(),e.#e=e.#t,e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"drag",event:i})},dragMove:({event:i,drag:s})=>{e.setPos(e.#e+s.delta,1,null,"drag",0),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"drag",event:i})},dragEnd:({event:i,drag:s})=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"drag",event:i}),Math.abs(s.delta)<e.ctx.store.getOptions().dragThreshold?e.ctx.commands.getTrackManager().settleTrack():s.delta<0?e.ctx.commands.next(s.velocity):e.ctx.commands.prev(s.velocity)},enginePositionChanged:({position:i,positionDelta:s,progress:a,velocity:h})=>{a===1?e.setPos(e.#i,a,h,e.#r,e.#s):e.setPos(e.#t+s,a,h,e.#r,e.#s)},engineAnimationFinished:()=>{e.ctx.emitter.emit("animationFinished",e.#i)},trackRequestFrame:({time:i})=>{e.engine.tick(i)}},e.bindEvents()}init(){}reInit(){}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.store.optionsChanged,t.handlers.optionsChanged),e.on(n.drag.start,t.handlers.dragStart),e.on(n.drag.move,t.handlers.dragMove),e.on(n.drag.end,t.handlers.dragEnd),e.on(n.track.requestFrame,t.handlers.trackRequestFrame),t.engine.on("engine:position-changed",t.handlers.enginePositionChanged),t.engine.on("engine:finished",t.handlers.engineAnimationFinished)}get currentPos(){return this.#t}getIsAnimating(){return this.engine.isAnimating()}canLoop(){const t=this,e=t.ctx.store.getOptions(),n=t.ctx.store.getSlides().length;return t.ctx.utils.canLoop(n,e)}stop(){this.engine.stop()}animateToPosition(t,e,n,i=0){const s=this;s.stop(),s.#r=n,s.#s=i,n!=="jump"?s.engine.isAnimating()&&s.#i==t||(e||(e=t<s.#t?-1*s.#n:s.#n),s.#i=t,s.engine.animateTo(s.#t,t,e)):this.setPos(t,1,0,"jump",i)}setPos(t,e,n=0,i,s=null){const a=this;let h=t-a.#t;if(a.#t,i!=="drag"&&e==1&&(h=0),a.#t=t,a.canLoop()){const p=a.ctx.store.getWidths().track;a.#t>0?a.shiftTrack("forwards"):a.#t<=-p&&a.shiftTrack("backwards")}a.ctx.store.setAnimation({type:i,trackPosition:t,trackDelta:h,velocity:n,progress:e,isAnimating:a.engine.isAnimating(),direction:s!==null?s:a.#s})}shiftTrack(t=1){const e=this,n=e.ctx.store.getWidths().track;let i;i=t==="forwards"?-1:t==="backwards"?1:t,e.#t+=n*i,e.#e+=n*i,e.#i+=n*i,e.ctx.emitter.emit(e.ctx.events.track.shifted,{trackPosition:e.#t,animationType:"shift"})}destroy(){const t=this;if(t.engine&&(t.engine.off("engine:position-changed",t.handlers.enginePositionChanged),t.engine.off("engine:finished",t.handlers.engineAnimationFinished),t.engine.stop(),t.engine=null),t.ctx){const{emitter:e,events:n}=t.ctx;e.off(n.store.optionsChanged,t.handlers.optionsChanged),e.off(n.drag.start,t.handlers.dragStart),e.off(n.drag.move,t.handlers.dragMove),e.off(n.drag.end,t.handlers.dragEnd),e.off(n.track.requestFrame,t.handlers.trackRequestFrame)}t.handlers=null}}class k{constructor(t,e){const n=this;n.ctx=t,n.animator=e,n.handlers={animationRequested:i=>{const{index:s,trackPosition:a,velocity:h,type:p}=i;a!==void 0?this.animateToTrackPosition(a,h,p):s!==void 0&&this.animateToSlide(s,h,p)}},n.bindEvents()}init(){}reInit(){}bindEvents(){const{emitter:t,events:e}=this.ctx;t.on(e.animation.requested,this.handlers.animationRequested)}settleTrack(){const t=this.ctx.store.getState().renderIndex;this.animateToSlide(t,0,"settle")}animateToSlide(t,e,n){const i=this.getTrackPosForIndex(t);this.animateToTrackPosition(i,e,n)}animateToTrackPosition(t,e,n){const i=this,s=i.animator.currentPos;let a=t;const h=i.ctx.store.getWidths().track;if(n==="jump")return void i.animator.animateToPosition(a,0,"jump",0);if(i.ctx.store.getOptions().loop){const b=Math.abs(s-a);b===h/2?e&&e!=0?e<0?a>s&&(a-=h):a<=s&&(a+=h):a>s&&(a-=h):b>h/2&&(a>=s?a-=h:a+=h)}e===void 0?e=a<s?-15:15:(e*=1.2,Math.abs(e)<15&&(e*=1.3));let p=0;a<s?p=-1:a>s&&(p=1),i.animator.animateToPosition(a,e,n,p)}getTrackPosForIndex(t){const e=this.ctx.store.getOptions(),n=this.ctx.store.getWidths();let i=t*(n.slide+n.gap);const s=0-n.paddingLeft,a=n.track-n.viewport-n.gap+n.paddingRight-.1;return i!=s&&i!=a&&e.centerSelectedSlide?(i-=n.viewport/2,i+=n.slide/2):i-=n.paddingLeft,!e.loop&&i<0&&(i=s),!e.loop&&i>a&&(i=a),i!==0&&(i*=-1),i}destroy(){const{emitter:t,events:e}=this.ctx;t.off(e.animation.requested,this.handlers.animationRequested)}}class A{constructor(t){const e=this;e.ctx=t,e.carousel=t.carousel,e.viewport=t.viewport,e.isInsideCarousel=n=>{const i=n?.composedPath?.()||[];return i.length?i.includes(e.carousel):e.carousel.contains(n?.target)},e.handlers={handleResize:n=>{e.ctx.emitter.emit(e.ctx.events.window.resize,{event:n})},handleCarouselClick:n=>{n.target.matches('button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])')||e.carousel.focus({preventScroll:!0})},handleWindowFocus:n=>{e.ctx.emitter.emit(e.ctx.events.window.hasFocus,{})},handleWindowBlur:n=>{e.ctx.emitter.emit(e.ctx.events.window.lostFocus,{})},handleCarouselFocus:n=>{e.ctx.emitter.emit(e.ctx.events.carousel.hasFocus,{}),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"focus",event:n})},handleCarouselBlur:n=>{e.ctx.emitter.emit(e.ctx.events.carousel.lostFocus,{})},handleVisibilityChange:()=>{e.ctx.emitter.emit(e.ctx.events.window.visibilityChange,{hidden:document.hidden})},handleKeyDown:n=>{if(e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"key",event:n}),["ArrowLeft","ArrowRight"].includes(n.key)&&n.target===e.carousel){n.preventDefault();const i=n.key==="ArrowLeft"?-1:1;e.ctx.emitter.emit(e.ctx.events.keyboard.arrow,{direction:i,event:n})}},handleWheel:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"wheel",event:n})},unifiedResizeHandler:e.ctx.utils.debounce(n=>{e.handlers.handleResize(n)},4)},e.viewportObserver=new ResizeObserver(n=>{e.handlers.unifiedResizeHandler(n?.[0])}),e.init()}init(){const t=this;window.addEventListener("resize",t.handlers.unifiedResizeHandler),window.addEventListener("orientationchange",t.handlers.unifiedResizeHandler),window.addEventListener("focus",t.handlers.handleWindowFocus),window.addEventListener("blur",t.handlers.handleWindowBlur),t.carousel.addEventListener("focus",t.handlers.handleCarouselFocus,!0),t.carousel.addEventListener("blur",t.handlers.handleCarouselBlur,!0),document.addEventListener("visibilitychange",t.handlers.handleVisibilityChange),t.carousel.addEventListener("keydown",t.handlers.handleKeyDown,!0),t.carousel.addEventListener("wheel",t.handlers.handleWheel,{passive:!0}),t.carousel.addEventListener("click",t.handlers.handleCarouselClick,!0),t.viewport&&t.viewportObserver.observe(t.viewport)}destroy(){const t=this;window.removeEventListener("resize",t.handlers.unifiedResizeHandler),window.removeEventListener("orientationchange",t.handlers.unifiedResizeHandler),window.removeEventListener("focus",t.handlers.handleWindowFocus),window.removeEventListener("blur",t.handlers.handleWindowBlur),t.carousel.removeEventListener("focus",t.handlers.handleCarouselFocus,!0),t.carousel.removeEventListener("blur",t.handlers.handleCarouselBlur,!0),document.removeEventListener("visibilitychange",t.handlers.handleVisibilityChange),t.carousel.removeEventListener("keydown",t.handlers.handleKeyDown,!0),t.carousel.removeEventListener("wheel",t.handlers.handleWheel,{passive:!0}),t.carousel.removeEventListener("click",t.handlers.handleCarouselClick,!0),t.viewportObserver&&(t.viewportObserver.disconnect(),t.viewportObserver=null)}}class w{ctx;constructor(t){const e=this;e.ctx=t,e.handlers={renderIndexChanged:({currentIndex:n})=>{e.handleSlideNavigation(n)}},e.ctx.emitter.on(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged)}updateSlides(t=null){const e=this;t===null&&(t=e.ctx.store.getAnimation().trackPosition||0),e.updateAllSlidesSelection();const n=e.ctx.utils.getSlidesInViewport(e.ctx,t);for(const i of n)e.updateSlideState(i)}updateAllSlidesSelection(){const t=this.ctx.store.getSlides();for(const e of t)e.selected?e.classList.add("tarot-selected"):e.classList.remove("tarot-selected")}updateSlideState(t){const{slide:e,isVisible:n,isFullyVisible:i,visibilityPercent:s,leftVisibility:a,rightVisibility:h,parallax:p,parallaxVisibility:b}=t;e.style.setProperty("--tarot-visibility",s.toFixed(3)),e.style.setProperty("--tarot-left-visibility",a.toFixed(3)),e.style.setProperty("--tarot-right-visibility",h.toFixed(3)),e.style.setProperty("--tarot-parallax",p.toFixed(3)),e.style.setProperty("--tarot-parallax-visibility",b.toFixed(3)),e.classList.remove("tarot-hidden","tarot-visible","tarot-fully-visible"),n?(e.classList.add("tarot-visible"),i&&e.classList.add("tarot-fully-visible")):e.classList.add("tarot-hidden"),this.updateSlideARIA(e,n,s),this.updateSlideTabindex(e,n)}updateSlideARIA(t,e,n){const i=this;if(t.setAttribute("aria-hidden",String(!e)),t.hasAttribute("role")||t.setAttribute("role","group"),!t.hasAttribute("aria-label")&&!t.hasAttribute("aria-labelledby")){const h=t.getAttribute("index")||"0",p=parseInt(h,10)||0,b=i.ctx.store.getState().slideCount||i.ctx.store.getSlides().length||0;t.setAttribute("aria-label",`slide ${p+1} of ${b}`)}const s=i.ctx.store.getState().renderIndex,a=t.getAttribute("index");a!=null&&Number(a)===s?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")}updateSlideTabindex(t,e){t.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])').forEach(n=>{if(e){const i=n.getAttribute("data-original-tabindex");i!==null&&(n.setAttribute("tabindex",i),n.removeAttribute("data-original-tabindex"))}else{const i=n.getAttribute("tabindex");i!=="-1"&&(i!==null&&n.setAttribute("data-original-tabindex",i),n.setAttribute("tabindex","-1"))}})}getSlideVisibility(){const t=this,e=t.ctx.store.getAnimation().trackPosition||0;return t.ctx.utils.getSlidesInViewport(t.ctx,e)}getVisibleSlides(){return this.getSlideVisibility().filter(t=>t.isVisible).map(t=>t.slide)}getFullyVisibleSlides(){return this.getSlideVisibility().filter(t=>t.isFullyVisible).map(t=>t.slide)}destroy(){const t=this.ctx.carousel.querySelectorAll("tarot-slide");for(const e of t)e.classList.remove("tarot-hidden","tarot-visible","tarot-fully-visible","tarot-selected"),e.style.removeProperty("--tarot-visibility"),e.style.removeProperty("--tarot-left-visibility"),e.style.removeProperty("--tarot-right-visibility"),e.style.removeProperty("--tarot-parallax"),e.style.removeProperty("--tarot-parallax-visibility"),e.removeAttribute("aria-hidden"),e.removeAttribute("aria-current"),e.querySelectorAll("[data-original-tabindex]").forEach(n=>{const i=n.getAttribute("data-original-tabindex");i!==null?n.setAttribute("tabindex",i):n.removeAttribute("tabindex"),n.removeAttribute("data-original-tabindex")})}handleSlideNavigation(t){const e=this;if(!e.ctx.store.getOptions().announcements||!e.ctx.announcements)return;const n=`Slide ${t+1} of ${e.ctx.store.getSlides().length}`;e.ctx.announcements.textContent=n}destroy(){const t=this;t.handlers?.renderIndexChanged&&t.ctx.emitter.off(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged)}}function D(f,t,e){if(f==="L+")return Number.NEGATIVE_INFINITY;if(f==="R+")return Number.POSITIVE_INFINITY;const n=e?.[f];if(n==null)throw new Error(`getPointValue: unknown point "${f}". Available points: ${Object.keys(e||{}).join(", ")}`);return n+t}function $(f,t,e,n){const i=D(f,e,n),s=D(t,e,n);return i>s?{start:i,end:s}:{start:s,end:i}}function W(f){const{animation:t,transformPoints:e}=f,n=t.trackPosition===0?0:-t.trackPosition;return{getPointValue:i=>D(i,n,e),getRange:(i,s)=>$(i,s,n,e),isSlideInRange:(i,s,a)=>function(h,p,b,y,P){function R(I){return Math.round(2*I)/2}const{start:M,end:F}=$(p,b,y,P),O=R(M),L=R(F),B=R(h.centerPoint),S=B<=O&&B>L;let C=0;if(S)if(Number.isFinite(O)&&Number.isFinite(L)){const I=O-L;C=I>0?Math.max(0,Math.min(1,(B-L)/I)):1}else C=1;return{isInRange:S,percent:C,start:O,end:L}}(i,s,a,n,e),trackPosition:n,transformPoints:e,frame:f}}class z{#t;ctx;constructor(t){const e=this;e.ctx=t,e.#t=new w(t),e.effect=null,e.rafId=null,e.handlers={effectChanged:()=>{e.effect=t.commands.getEffect(),e.requestFrame()},storeDirty:()=>{e.requestFrame()}},e.bindEvents()}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.effect.changed,t.handlers.effectChanged),e.on(n.store.changedDirty,t.handlers.storeDirty)}requestFrame(){const t=this;t.rafId===null&&(t.rafId=requestAnimationFrame(t.onFrame.bind(t)))}cancel(){const t=this;t.rafId!==null&&(cancelAnimationFrame(t.rafId),t.rafId=null)}onFrame(t){const e=this;e.rafId=null,e.ctx.commands.getSlideManager().prepSlidesForFrame();const n=e.ctx.store.getSnapshot(),i=[...n.slides].sort((a,h)=>a.renderIndex-h.renderIndex),s=Object.freeze({state:n.state,widths:n.widths,options:n.options,slides:i,animation:n.animation,transformPoints:n.transformPoints,time:t});e.renderFrame(s),e.ctx.store.markAsClean(),n.animation.isAnimating&&(e.ctx.emitter.emit(e.ctx.events.track.requestFrame,{time:t}),e.requestFrame())}renderFrame(t){const e=this;e.ctx.emitter.emit(e.ctx.events.frame.beforeRender,t);const n=W(t);e.effect.render(t,n),e.#t.updateSlides(t.animation.trackPosition),e.ctx.emitter.emit(e.ctx.events.frame.afterRender,t)}destroy(){const t=this,{emitter:e,events:n}=t.ctx;t.cancel(),e.off(n.effect.changed,t.handlers.effectChanged),e.off(n.store.changedDirty,t.handlers.storeDirty),t.#t&&(t.#t.destroy(),t.#t=null),t.effect=null}}class N{#t;#e;#n;#i;#r;#s;#a;#o;constructor(t){const e=this;if(!t||typeof t.emit!="function")throw new Error("data-store requires an emitter with an emit method");e.#t=t,e.#o=!1,e.#e={},e.#n={selectedIndex:0,renderIndex:0,pageIndex:0,pageCount:1,isDragging:!1,slideCount:0},e.#i={viewport:0,track:0,slide:0,slideMin:0,gap:0,slideAndGap:0,paddingLeft:0,paddingRight:0},e.#r=[],e.#s={},e.#a={type:"jump",trackPosition:0,trackDelta:0,velocity:0,progress:1,isAnimating:!1,direction:0}}getOptions(){return Object.freeze({...this.#e})}setOptions(t={}){const e=this,n=e.getOptions();e.#e={...e.#e,...t};const i=e.getOptions();e.#l(),e.#t.emit(d.store.optionsChanged,{prevOptions:n,currentOptions:i})}getState(){return Object.freeze({...this.#n})}setState(t={}){const e=this,n=e.getState();e.#n={...e.#n,...t};const i=e.getState();e.#l(),e.#t.emit(d.store.stateChanged,{prevState:n,currentState:i}),t.selectedIndex!==void 0&&t.selectedIndex!==n.selectedIndex&&e.#t.emit(d.store.selectedIndexChanged,{prevIndex:n.selectedIndex,currentIndex:t.selectedIndex}),t.renderIndex!==void 0&&t.renderIndex!==n.renderIndex&&e.#t.emit(d.store.renderIndexChanged,{prevIndex:n.renderIndex,currentIndex:t.renderIndex}),t.pageIndex!==void 0&&t.pageIndex!==n.pageIndex&&e.#t.emit(d.store.pageIndexChanged,{prevPageIndex:n.pageIndex,currentPageIndex:t.pageIndex}),t.pageCount!==void 0&&t.pageCount!==n.pageCount&&e.#t.emit(d.store.pageCountChanged,{count:t.pageCount})}getWidths(){return Object.freeze({...this.#i})}setWidths(t={}){const e=this,n=e.getWidths();e.#i={...t};const i=e.getWidths();e.#l(),e.#t.emit(d.store.layoutChanged,{prevWidths:n,currentWidths:i})}getSlides(){return Object.freeze([...this.#r])}setSlides(t=[]){const e=this,n=e.getSlides();e.#r=[...t];const i=e.getSlides();e.setState({slideCount:e.#r.length}),e.#l(),e.#t.emit(d.store.slidesChanged,{prevSlides:n,currentSlides:i})}getTransformPoints(){return Object.freeze({...this.#s})}setTransformPoints(t={}){const e=this,n=e.getTransformPoints();e.#s={...t},e.#l(),e.#t.emit(d.store.transformPointsChanged,{prevPoints:n,currentPoints:Object.freeze({...e.#s})})}setAnimation(t={}){const e=this,n={...e.#a};e.#a={...e.#a,...t},e.#l(),t.trackPosition!==void 0&&t.trackPosition!==n.trackPosition&&e.#t.emit(d.track.positionChanged,{prevTrackPosition:n.trackPosition,currentTrackPosition:t.trackPosition,trackDelta:t.trackPosition-n.trackPosition,animationType:t.type||"unknown"})}getAnimation(){return Object.freeze({...this.#a})}clearAnimation(){this.#a={type:"jump",trackPosition:0,trackDelta:0,velocity:0,progress:1}}isDirty(){return this.#o}markAsClean(){const t=this;t.#o&&(t.#o=!1,t.#t.emit(d.store.changedClean))}#l(){const t=this;t.#o||(t.#o=!0,t.#t.emit(d.store.changedDirty))}getSnapshot(){const t=this;return Object.freeze({state:t.getState(),widths:t.getWidths(),slides:t.getSlides(),transformPoints:t.getTransformPoints(),options:t.getOptions(),animation:t.getAnimation()})}destroy(){const t=this;t.#t=null,t.#e=null,t.#n=null,t.#i=null,t.#r=null,t.#s=null,t.#a=null,t.#o=!1}}function q(f,t){return typeof f=="number"?f>0&&f<1?f*t:f:f.indexOf("px")>-1?parseFloat(f.replace("px","")):f.indexOf("%")>-1?parseFloat(f.replace("%",""))/100*t:0}const U=Object.freeze({throttle:function(f,t){var e=!1;return function(...n){e||(f.apply(this,n),e=!0,setTimeout(function(){e=!1},t))}},debounce:function(f,t,e){var n;return function(...i){var s=this,a=e&&!n;clearTimeout(n),n=setTimeout(function(){n=null,e||f.apply(s,i)},t),a&&f.apply(s,i)}},deepMerge:function f(t,e){const n=i=>i&&typeof i=="object";return Object.keys(e).reduce((i,s)=>(Array.isArray(i[s])&&Array.isArray(e[s])?i[s]=i[s].concat(e[s]):n(i[s])&&n(e[s])?i[s]=f({...i[s]},e[s]):i[s]=e[s],i),{...t})},convertValueToNumber:q,areOptionsEqual:function f(t,e){if(t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!f(t[s],e[s]))return!1;return!0}const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const s of n)if(!i.includes(s)||!f(t[s],e[s]))return!1;return!0},canLoop:function(f,t){const e=t.slidesPerView||1;return!!(t.loop&&f>e)},getSlidesInViewport:function(f,t=null,e=0){const n=f.store.getWidths(),i=f.store.getSlides();f.store.getState(),t===null&&(t=f.store.getAnimation().trackPosition||0);const s=n.viewport,a=n.slide;n.gap;const h=n.slideAndGap,p=-t-e,b=p+s+2*e,y=s/2-t,P=[];for(let R=0;R<i.length;R++){const M=i[R],F=M.renderIndex!==void 0?M.renderIndex:R,O=F*h,L=O+a,B=Math.max(O,p),S=Math.min(L,b),C=Math.max(0,S-B),I=Math.max(0,Math.min(1,C/a)),Z=I>0,V=I>=.66;let H=0,G=0,j=0,Y=1;if(C>0){const K=O+a/2-y;j=Math.max(-1,Math.min(1,K/(s/2))),K>0?(G=Math.max(0,Math.min(1,I)),Y=1-G):G=1,K<0?(H=Math.max(0,Math.min(1,I)),Y=-1*(1-H)):H=1,I>=1&&(H=1,G=1,Y=0)}else{const K=O+a/2-y;K>0&&(Y=1),K<0&&(Y=-1)}P.push({slide:M,index:R,renderIndex:F,visibilityPercent:I,isVisible:Z,isFullyVisible:V,leftVisibility:H,rightVisibility:G,parallax:j,parallaxVisibility:Y,slideStart:O,slideEnd:L})}return P}});class Q{static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:0,right:0}};constructor(t){const e=this;e.ctx=t,e.currentSlideWidth=0,e.currentTrackWidth=0}init(){}reInit(){}renderSlideWidth(t){this.currentSlideWidth!==t&&(this.currentSlideWidth=t,this.ctx.viewport.style.setProperty("--tarot-slide-width",`${t}px`))}renderTrackPosition(t){let e=t.isAnimating?`translate3d(${t.trackPosition}px,0,0)`:`translateX(${t.trackPosition}px)`;this.ctx.track.style.transform=e}renderTrackWidth(t){this.currentTrackWidth!==t&&(this.currentTrackWidth=t,this.ctx.track.style.width=`${t}px`)}render(t,e){}get rules(){return this.constructor.rules}destroy(){}}class et extends Q{static effectName="carousel";constructor(t){super(t)}render(t,e){const{slides:n,widths:i,state:s,animation:a}=t,h=this;h.renderTrackWidth(i.track),h.renderSlideWidth(i.slide),h.renderTrackPosition(a);for(let p=0,b=n.length;p<b;++p){const y=n[p];y&&y.style&&(y.style.transition="none",y.style.transform=`translateX(${y.trackPosition}px)`)}}destroy(){this.ctx.track.style.transform="",this.ctx.track.style.width=""}}class nt extends Q{static effectName="fade";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1,loopBuffer:{left:0,right:0}};constructor(t){super(t);const e=this;e.blurAmount=10,e.scaleAmount=.1,e.lastState=new WeakMap}render(t,e){const n=this,{slides:i,widths:s,animation:a}=t;n.renderSlideWidth(s.slide);const h=n.lastState;for(let p=0,b=i.length;p<b;++p){const y=i[p];if(e.isSlideInRange(y,"L+","L1").isInRange){h.get(y)!=="hiddenLeft"&&(n.applyHiddenLeftFilter(y),h.set(y,"hiddenLeft"));continue}const P=e.isSlideInRange(y,"CL1","L1");if(P.isInRange){const R=`fadeLeft:${Math.round(100*P.percent)}`;h.get(y)!==R&&(n.applyFadeLeftFilter(y,P.percent),h.set(y,R));continue}if(e.isSlideInRange(y,"R1","CL1").isInRange){h.get(y)!=="fadeRight"&&(n.applyFadeRightFilter(y),h.set(y,"fadeRight"));continue}e.isSlideInRange(y,"R+","R1").isInRange&&h.get(y)!=="hiddenRight"&&(n.applyHiddenRightFilter(y),h.set(y,"hiddenRight"))}}applyHiddenLeftFilter(t){t.style.opacity="0",t.style.display="none",t.style.zIndex="1",t.style.filter=`blur(${this.blurAmount}px)`,t.style.transform=`scale(${1+this.scaleAmount})`}applyFadeLeftFilter(t,e){e>.995&&(e=1);const n=(1-e)*this.blurAmount,i=1+(1-e)*this.scaleAmount;t.style.opacity=String(e),t.style.display="block",t.style.zIndex="1",t.style.filter=`blur(${n}px)`,t.style.transform=`scale(${i})`}applyFadeRightFilter(t){t.style.opacity="1",t.style.display="block",t.style.zIndex="0",t.style.filter="blur(0px)",t.style.transform="scale(1)"}applyHiddenRightFilter(t){t.style.opacity="0",t.style.display="none",t.style.zIndex="0",t.style.filter="blur(0px)",t.style.transform="scale(1)"}destroy(){super.destroy();const t=this.ctx.store.getSlides()||[];for(let e=0;e<t.length;e++){const n=t[e];n&&n.style&&(n.style.opacity="",n.style.display="",n.style.zIndex="",n.style.filter="",n.style.transform="")}this.lastState=null}}class it{constructor(t){const e=this;e.ctx=t,e.otherCarousel=null,e.isNavCarousel=!0,e.isActive=!1,e.handlers={otherAnimationRequested:({index:n,velocity:i,type:s})=>{e.ctx.store.getState().selectedIndex!==n&&setTimeout(()=>{e.ctx.commands.goToSlide(n)},1)},renderIndexChanged:({currentIndex:n})=>{e.isActive&&e.ctx.store.getState().selectedIndex!==n&&e.ctx.store.setState({selectedIndex:n})},optionsChanged:()=>{e.reInit()},selectedIndexChanged:({prevIndex:n,currentIndex:i})=>{e.isActive&&(e.updateOtherCarousel(),e.updateNavClasses(n,i))},keyDown:n=>{e.isActive&&e.handleKeyDown(n)},slideClick:({index:n,renderIndex:i,event:s})=>{if(!e.isActive)return;const a=e.ctx.store.getSlides()[n];if(a&&typeof a.focus=="function")try{a.focus({preventScroll:!0})}catch{}e.ctx.commands.goToSlide(n)}},e.bindEvents(),e.init()}init(){const t=this,e=t.ctx.store.getOptions().asNavFor;if(!e)return t.disableNavUI?.(),void(t.isActive=!1);const n=document.querySelector(e);if(!n)return t.disableNavUI?.(),void(t.isActive=!1);t.otherCarousel=n,t.isActive=!0,t.setupNavOptions(),t.enableNavUI?.(),setTimeout(()=>{t.otherCarousel.on(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.updateNavClasses(-1,t.ctx.store.getState().selectedIndex);const{renderIndex:i,selectedIndex:s}=t.ctx.store.getState();i!==s&&t.ctx.store.setState({selectedIndex:i})},40)}reInit(){const t=this;t.otherCarousel&&(t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null),t.disableNavUI(),t.isActive=!1,t.init()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged),t.ctx.emitter.on(t.ctx.events.store.selectedIndexChanged,t.handlers.selectedIndexChanged),t.ctx.emitter.on(t.ctx.events.slides.click,t.handlers.slideClick)}enableNavUI(){const t=this;if(!t.isActive)return;t.ctx.carousel.classList.add("tarot-nav-carousel"),t.ctx.track.addEventListener("keydown",t.handlers.keyDown,!0),t.ctx.carousel.setAttribute("tabindex","0"),t.ctx.carousel.setAttribute("role","tablist"),t.ctx.carousel.setAttribute("aria-label","Carousel Navigation");const e=t.ctx.store.getSlides(),n=t.ctx.store.getState().selectedIndex;for(let i=0;i<e.length;i++){const s=e[i];s.setAttribute("role","tab"),s.setAttribute("tabindex",i===n?"0":"-1")}}disableNavUI(){const t=this;t.ctx.carousel.classList.remove("tarot-nav-carousel"),t.ctx.track.removeEventListener("keydown",t.handlers.keyDown,!0),t.ctx.carousel.removeAttribute("role"),t.ctx.carousel.removeAttribute("aria-label"),t.ctx.store.getSlides().forEach(e=>{e.removeAttribute("aria-selected"),e.removeAttribute("role")})}setupNavOptions(){const t=this;t.ctx.store.getOptions().centerSelectedSlide||t.ctx.store.setOptions({centerSelectedSlide:!0})}handleKeyDown(t){const e=this,n=e.ctx.store.getState().selectedIndex,i=e.ctx.store.getState().slideCount;switch(t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault(),t.stopPropagation();const s=n>0?n-1:e.ctx.store.getOptions().loop?i-1:n;e.ctx.commands.goToSlide(s);const a=e.ctx.store.getSlides()[s];a&&typeof a.focus=="function"&&setTimeout(()=>{try{a.focus({preventScroll:!0})}catch{}},0);break;case"ArrowRight":case"ArrowDown":t.preventDefault(),t.stopPropagation();const h=n<i-1?n+1:e.ctx.store.getOptions().loop?0:n;e.ctx.commands.goToSlide(h);const p=e.ctx.store.getSlides()[h];p&&typeof p.focus=="function"&&setTimeout(()=>{try{p.focus({preventScroll:!0})}catch{}},0);break;case"Home":t.preventDefault(),t.stopPropagation(),e.ctx.commands.goToSlide(0);const b=e.ctx.store.getSlides();b[0]?.focus&&setTimeout(()=>{try{b[0].focus({preventScroll:!0})}catch{}},0);break;case"End":t.preventDefault(),t.stopPropagation(),e.ctx.commands.goToSlide(i-1);const y=e.ctx.store.getSlides(),P=i-1;y[P]?.focus&&setTimeout(()=>{try{y[P].focus({preventScroll:!0})}catch{}},0)}}updateNavClasses(t,e){const n=this.ctx.store.getSlides();t>=0&&n[t]&&(n[t].setAttribute("aria-selected","false"),n[t].setAttribute("tabindex","-1")),n[e]&&(n[e].setAttribute("aria-selected","true"),n[e].setAttribute("role","tab"),n[e].setAttribute("tabindex","0"))}updateOtherCarousel(){const t=this;if(!t.otherCarousel)return;const e=t.ctx.store.getState().selectedIndex;setTimeout(()=>{t.otherCarousel.goToSlide(e)},1)}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged),t.ctx.emitter.off(t.ctx.events.store.selectedIndexChanged,t.handlers.selectedIndexChanged),t.ctx.emitter.off(t.ctx.events.slides.click,t.handlers.slideClick),t.disableNavUI(),t.otherCarousel&&t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null,t.isActive=!1}}class st{constructor(t){const e=this;e.ctx=t,e.otherCarousel=null,e.handlers={otherAnimationRequested:({index:n,velocity:i,type:s})=>{e.ctx.store.getState().renderIndex!==n&&e.ctx.commands.goToSlide(n)},optionsChanged:n=>{e.reInit()},renderIndexChanged:({prevIndex:n,currentIndex:i})=>{e.updateSyncWithCarousel()}},e.bindEvents(),e.init()}init(){const t=this,e=t.ctx.store.getOptions().syncWith;e&&(t.otherCarousel=document.querySelector(e),t.otherCarousel&&setTimeout(()=>{t.otherCarousel.on(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested)},100))}reInit(){const t=this;t.otherCarousel&&(t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null),t.init()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged)}updateSyncWithCarousel(){const t=this;if(!t.otherCarousel)return;const e=t.ctx.store.getState().renderIndex;t.otherCarousel.goToSlide(e)}destroy(){const t=this;t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged),t.otherCarousel&&t.otherCarousel.off(t.ctx.events.animation.requested,t.handlers.otherAnimationRequested),t.otherCarousel=null}}class rt{constructor(t){const e=this;e.ctx=t,e.autoplayTimer=null,e.autoplayOptions=e.ctx.store.getOptions().autoplay||{},e.debouncedResume=e.ctx.utils.debounce(()=>e.start(),1e4),e.handlers={userInteracted:()=>{e.pause()},optionsChanged:()=>{e.autoplayOptions=e.ctx.store.getOptions().autoplay||{},e.reInit()},tick:()=>{document.hasFocus?.()&&e.ctx.commands.next(-5)}},e.bindEvents(),e.reInit()}reInit(){const t=this;t.autoplayOptions=t.ctx.store.getOptions().autoplay||{},t.autoplayOptions.interval?t.start():t.stop()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.user.interacted,t.handlers.userInteracted),t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged)}start(){const t=this;if(t.stop(),!t.autoplayOptions.interval)return;let e=t.autoplayOptions.interval;e!==0&&e!==!1&&(e===!0&&(e=4e3),t.autoplayTimer=setInterval(t.handlers.tick,e))}stop(){clearInterval(this.autoplayTimer),this.autoplayTimer=null}pause(){const t=this;t.stop(),t.autoplayOptions.interval&&t.debouncedResume()}destroy(){const t=this;t.stop(),t.ctx.emitter.off(t.ctx.events.user.interacted,t.handlers.userInteracted),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.debouncedResume.cancel&&t.debouncedResume.cancel()}}class ot{constructor(t){const e=this;e.ctx=t,e.navOptions={},e.prevButtonButton=null,e.nextButtonButton=null,e.handlers={prevClick:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"button",event:n}),e.ctx.commands.prev(5)},nextClick:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"button",event:n}),e.ctx.commands.next(-5)},buttonFocus:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"focus",event:n})},buttonBlur:n=>{},optionsChanged:()=>{e.reInit()},pageChanged:()=>{e.checkDisabledState()},windowResize:()=>{e.updateSmartButtons()}},e.init()}init(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.queryButtons(),t.nextButton||t.buildNextButton(),t.prevButton||t.buildPrevButton(),t.checkButtonOptions(),t.bindUI(),t.bindEvents(),t.checkDisabledState(),setTimeout(()=>{t.updateSmartButtons()},8),setTimeout(()=>{t.updateSmartButtons()},30)}reInit(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.checkButtonOptions(),t.checkDisabledState(),t.updateSmartButtons()}bindUI(){const t=this;t.unbindUI(),t.prevButton&&(t.prevButton.addEventListener("click",t.handlers.prevClick,!0),t.prevButton.addEventListener("focus",t.handlers.buttonFocus),t.prevButton.addEventListener("blur",t.handlers.buttonBlur)),t.nextButton&&(t.nextButton.addEventListener("click",t.handlers.nextClick,!0),t.nextButton.addEventListener("focus",t.handlers.buttonFocus),t.nextButton.addEventListener("blur",t.handlers.buttonBlur));const e=t.ctx.store.getSlides();if(e.length>0){let n=e[0].el?.querySelector("img")||!1;n&&n.complete?t.updateSmartButtons(n):n&&(n.onload=function(){t.updateSmartButtons(n)})}}unbindUI(){const t=this;t.prevButton&&(t.prevButton.removeEventListener("click",t.handlers.prevClick,!0),t.prevButton.removeEventListener("focus",t.handlers.buttonFocus),t.prevButton.removeEventListener("blur",t.handlers.buttonBlur)),t.nextButton&&(t.nextButton.removeEventListener("click",t.handlers.nextClick,!0),t.nextButton.removeEventListener("focus",t.handlers.buttonFocus),t.nextButton.removeEventListener("blur",t.handlers.buttonBlur))}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.ctx.emitter.on(t.ctx.events.window.resize,t.handlers.windowResize)}checkButtonOptions(){const t=this;t.navOptions.showButtons?t.showButtons():t.hideButtons()}queryButtons(){const t=this,e=t.navOptions;if(e.prevButtonSelector&&(t.prevButton=document.querySelector(e.prevButtonSelector)),e.nextButtonSelector&&(t.nextButton=document.querySelector(e.nextButtonSelector)),!t.prevButton){const n=t.ctx.carousel.querySelectorAll('[data-action="tarot-prev"]');t.prevButton=Array.from(n).find(i=>i.closest("tarot-carousel")===t.ctx.carousel)||null}if(!t.nextButton){const n=t.ctx.carousel.querySelectorAll('[data-action="tarot-next"]');t.nextButton=Array.from(n).find(i=>i.closest("tarot-carousel")===t.ctx.carousel)||null}}buildPrevButton(){const t=this;t.ctx.carousel.insertAdjacentHTML("afterbegin",`
			<button class="tarot-button" data-action="tarot-prev" aria-label="previous slide">
				<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
					<title>angle left</title>
					<path d="m21 7-9 9 9 9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
				</svg>
			</button>
		`),t.prevButton=t.ctx.carousel.querySelector('[data-action="tarot-prev"]')}buildNextButton(){const t=this;t.ctx.carousel.insertAdjacentHTML("afterbegin",`
			<button class="tarot-button" data-action="tarot-next" aria-label="next slide">
				<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
					<title>angle right</title>
					<path d="m11 25 9-9-9-9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
				</svg>
			</button>
		`),t.nextButton=t.ctx.carousel.querySelector('[data-action="tarot-next"]')}showButtons(){const t=this,e=t.prevButton,n=t.nextButton;e&&t.navOptions.showPrevButton!==!1?(e.style.display="",e.setAttribute("aria-label","previous"),e.classList.add("tarot-button","tarot-prev")):t.hidePrevButton(),n&&t.navOptions.showNextButton!==!1?(n.style.display="",n.setAttribute("aria-label","next"),n.classList.add("tarot-button","tarot-next")):t.hideNextButton()}hideButtons(){this.hidePrevButton(),this.hideNextButton()}hidePrevButton(){this.prevButton&&(this.prevButton.style.display="none")}hideNextButton(){this.nextButton&&(this.nextButton.style.display="none")}updateSmartButtons(){const t=this,e=t.ctx.store.getOptions().navigation?.smartButtons||!1,n=t.prevButton,i=t.nextButton,s=40,a=t.ctx.viewport,h=a?.offsetWidth||0,p=t.ctx.store.getSlides();if(!a||!p||p.length===0)return;if(!e)return n&&n.classList.remove("tarot-smart-position"),void(i&&i.classList.remove("tarot-smart-position"));const b=p[0]?.el;if(!b)return;const y=window.getComputedStyle(a),P=parseInt(y.paddingTop)||0;let R=a.offsetHeight;const M=b.querySelector("img");M&&M.offsetHeight<R&&(R=M.height+2*P),R/=2;const F=t.ctx.store.getWidths(),O=F.paddingLeft||0,L=F.paddingRight||0,B=F.gap||0;if(n){n.classList.add("tarot-smart-position"),n.style.top=`${R}px`;let S=s,C=O-B/2,I=O;window.innerWidth===h?C<s?I>=s?S=I:B>0&&(S+=B):C>=s&&(S=C):S=I,n.style.left=`${S}px`}if(i){i.classList.add("tarot-smart-position"),i.style.top=`${R}px`;let S=s,C=L-B/2,I=L;window.innerWidth===h?C<s?I>=s?S=I:B>0&&(S+=B):C>=s&&(S=C):S=I,i.style.right=`${S}px`}}checkDisabledState(){const t=this,e=t.ctx.store.getState(),n=t.ctx.store.getOptions(),i=e.pageIndex,s=e.pageCount;n.loop||(t.prevButton&&(t.prevButton.disabled=i==0),t.nextButton&&(t.nextButton.disabled=i==s-1))}destroy(){const t=this;t.unbindUI(),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.ctx.emitter.off(t.ctx.events.window.resize,t.handlers.windowResize),t.prevButtonButton=null,t.nextButtonButton=null}}class at{constructor(t){const e=this;e.ctx=t,e.handlers={userInteracted:()=>{e.checkLazyImages(),e.ctx.emitter.off(e.ctx.events.user.interacted,e.handlers.userInteracted)},slidesChanged:()=>{e.reInit()}},e.init()}init(){this.bindEvents(),this.checkLazyImages()}reInit(){this.checkLazyImages()}bindEvents(){const t=this,{emitter:e,events:n}=t.ctx;e.on(n.user.interacted,t.handlers.userInteracted),e.on(n.store.slidesChanged,t.handlers.slidesChanged)}checkLazyImages(){const t=this.ctx.store.getSlides();if(!t||t.length===void 0)return void console.warn("LazyLoad: Slides not available");let e;for(let n=0,i=t.length;n<i;++n)if(t[n]&&t[n].el){e=t[n].el.querySelectorAll('img[loading="lazy"]');for(let s=0,a=e.length;s<a;++s)e[s].removeAttribute("loading")}}destroy(){const t=this,{emitter:e,events:n}=t.ctx;e.off(n.user.interacted,t.handlers.userInteracted),e.off(n.store.slidesChanged,t.handlers.slidesChanged)}}class lt{constructor(t){const e=this;e.ctx=t,e.navOptions={},e.paginationContainer=null,e.dotsList=null,e.isAutoGeneratedNav=!1,e.debouncedRender=e.ctx.utils.debounce(()=>e.render(),20),e.handlers={paginationClick:n=>{e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"pagination",event:n});const i=n.target.closest('[data-action="tarot-go-to-page"]');if(!i)return;const s=parseInt(i.getAttribute("data-page-index"),10);e.activateDot(s)},keyDown:n=>{if(!["ArrowLeft","ArrowRight","Home","End"].includes(n.key))return;const i=Array.from(e.paginationContainer.querySelectorAll(".tarot-dots-button")),s=i.findIndex(p=>p.getAttribute("tabIndex")==="0");let a=s;const h=e.ctx.store.getOptions();switch(n.key){case"ArrowRight":a=s+1,a>=i.length&&(a=h.loop?0:s);break;case"ArrowLeft":a=s-1,a<0&&(a=h.loop?i.length-1:s);break;case"Home":a=0;break;case"End":a=i.length-1;break;default:return}n.preventDefault(),n.stopPropagation(),i.forEach((p,b)=>{p.tabIndex=b===a?0:-1}),i[a].focus(),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"key",event:n}),e.activateDot(a)},optionsChanged:()=>{e.reInit()},slidesChanged:()=>{e.reInit()},pageChanged:()=>{e.updateSelectedDot()}},e.init()}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.slidesChanged,t.handlers.slidesChanged),t.ctx.emitter.on(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.paginationContainer.addEventListener("click",t.handlers.paginationClick,!1),t.paginationContainer.addEventListener("keydown",t.handlers.keyDown,!1)}init(){const t=this;if(t.navOptions=t.ctx.store.getOptions().navigation||{},t.isAutoGeneratedNav=!1,t.navOptions&&t.navOptions.paginationSelector){const e=document.querySelector(t.navOptions.paginationSelector);e&&(t.paginationContainer=e)}if(!t.paginationContainer){t.isAutoGeneratedNav=!0;const e=document.createElement("nav");e.setAttribute("aria-label","carousel navigation"),t.paginationContainer=document.createElement("div"),e.appendChild(t.paginationContainer),t.ctx.carousel.appendChild(e)}t.paginationContainer.innerHTML="",t.paginationContainer.classList.add("tarot-dots-container"),t.dotsList=document.createElement("ul"),t.dotsList.classList.add("tarot-dots-list"),t.dotsList.setAttribute("role","tablist"),t.dotsList.setAttribute("aria-orientation","horizontal"),t.paginationContainer.appendChild(t.dotsList),t.bindEvents(),t.render()}reInit(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.debouncedRender()}render(){const t=this,e=t.ctx.store.getState(),n=e.pageIndex,i=e.pageCount,s=t.ctx.carousel.id||"";t.dotsList.innerHTML="";for(let a=0;a<i;++a){const h=document.createElement("li");h.setAttribute("role","presentation");const p=document.createElement("button");p.type="button",p.classList.add("tarot-dots-button"),p.setAttribute("role","tab"),p.setAttribute("data-page-index",a),p.setAttribute("data-action","tarot-go-to-page"),p.setAttribute("aria-selected",n===a?"true":"false"),p.tabIndex=n===a?0:-1,p.setAttribute("aria-label",`page ${a+1}`),p.id=`carousel-tab-${a+1}`,s&&p.setAttribute("aria-controls",s);const b=document.createElement("span");b.className="tarot-visually-hidden",b.textContent=`slide ${a+1}`,p.appendChild(b),h.appendChild(p),t.dotsList.appendChild(h)}t.updateSelectedDot(),t.navOptions&&t.navOptions.showPagination?t.show():t.hide()}activateDot(t){this.ctx.commands.goToPage(t),this.updateSelectedDot()}updateSelectedDot(){const t=this.paginationContainer.querySelectorAll(".tarot-dots-button"),e=`${this.ctx.store.getState().pageIndex}`;t.forEach(n=>{n.dataset.pageIndex===e?(n.setAttribute("aria-selected","true"),n.tabIndex=0):(n.setAttribute("aria-selected","false"),n.tabIndex=-1)})}show(){this.paginationContainer.parentElement?this.paginationContainer.parentElement.style.display="":this.paginationContainer.style.display=""}hide(){this.paginationContainer.parentElement?this.paginationContainer.parentElement.style.display="none":this.paginationContainer.style.display="none"}destroy(){const t=this;t.paginationContainer&&(t.paginationContainer.removeEventListener("click",t.handlers.paginationClick,!1),t.paginationContainer.removeEventListener("keydown",t.handlers.keyDown,!1)),t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.slidesChanged,t.handlers.slidesChanged),t.ctx.emitter.off(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.debouncedRender&&typeof t.debouncedRender.cancel=="function"&&t.debouncedRender.cancel(),t.isAutoGeneratedNav&&t.paginationContainer&&t.paginationContainer.parentNode&&t.paginationContainer.parentNode.parentNode===t.ctx.carousel&&t.ctx.carousel.removeChild(t.paginationContainer.parentNode),t.paginationContainer=null,t.dotsList=null,t.debouncedRender=null}}class dt{constructor(t){const e=this;e.ctx=t,e.navOptions={},e.scrollbarContainer=null,e.scrollbarTrack=null,e.scrollbarThumb=null,e.snapPointsContainer=null,e.isAutoGeneratedScrollbar=!1,e.isDragging=!1,e.dragStartX=0,e.dragStartThumbPercent=0,e.isUpdatingFromCarousel=!1,e.lastRequestedPercent=null,e.lastRequestedTrackPosition=null,e.rafId=null,e.debouncedRender=e.ctx.utils.debounce(()=>e.render(),20),e.handlers={pointerDown:n=>e.startDrag(n),pointerMove:n=>e.handleDrag(n),pointerUp:n=>e.endDrag(n),scrollbarClick:n=>{if(e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"scrollbar",event:n}),n.target.closest(".tarot-scrollbar-thumb"))return;const i=n.target.closest("[data-page]");if(i){const s=parseInt(i.getAttribute("data-page"),10);e.navigateToPage(s)}else e.navOptions.scrollbarClickToNavigate&&e.handleTrackClick(n)},keyDown:n=>{if(n.target!==e.scrollbarThumb||!["ArrowLeft","ArrowRight","Home","End"].includes(n.key))return;const i=e.ctx.store.getState(),s=e.ctx.store.getOptions();let a=i.pageIndex;switch(n.key){case"ArrowRight":a=i.pageIndex+1,a>=i.pageCount&&(a=s.loop?0:i.pageCount-1);break;case"ArrowLeft":a=i.pageIndex-1,a<0&&(a=s.loop?i.pageCount-1:0);break;case"Home":a=0;break;case"End":a=i.pageCount-1;break;default:return}n.preventDefault(),n.stopPropagation(),e.ctx.emitter.emit(e.ctx.events.user.interacted,{via:"key",event:n}),e.navigateToPage(a)},optionsChanged:()=>{e.reInit()},slidesChanged:()=>{e.reInit()},pageChanged:()=>{e.updateThumbPosition(),e.updateAriaValues()},pageCountChanged:()=>{e.buildSnapPoints(),e.checkVisibility()},windowResize:()=>{e.updateThumbPosition()},trackPositionChanged:n=>{e.handleTrackPositionChanged(n)}},e.init()}convertPercentToTrackPosition(t){const e=this.ctx.store.getState(),n=this.ctx.store.getWidths();return e.pageCount<=1?0:-t/100*((e.pageCount-1)*n.slideAndGap)}convertTrackPositionToPercent(t){const e=this.ctx.store.getState(),n=this.ctx.store.getWidths();if(e.pageCount<=1)return 0;const i=(e.pageCount-1)*n.slideAndGap;return i===0?0:Math.max(0,Math.min(100,Math.abs(t)/i*100))}calculateScrollbarPercent(t){const e=this;if(!e.scrollbarTrack)return 0;const n=e.scrollbarTrack.getBoundingClientRect().width,i=(t.clientX-e.dragStartX)/n*100;let s=e.dragStartThumbPercent+i;return Math.max(0,Math.min(100,s))}handleTrackPositionChanged(t){const e=this;e.isDragging||e.isOurChange(t)||e.updateScrollbarVisualPosition(t.currentTrackPosition)}isOurChange(t){const e=this;return e.lastRequestedTrackPosition!==null&&Math.abs(t.currentTrackPosition-e.lastRequestedTrackPosition)<5}updateScrollbarVisualPosition(t){const e=this;e.rafId&&cancelAnimationFrame(e.rafId),e.rafId=requestAnimationFrame(()=>{const n=e.convertTrackPositionToPercent(t);e.scrollbarThumb.style.left=`${n}%`,e.rafId=null})}bindEvents(){const t=this;t.ctx.emitter.on(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.on(t.ctx.events.store.slidesChanged,t.handlers.slidesChanged),t.ctx.emitter.on(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.ctx.emitter.on(t.ctx.events.store.pageCountChanged,t.handlers.pageCountChanged),t.ctx.emitter.on(t.ctx.events.window.resize,t.handlers.windowResize),t.ctx.emitter.on(t.ctx.events.track.positionChanged,t.handlers.trackPositionChanged),t.scrollbarContainer&&(t.scrollbarContainer.addEventListener("click",t.handlers.scrollbarClick,!1),t.scrollbarContainer.addEventListener("keydown",t.handlers.keyDown,!1),t.scrollbarContainer.addEventListener("pointerdown",t.handlers.pointerDown,!1))}unbindEvents(){const t=this;t.ctx.emitter.off(t.ctx.events.store.optionsChanged,t.handlers.optionsChanged),t.ctx.emitter.off(t.ctx.events.store.slidesChanged,t.handlers.slidesChanged),t.ctx.emitter.off(t.ctx.events.store.pageIndexChanged,t.handlers.pageChanged),t.ctx.emitter.off(t.ctx.events.store.pageCountChanged,t.handlers.pageCountChanged),t.ctx.emitter.off(t.ctx.events.window.resize,t.handlers.windowResize),t.ctx.emitter.off(t.ctx.events.track.positionChanged,t.handlers.trackPositionChanged),t.scrollbarContainer&&(t.scrollbarContainer.removeEventListener("click",t.handlers.scrollbarClick,!1),t.scrollbarContainer.removeEventListener("keydown",t.handlers.keyDown,!1),t.scrollbarContainer.removeEventListener("pointerdown",t.handlers.pointerDown,!1)),document.removeEventListener("pointermove",t.handlers.pointerMove,!1),document.removeEventListener("pointerup",t.handlers.pointerUp,!1)}init(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.isAutoGeneratedScrollbar=!1,t.queryScrollbarContainer(),t.scrollbarContainer&&(t.buildScrollbar(),t.bindEvents(),t.render())}reInit(){const t=this;t.navOptions=t.ctx.store.getOptions().navigation||{},t.debouncedRender()}queryScrollbarContainer(){const t=this;if(t.navOptions&&t.navOptions.scrollbarSelector){const e=document.querySelector(t.navOptions.scrollbarSelector);if(e)return void(t.scrollbarContainer=e)}!t.scrollbarContainer&&t.navOptions.showScrollbar&&(t.isAutoGeneratedScrollbar=!0,t.scrollbarContainer=document.createElement("div"),t.ctx.carousel.appendChild(t.scrollbarContainer))}buildScrollbar(){const t=this;if(!t.scrollbarContainer)return;t.scrollbarContainer.innerHTML="",t.scrollbarContainer.classList.add("tarot-scrollbar"),t.scrollbarContainer.classList.add(`tarot-scrollbar--${t.navOptions.scrollbarPosition||"bottom"}`),t.scrollbarContainer.classList.add(`tarot-scrollbar--${t.navOptions.scrollbarSize||"normal"}`);const e=t.ctx.carousel.id||"";t.scrollbarContainer.setAttribute("role","scrollbar"),t.scrollbarContainer.setAttribute("aria-orientation","horizontal"),t.scrollbarContainer.setAttribute("aria-label","Carousel navigation"),e&&t.scrollbarContainer.setAttribute("aria-controls",e),t.scrollbarTrack=document.createElement("div"),t.scrollbarTrack.classList.add("tarot-scrollbar-track"),t.navOptions.scrollbarShowSnapPoints&&(t.snapPointsContainer=document.createElement("div"),t.snapPointsContainer.classList.add("tarot-scrollbar-snap-points"),t.scrollbarTrack.appendChild(t.snapPointsContainer)),t.scrollbarThumb=document.createElement("div"),t.scrollbarThumb.classList.add("tarot-scrollbar-thumb"),t.scrollbarThumb.setAttribute("role","slider"),t.scrollbarThumb.setAttribute("tabindex","0"),t.scrollbarThumb.setAttribute("aria-label","Navigation thumb"),t.scrollbarTrack.appendChild(t.scrollbarThumb),t.scrollbarContainer.appendChild(t.scrollbarTrack)}buildSnapPoints(){const t=this;if(!t.snapPointsContainer)return;const e=t.ctx.store.getState().pageCount;t.snapPointsContainer.innerHTML="";for(let n=0;n<e;n++){const i=document.createElement("div");i.classList.add("tarot-scrollbar-snap-point"),i.setAttribute("data-page",n),i.setAttribute("aria-label",`Go to page ${n+1}`);const s=e>1?n/(e-1)*100:0;i.style.left=`${s}%`,t.snapPointsContainer.appendChild(i)}}render(){const t=this;t.checkVisibility()?(t.show(),t.buildSnapPoints(),t.updateThumbPosition(),t.updateAriaValues()):t.hide()}checkVisibility(){const t=this,e=t.ctx.store.getState();return!!t.navOptions.showScrollbar&&!(t.navOptions.scrollbarAutoHide&&e.pageCount<=1)}show(){const t=this;t.scrollbarContainer&&(t.scrollbarContainer.style.display="")}hide(){const t=this;t.scrollbarContainer&&(t.scrollbarContainer.style.display="none")}updateThumbPosition(){const t=this;if(!t.scrollbarThumb)return;const e=t.ctx.store.getState(),n=e.pageCount>1?e.pageIndex/(e.pageCount-1)*100:0;t.scrollbarThumb.style.left=`${n}%`}updateAriaValues(){const t=this;if(!t.scrollbarThumb)return;const e=t.ctx.store.getState();t.scrollbarThumb.setAttribute("aria-valuemin","0"),t.scrollbarThumb.setAttribute("aria-valuemax",Math.max(0,e.pageCount-1)),t.scrollbarThumb.setAttribute("aria-valuenow",e.pageIndex),t.scrollbarThumb.setAttribute("aria-label",`Page ${e.pageIndex+1} of ${e.pageCount}`)}handleTrackClick(t){const e=this;if(!e.scrollbarTrack)return;const n=e.scrollbarTrack.getBoundingClientRect(),i=t.clientX-n.left,s=n.width,a=Math.max(0,Math.min(100,i/s*100)),h=e.ctx.store.getState(),p=Math.round(a/100*(h.pageCount-1));e.navigateToPage(p)}navigateToPage(t){this.ctx.commands.goToPage(t)}startDrag(t){const e=this;if(!e.navOptions.scrollbarDragToNavigate||!t.target.closest(".tarot-scrollbar-thumb"))return;t.preventDefault(),e.isDragging=!0,e.dragStartX=t.clientX;const n=e.ctx.store.getState();e.dragStartThumbPercent=n.pageCount>1?n.pageIndex/(n.pageCount-1)*100:0,document.addEventListener("pointermove",e.handlers.pointerMove,!1),document.addEventListener("pointerup",e.handlers.pointerUp,!1),e.scrollbarThumb.setPointerCapture&&e.scrollbarThumb.setPointerCapture(t.pointerId),e.scrollbarContainer.classList.add("tarot-scrollbar--dragging")}handleDrag(t){const e=this;if(!e.isDragging||!e.scrollbarTrack)return;t.preventDefault();const n=e.calculateScrollbarPercent(t),i=e.convertPercentToTrackPosition(n);e.scrollbarThumb.style.left=`${n}%`,e.ctx.commands.requestTrackPosition(`${i}px`),e.lastRequestedPercent=n,e.lastRequestedTrackPosition=i}endDrag(t){const e=this;if(!e.isDragging)return;e.isDragging=!1,document.removeEventListener("pointermove",e.handlers.pointerMove,!1),document.removeEventListener("pointerup",e.handlers.pointerUp,!1),e.scrollbarThumb.releasePointerCapture&&e.scrollbarThumb.releasePointerCapture(t.pointerId),e.scrollbarContainer.classList.remove("tarot-scrollbar--dragging");const n=e.ctx.store.getState();e.ctx.commands.goToPage(n.pageIndex),setTimeout(()=>{e.lastRequestedPercent=null,e.lastRequestedTrackPosition=null},100)}destroy(){const t=this;t.unbindEvents(),t.debouncedRender&&typeof t.debouncedRender.cancel=="function"&&t.debouncedRender.cancel(),t.rafId&&(cancelAnimationFrame(t.rafId),t.rafId=null),t.isAutoGeneratedScrollbar&&t.scrollbarContainer&&t.scrollbarContainer.parentNode===t.ctx.carousel&&t.ctx.carousel.removeChild(t.scrollbarContainer),t.scrollbarContainer=null,t.scrollbarTrack=null,t.scrollbarThumb=null,t.snapPointsContainer=null,t.debouncedRender=null}}class X extends HTMLElement{static effects={carousel:et,fade:nt};static plugins=[it,st,rt,ot,at,lt,dt];static instanceCount=0;static registerEffect(t){if(!t)return void console.warn("tarot-carousel.registerEffect requires an effect class");let e=t.effectName;if(!e)return void console.warn("tarot-carousel.registerEffect: effect must have a static string id (e.g., effectName)");const n=String(e).trim().toLowerCase().replace(/effect$/,"");this.effects[n]&&console.warn(`tarot-carousel: overwriting existing effect '${n}'`),this.effects[n]=t;try{typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("tarot:effect-registered",{detail:{effectName:n}}))}catch{}}static use(t){const e=this;return e.plugins||(e.plugins=[]),e.plugins.push(t),e}#t;#e;#n;#i;#r;#s;#a;#o;#l;#d;#p;#c=[];#h;#u;#g;constructor(){super();const t=this;t.id||(t.id=`tarot-carousel-${X.instanceCount}`),X.instanceCount++,t.#t=new g,t.#e=new N(t.#t)}async connectedCallback(){const t=this;customElements.get("tarot-slide")||(await customElements.whenDefined("tarot-slide"),await new Promise(requestAnimationFrame)),t.#x(),t.setAttribute("tabindex","0"),t.#n=t.#v();const e=t.#n;t.#a=new u(e),t.#d=new A(e),t.#s=new x(e),t.#o=new r(e,t.constructor.effects),t.#l=new c(e),t.#r=new m(e),t.#i=new k(e,t.#r),t.#p=new z(e),t.#y(),t.#o.loadCurrentEffect(),t.#f(),t.constructor.plugins.forEach(i=>{try{const s=new i(e);t.#c.push(s)}catch(s){console.error(`plugin ${i?.name||"(anonymous)"} failed to initialize:`,s)}});const n=t.#e.getOptions().initialIndex??0;t.jumpToSlide(n),t.#p.requestFrame()}#v(){const t=this;return Object.freeze({emitter:t.#t,events:d,store:t.#e,utils:U,carousel:t,viewport:t.#h,track:t.#u,announcements:t.#g,commands:{goToSlide:(e,n=0)=>t.goToSlide(e,n),jumpToSlide:e=>t.jumpToSlide(e),next:(e=0)=>t.next(e),prev:(e=0)=>t.prev(e),goToPage:(e,n=0)=>t.goToPage(e,n),jumpToPage:e=>t.jumpToPage(e),requestTrackPosition:e=>t.requestTrackPosition(e),getEffect:()=>t.#o.getEffect(),getSlideManager:()=>t.#s,getTrackManager:()=>t.#i,requestFrame:()=>t.#p.requestFrame(0)}})}#x(){const t=this;let e=t.querySelector(":scope tarot-viewport"),n=t.querySelector(":scope tarot-slides");if(!e&&!n)throw new Error("tarot-carousel: missing both <tarot-viewport> and <tarot-slides> elements");if(n&&!e&&(e=document.createElement("tarot-viewport"),n.parentNode.insertBefore(e,n),e.appendChild(n)),e&&!n){for(n=document.createElement("tarot-slides");e.firstChild;)n.appendChild(e.firstChild);e.appendChild(n)}const i=document.createElement("div");i.className="tarot-visually-hidden tarot-announcements",i.id=`tarot-announcements-${t.id}`,i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),t.insertBefore(i,t.firstChild),t.#h=e,t.#u=n,t.#g=i}#y(){const t=this,{emitter:e,events:n,store:i}=t.#n;e.on(n.store.optionsChanged,({currentOptions:s})=>{t.#f(s),t.#o.reInit(),t.jumpToSlide(i.getState().renderIndex)}),e.on(n.window.resize,()=>{t.#f(i.getOptions()),t.#o.reInit(),t.jumpToSlide(i.getState().renderIndex)}),e.on(n.slides.click,({index:s})=>{t.#e.setState({selectedIndex:s}),t.#e.getOptions().goToSelectedSlide&&t.goToSlide(s)}),e.on(n.keyboard.arrow,({direction:s})=>{s===-1?t.prev():t.next()})}#f(t){const e=this,n=t||e.#e.getOptions(),i=e.#e.getSlides(),s=function({viewportEl:p,options:b,slideCount:y}){const P=p.offsetWidth||0,R=Math.max(1,Number(b.slidesPerView)||1),M=q(b.gap,P),F=q(b.paddingLeft,P),O=q(b.paddingRight,P),L=F+O,B=M*(R-1),S=Math.max(0,P-B-L);let C=R>0?Math.round(S/R*1e3)/1e3:0;const I=q(b.slideMinWidth,C);return C<I&&(C=I),{viewport:P,track:Math.max(0,y)*(C+M),slide:C,slideMin:I,gap:M,slideAndGap:Math.round(1e3*(C+M))/1e3,paddingLeft:F,paddingRight:O}}({viewportEl:e.#h,options:n,slideCount:i.length});e.#e.setWidths(s);const a=function(p){const{store:b}=p,y=b.getWidths(),P=b.getOptions(),R=y.slide/2,M=y.slideAndGap,F=P.slidesPerView,O=y.paddingLeft+R,L={CL1:O};for(let S=1;S<=F;S++)L[`CL${S}`]=O+M*(S-1);for(let S=1;S<=F;S++){const C=F-S+1;L[`CR${S}`]=L[`CL${C}`]}L.C=F===1?L.CL1:(L.CL1+L[`CL${F}`])/2;for(let S=1;S<=10;S++)L[`L${S}`]=O-M*S;const B=L[`CL${F}`];for(let S=1;S<=10;S++)L[`R${S}`]=B+M*S;return L}(e.#n);e.#e.setTransformPoints(a);const h=function({loop:p,slidesPerMove:b,slidesPerView:y,slideCount:P}){if(p)return Math.max(1,Math.ceil(P/b));if(P<=y)return 1;const R=P-y;return Math.ceil(R/b)+1}({loop:n.loop,slidesPerMove:n.slidesPerMove,slidesPerView:n.slidesPerView,slideCount:i.length});e.#e.setState({pageCount:h})}next(t=0){this.goToPage(this.state.pageIndex+1,t)}prev(t=0){this.goToPage(this.state.pageIndex-1,t)}goToSlide(t,e=0){if(t===void 0)return;const n=this,i=n.#e.getState(),s=n.#e.getSlides(),a=i.slideCount??s.length;if(t<0){const h=n.#e.getOptions();t=h.loop?(t%a+a)%a:0,h.loop||e||(e=10)}else if(t>=a){const h=n.#e.getOptions();t=h.loop?t%a:a-1,h.loop||e||(e=-10)}n.#e.setState({renderIndex:t,pageIndex:n.#b(t)}),n.#t.emit(d.animation.requested,{index:t,velocity:e,type:"animate"})}jumpToSlide(t){if(t===void 0)return;const e=this,n=e.#e.getState(),i=e.#e.getSlides(),s=(n.slideCount??i.length)-1;if(t<0||t>s)throw new Error(`slide index ${t} is out of bounds. valid range is 0 to ${s}.`);e.#e.setState({renderIndex:t,pageIndex:e.#b(t)}),e.#t.emit(d.animation.requested,{index:t,velocity:0,type:"jump"})}goToPage(t,e=0){if(t===void 0)return;const n=this,i=n.#e.getState(),s=n.#e.getOptions();t<0?(t=s.loop?(t%i.pageCount+i.pageCount)%i.pageCount:0,s.loop||e||(e=10)):t>=i.pageCount&&(t=s.loop?0:i.pageCount-1,s.loop||e||(e=-10));const a=t*(s.slidesPerMove??1);n.goToSlide(a,e)}jumpToPage(t){if(t===void 0)return;const e=this,n=e.#e.getState(),i=e.#e.getOptions();t<0?t=i.loop?(t%n.pageCount+n.pageCount)%n.pageCount:0:t>=n.pageCount&&(t=i.loop?0:n.pageCount-1);const s=t*(i.slidesPerMove??1);e.jumpToSlide(s)}requestTrackPosition(t){const e=this;if(t==null)return;e.#e.getState(),e.#e.getOptions();let n=0;if(typeof t=="string")if(t.endsWith("px"))n=parseFloat(t.replace("px",""));else if(t.endsWith("%")){const i=parseFloat(t.replace("%",""));n=e.#m(i)}else{const i=parseFloat(t);n=e.#m(i)}else{if(typeof t!="number")return void console.warn("requestTrackPosition: invalid position type",t);n=e.#m(t)}e.#t.emit(d.animation.requested,{trackPosition:n,velocity:0,type:"jump"})}#m(t){const e=this,n=e.#e.getState(),i=e.#e.getOptions();if(t=Math.max(0,Math.min(100,t)),n.pageCount<=1)return 0;const s=(n.pageCount-1)*(i.slidesPerMove??1);return t/100*e.#i.getTrackPosForIndex(s)}#b(t){const e=this.#e.getOptions().slidesPerMove??1;return Math.floor(t/e)}get state(){return this.#e.getState()}get slides(){return this.#e.getSlides()}get options(){return this.#e.getOptions()}get viewport(){return this.#h}get track(){return this.#u}getEffects(){return Object.keys(this.constructor.effects)}getUserOptions(){return this.#a.getUserOptions?.()}getIndex(){return this.state.renderIndex}getPage(){return this.state.pageIndex}getSelectedIndex(){return this.state.selectedIndex}setSelectedIndex(t){const e=this.#e.getSlides().length;t<0||t>=e?console.warn(`setSelectedIndex: index ${t} out of bounds (0-${e-1})`):this.#e.setState({selectedIndex:t})}getSelectedSlide(){return this.#e.getSlides()[this.state.selectedIndex]}getSlideAtIndex(t){return this.#e.getSlides()[t]}updateOptions(t){this.#a.updateOptions?.(t)}on(t,e){this.#t.on(t,e)}off(t,e){this.#t.off(t,e)}_emit(t,...e){this.#t.emit(t,...e)}destroy(){const t=this;t.#c.forEach(e=>e?.destroy?.()),t.#c.length=0,t.#i?.destroy?.(),t.#o?.destroy?.(),t.#s?.destroy?.(),t.#l?.destroy?.(),t.#d?.destroy?.(),t.#p?.destroy?.(),t.#g?.parentNode&&t.#g.parentNode.removeChild(t.#g),t.#g=null,t.#t?.removeAllListeners?.()}}class ct extends HTMLElement{constructor(){super()}}class ht extends HTMLElement{constructor(){super()}}class ut extends HTMLElement{constructor(){super(),this.index=0,this.renderIndex=0,this.selected=!1,this.trackPosition=0,this.renderPosition=0,this.centerPoint=0}}class pt extends HTMLElement{constructor(){super()}}class gt extends HTMLElement{constructor(){super()}}customElements.define("tarot-viewport",ct),customElements.define("tarot-slides",ht),customElements.define("tarot-slide",ut),customElements.define("tarot-content",pt),customElements.define("tarot-slide-icon",gt),customElements.define("tarot-carousel",X),E.Tarot=X,E.TarotEffect=Q,E.default=X,Object.defineProperty(E,"__esModule",{value:!0})});/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/(function(E,g){typeof J=="object"&&typeof _<"u"?_.exports=g(require("@magic-spells/tarot")):typeof define=="function"&&define.amd?define(["@magic-spells/tarot"],g):(E=typeof globalThis<"u"?globalThis:E||self).RippleEffect=g(E.Tarot)})(void 0,function(E){class g{#t=0;#e=0;constructor(r,d){this.ctx=r,this.effect=d}init(){this.reInit()}reInit(){const r=this;r.options=r.ctx.store.getOptions();const d=r.ctx.store.getWidths();r.viewportWidth=d.viewport,r.gapWidth=d.gap,r.slideWidth=d.slide,r.slideAndGapWidth=d.slideAndGap,r.trackStartPos=d.paddingLeft,r.trackEndPos=d.viewport-d.track+d.gap-d.paddingRight}setMaxValue(r){this.#e=r}addAmount(r,d=0){const u=this;if(!(!u.options.loop&&(d>u.trackStartPos||d<u.trackEndPos)))return!u.options.loop&&r>0&&d>-1*u.slideWidth||!u.options.loop&&r<0&&d<u.trackEndPos+u.slideAndGapWidth?u.#t-=r:u.#t+=r,u.#t<0?u.#t=0:u.#t>u.#e&&(u.#t=u.#e),u.#t}getPercent(){return this.#e>0?this.#t/this.#e:0}snapToValue(r,d){const u=this;if(u.#t===0||u.#t===u.#e)return;const x=1.25*Math.abs(r);u.#t>u.#e/2?u.addAmount(x,d):u.addAmount(-x,d)}destroy(){const r=this;r.ctx=null,r.effect=null,r.handlers=null}}class T{constructor(r){const d=this,{name:u,color:x,property:v}=r;d.enabled=!0,d.name=u,d.property=v}updateOptions({startPos:r,endPos:d,startValue:u,endValue:x,enabled:v=!0}){Object.assign(this,{enabled:v,startPos:r,endPos:d,startValue:u,endValue:x})}applyTransform(r,d,u){const x=this;if(!x.enabled||d===0)return;function v(W){return Math.round(2*W)/2}const m=v((u*=-1)+x.startPos),k=v(u+x.endPos),A=v(r.centerPoint||0);let w=0;if(m>k?A>=k&&A<=m&&(w=(A-k)/(m-k)):A>=m&&A<k&&(w=1-(A-m)/(k-m)),w<=0)return;const D=w*(x.startValue-x.endValue),$=d*(x.endValue+D);r[x.property]+=$}destroy(){const r=this;r.enabled=!1,r.name=null,r.property=null,r.startPos=null,r.endPos=null,r.startValue=null,r.endValue=null}}class o{constructor(r){const d=this;d.ctx=r,d.paddingLeftWidth=0,d.slideMinWidth=0,d.handlers={windowResize:()=>d.reInit(),optionsChanged:()=>d.reInit()},d.leftEndToMin=new T({property:"leftWidthTrimmed"}),d.leftMinToSquished=new T({property:"leftWidthTrimmed"}),d.leftSquishedToFull=new T({property:"leftWidthTrimmed"}),d.leftFullToMin=new T({property:"leftWidthTrimmed"}),d.leftFullToMinEnd=new T({property:"leftWidthTrimmed"}),d.rightEndToMin=new T({name:"right width end",property:"rightWidthTrimmed"}),d.rightMinToSquished=new T({property:"rightWidthTrimmed"}),d.rightSquishedToFull=new T({property:"rightWidthTrimmed"}),d.rightFullToMin=new T({property:"rightWidthTrimmed"}),d.rightFullToMinEnd=new T({property:"rightWidthTrimmed"})}init(){this.bindEvents(),this.reInit()}reInit(){const r=this,d=r.ctx.store.getWidths();r.viewportWidth=d.viewport,r.paddingLeftWidth=d.paddingLeft,r.paddingRightWidth=d.paddingRight,r.slideWidth=d.slide,r.gapWidth=d.gap,r.slideMinWidth=d.slideMin,r.trackWidth=d.track,r.shiftAmount=d.slideMin+d.gap,r.calculateTransformPoints()}bindEvents(){const r=this;r.ctx.emitter.on(r.ctx.events.window.resize,r.handlers.windowResize),r.ctx.emitter.on(r.ctx.events.store.optionsChanged,r.handlers.optionsChanged)}calculateTransformPoints(){const r=this,d=r.slideWidth/2,u=r.slideWidth,x=r.slideWidth+r.gapWidth,v=r.slideMinWidth,m=-1*(u-v),k=-1*(r.gapWidth+v),A=d+r.paddingLeftWidth,w=A-x,D=A-u+v,$=A+x;r.leftEndToMin.updateOptions({startPos:w-r.trackWidth,endPos:w,startValue:m,endValue:m}),r.leftMinToSquished.updateOptions({startPos:w,endPos:A,startValue:m,endValue:k}),r.leftSquishedToFull.updateOptions({startPos:A,endPos:$,startValue:k,endValue:0}),r.leftFullToMin.updateOptions({startPos:D,endPos:A,startValue:m,endValue:0}),r.leftFullToMinEnd.updateOptions({startPos:D-r.trackWidth,endPos:D,startValue:m,endValue:m});const W=r.viewportWidth-d-r.paddingRightWidth,z=W-x,N=W+x,q=N+r.trackWidth,U=W+u-v;r.shiftAmount,r.rightSquishedToFull.updateOptions({startPos:W,endPos:z,startValue:k,endValue:0}),r.rightMinToSquished.updateOptions({startPos:N,endPos:W,startValue:m,endValue:k}),r.rightEndToMin.updateOptions({startPos:q,endPos:N,startValue:m,endValue:m}),r.rightFullToMin.updateOptions({startPos:U,endPos:W,startValue:m,endValue:0}),r.rightFullToMinEnd.updateOptions({startPos:U+r.trackWidth,endPos:U,startValue:m,endValue:m})}applyTransforms(r,d,u,x){const v=this;v.leftEndToMin.applyTransform(r,u,d),v.leftMinToSquished.applyTransform(r,u,d),v.leftSquishedToFull.applyTransform(r,u,d),v.leftFullToMin.applyTransform(r,1-u,d),v.leftFullToMinEnd.applyTransform(r,1-u,d),v.rightEndToMin.applyTransform(r,1-u,d),v.rightMinToSquished.applyTransform(r,1-u,d),v.rightSquishedToFull.applyTransform(r,1-u,d),v.rightFullToMin.applyTransform(r,u,d),v.rightFullToMinEnd.applyTransform(r,u,d),r.leftWidthTrimmed<0&&(r.leftWidthTrimmed=Math.abs(r.leftWidthTrimmed)),r.rightWidthTrimmed<0&&(r.rightWidthTrimmed=Math.abs(r.rightWidthTrimmed))}destroy(){const r=this;r.ctx.emitter.off(r.ctx.events.window.resize,r.handlers.windowResize),r.ctx.emitter.off(r.ctx.events.store.optionsChanged,r.handlers.optionsChanged),r.leftEndToMin?.destroy(),r.leftMinToSquished?.destroy(),r.leftSquishedToFull?.destroy(),r.leftFullToMin?.destroy(),r.leftFullToMinEnd?.destroy(),r.rightEndToMin?.destroy(),r.rightMinToSquished?.destroy(),r.rightSquishedToFull?.destroy(),r.rightFullToMin?.destroy(),r.rightFullToMinEnd?.destroy(),r.ctx=null,r.handlers=null}}class l extends E.TarotEffect{static effectName="ripple";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:2,right:2}};constructor(r){super(r);const d=this;d.ctx=r,d.rippleWindow=new g(r,d),d.rippleTransforms=new o(r,d),d.init()}init(){this.rippleWindow.init(),this.rippleTransforms.init()}reInit(){this.rippleWindow.reInit(),this.rippleTransforms.reInit()}render(r,d){const u=this,{slides:x,widths:v,animation:m}=r;u.rippleWindow.setMaxValue(v.slide-v.slideMin),u.renderTrackWidth(v.track),u.renderTrackPosition(m),u.renderSlideWidth(v.slide);const k=m.trackPosition,A=m.trackDelta||0,w=m.type||"jump",D=m.progress||1;(w==="animate"||w==="drag")&&D<=1&&u.rippleWindow.addAmount(A,k),(w==="settle"||w==="animate"&&D>.75)&&u.rippleWindow.snapToValue(A,k);const $=u.rippleWindow.getPercent();let W,z=0;for(let q=0,U=x.length;q<U;++q){W=x[q],W.rightWidthTrimmed=0,W.leftWidthTrimmed=0,u.rippleTransforms.applyTransforms(W,k,$,r);const Q=v.slide-W.rightWidthTrimmed-W.leftWidthTrimmed;W.style.transition="none",W.style.width=`${Q}px`,W.renderPosition=W.trackPosition-z,z+=W.rightWidthTrimmed}let N=0;for(let q=x.length-1;q>=0;--q)W=x[q],N+=W.leftWidthTrimmed,W.renderPosition+=N,W.style.transform=`translateX(${W.renderPosition}px)`}destroy(){super.destroy();const r=this;r.rippleWindow?.destroy(),r.rippleTransforms?.destroy();const d=r.ctx.store.getSlides()||[];for(let u=0,x=d.length;u<x;++u){const v=d[u];v&&v.style&&(v.removeAttribute("aria-hidden"),v.style.width="",v.style.transform="",v.style.transition="")}r.rippleWindow=null,r.rippleTransforms=null}}return E.Tarot!==void 0&&E.Tarot.registerEffect(l),l});/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/(function(E,g){typeof J=="object"&&typeof _<"u"?_.exports=g(require("@magic-spells/tarot")):typeof define=="function"&&define.amd?define(["@magic-spells/tarot"],g):(E=typeof globalThis<"u"?globalThis:E||self).ButterflyEffect=g(E.Tarot)})(void 0,function(E){class g extends E.TarotEffect{static effectName="butterfly";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:2,right:2}};constructor(o){super(o);const l=this;l.stepsLeft=3,l.stepsRight=3,l.L1Scale=.85,l.L2Scale=.7,l.L3Scale=.7,l.L1Angle=0,l.L2Angle=0,l.L3Angle=0,l.slideWidth=0,l.gapWidth=0,l.slideAndGapWidth=0,l.init()}init(){super.init()}reInit(){super.reInit()}calculateWidths(o){const l=this;l.viewportWidth=o.viewport,l.slideWidth=l.viewportWidth/2,l.gapWidth=o.gap,l.slideAndGapWidth=l.slideWidth+l.gapWidth,l.ctx.viewport.style.setProperty("--tarot-slide-width",`${l.slideWidth}px`);const c=l.slideWidth/2-2*l.gapWidth,r=l.slideWidth*l.L1Scale,d=l.slideWidth*l.L2Scale,u=l.slideWidth*l.L3Scale,x=.6*c,v=.4*c,m=.4*c;l.L1Angle=l.getAngleFromFinalWidth(r,x),l.L2Angle=l.getAngleFromFinalWidth(d,v),l.L3Angle=l.getAngleFromFinalWidth(u,m)}getRotatedWidth(o,l,c=1500){const r=o*Math.PI/180;return l*Math.cos(r)/(1+l*Math.sin(r)/c)}getAngleFromFinalWidth(o,l,c=1500){if(l>=o)return 0;if(l<=0||o<=0||c<=0)return null;const r=o*l/c,d=o*o+r*r,u=2*l*r,x=u*u-4*d*(l*l-o*o);if(x<0)return null;const v=Math.sqrt(x),m=(-u+v)/(2*d),k=(-u-v)/(2*d),A=m>=0&&m<=1?m:k>=0&&k<=1?k:null;return A===null?null:180*Math.asin(A)/Math.PI}applyL1(o,l){const c=this.L1Scale+(1-this.L1Scale)*l,r=this.L1Angle*(1-l);o.style.transformOrigin="left center",o._scaleTransform=`scale(${c})`,o._rotateTransform=`rotateY(${r}deg)`,o.leftWidthTrimmed=this.slideWidth-this.getRotatedWidth(r,this.slideWidth*c)}applyL2(o,l){const c=1-l,r=this.L1Scale+(this.L2Scale-this.L1Scale)*c,d=this.L1Angle+(this.L2Angle-this.L1Angle)*c;o.style.transformOrigin="left center",o._scaleTransform=`scale(${r})`,o._rotateTransform=`rotateY(${d}deg)`,o.leftWidthTrimmed=this.slideWidth-this.getRotatedWidth(d,this.slideWidth*r)}applyL3(o,l){const c=1-l,r=this.L2Scale+(this.L3Scale-this.L2Scale)*c,d=this.L2Angle+(this.L3Angle-this.L2Angle)*c;o.style.transformOrigin="left center",o._scaleTransform=`scale(${r})`,o._rotateTransform=`rotateY(${d}deg)`,o.leftWidthTrimmed=this.slideWidth-this.getRotatedWidth(d,this.slideWidth*r)}applyR1(o,l){const c=1+(this.L1Scale-1)*l,r=this.L1Angle*l;o.style.transformOrigin="right center",o._scaleTransform=`scale(${c})`,o._rotateTransform=`rotateY(-${r}deg)`,o.rightWidthTrimmed=this.slideWidth-this.getRotatedWidth(r,this.slideWidth*c)}applyR2(o,l){const c=this.L1Scale+(this.L2Scale-this.L1Scale)*l,r=this.L1Angle+(this.L2Angle-this.L1Angle)*l;o.style.transformOrigin="right center",o._scaleTransform=`scale(${c})`,o._rotateTransform=`rotateY(-${r}deg)`,o.rightWidthTrimmed=this.slideWidth-this.getRotatedWidth(r,this.slideWidth*c)}applyR3(o,l){const c=this.L2Scale+(this.L3Scale-this.L2Scale)*l,r=this.L2Angle+(this.L3Angle-this.L2Angle)*l;o.style.transformOrigin="right center",o._scaleTransform=`scale(${c})`,o._rotateTransform=`rotateY(-${r}deg)`,o.rightWidthTrimmed=this.slideWidth-this.getRotatedWidth(r,this.slideWidth*c)}render(o,l){const c=this,{slides:r,widths:d,animation:u}=o;c.calculateWidths(d),c.renderSlideWidth(c.slideWidth),c.renderTrackPosition(u);const x=[...r];for(let k=0,A=x.length;k<A;k++){const w=x[k];w.leftWidthTrimmed=0,w.rightWidthTrimmed=0,w._scaleTransform="",w._rotateTransform="";const D=l.isSlideInRange(w,"CL1","L1");if(D.isInRange){c.applyL1(w,D.percent);continue}const $=l.isSlideInRange(w,"L1","L2");if($.isInRange){c.applyL2(w,$.percent);continue}const W=l.isSlideInRange(w,"L2","L3");if(W.isInRange){c.applyL3(w,W.percent);continue}const z=l.isSlideInRange(w,"CR1","R1");if(z.isInRange){c.applyR1(w,z.percent);continue}const N=l.isSlideInRange(w,"R1","R2");if(N.isInRange){c.applyR2(w,N.percent);continue}const q=l.isSlideInRange(w,"R2","R3");q.isInRange&&c.applyR3(w,q.percent)}let v=0;for(let k=0,A=x.length;k<A;k++){const w=x[k];v+=w.rightWidthTrimmed||0,w.renderPosition=w.trackPosition-v}let m=0;for(let k=x.length-1;k>=0;k--){const A=x[k];m+=A.leftWidthTrimmed||0,A.renderPosition+=m,A.style.transform=`translateX(${A.renderPosition}px) perspective(1500px) ${A._scaleTransform||""} ${A._rotateTransform||""}`}}destroy(){const o=this;o.ctx?.viewport?.style&&o.ctx.viewport.style.removeProperty("--tarot-slide-width"),super.destroy()}}return E.Tarot!==void 0&&E.Tarot.registerEffect(g),g});/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/(function(E,g){typeof J=="object"&&typeof _<"u"?_.exports=g(require("@magic-spells/tarot")):typeof define=="function"&&define.amd?define(["@magic-spells/tarot"],g):(E=typeof globalThis<"u"?globalThis:E||self).PeacockEffect=g(E.Tarot)})(void 0,function(E){class g extends E.TarotEffect{static effectName="peacock";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1,loopBuffer:{left:2,right:2}};constructor(o){super(o);const l=this;l.viewportWidth=0,l.percentMargin=.18,l.leftMargin=0,l.rightMargin=0,l.availableWidth=0,l.featherRotation=8,l.featherScale=.86,l.init()}init(){super.init()}reInit(){super.reInit()}calculateLayout(){const o=this;o.leftMargin=o.viewportWidth*o.percentMargin,o.rightMargin=o.viewportWidth*o.percentMargin,o.availableWidth=o.viewportWidth-o.leftMargin-o.rightMargin,o.availableWidth<200&&(o.availableWidth=200,o.leftMargin=(o.viewportWidth-o.availableWidth)/2,o.rightMargin=o.leftMargin)}render(o,l){const c=this,{slides:r,widths:d,animation:u}=o;c.viewportWidth=d.viewport,c.calculateLayout(),c.gap=d.gap||0,c.featherWidth=(c.availableWidth-c.gap)/2,c.renderSlideWidth(c.availableWidth);for(let x=0,v=r.length;x<v;x++){const m=r[x],k=l.isSlideInRange(m,"L2","L3");if(k.isInRange){c.applyLeftFeather3(m,k.percent);continue}if(l.isSlideInRange(m,"L3","L+").isInRange){c.applyHiddenState(m);continue}const A=l.isSlideInRange(m,"L1","L2");if(A.isInRange){c.applyLeftFeather2(m,A.percent);continue}const w=l.isSlideInRange(m,"CL1","L1");if(w.isInRange){if(w.percent>=.5){c.applyLeftFeather0(m,(w.percent-.5)/.5);continue}c.applyLeftFeather1(m,w.percent/.5);continue}const D=l.isSlideInRange(m,"CL1","CR1");if(D.isInRange){c.applyCenterSlide(m,D.percent);continue}const $=l.isSlideInRange(m,"CR1","R1");if($.isInRange){if($.percent<.5){c.applyRightFeather0(m,$.percent/.5);continue}c.applyRightFeather1(m,($.percent-.5)/.5);continue}const W=l.isSlideInRange(m,"R1","R2");if(W.isInRange){c.applyRightFeather2(m,W.percent);continue}const z=l.isSlideInRange(m,"R2","R3");if(z.isInRange){c.applyRightFeather3(m,z.percent);continue}l.isSlideInRange(m,"R3","R+").isInRange,c.applyHiddenState(m)}}applyLeftFeather3(o,l){const c=this.leftMargin,r=this.featherWidth,d=this.featherRotation+this.featherRotation*this.featherScale,u=d+.5*this.featherRotation,x=-(u+(d-u)*l),v=this.featherScale*this.featherScale*this.featherScale,m=v+(this.featherScale*this.featherScale*.9-v)*l,k=l>.5?1:l/.5*1;o.style.transform=`translate3d(${c}px, 0px, 0px) rotate(${x}deg) scale(${m})`,o.style.transformOrigin="left bottom",o.style.zIndex=0,o.style.opacity=k,o.style.display="block",o.style.width=`${r}px`}applyLeftFeather2(o,l){const c=this.leftMargin,r=this.featherWidth,d=this.featherRotation+this.featherRotation*this.featherScale,u=-(d+(this.featherRotation-d)*l),x=this.featherScale*this.featherScale*.9,v=x+(this.featherScale-x)*l;o.style.transform=`translate3d(${c}px, 0px, 0px) rotate(${u}deg) scale(${v})`,o.style.transformOrigin="left bottom",o.style.zIndex=1,o.style.opacity=1,o.style.display="block",o.style.width=`${r}px`}applyLeftFeather1(o,l){const c=this.leftMargin,r=this.featherWidth,d=-this.featherRotation*(1-l),u=this.featherScale+(1-this.featherScale)*l;o.style.transform=`translate3d(${c}px, 0px, 0px) rotate(${d}deg) scale(${u})`,o.style.transformOrigin="left bottom",o.style.zIndex=2,o.style.opacity=1,o.style.display="block",o.style.width=`${r}px`}applyLeftFeather0(o,l){const c=this.leftMargin,r=this.featherWidth+(this.availableWidth-this.featherWidth)*l;o.style.transform=`translate3d(${c}px, 0px, 0px)`,o.style.transformOrigin="left bottom",o.style.zIndex=3,o.style.opacity=1,o.style.display="block",o.style.width=`${r}px`}applyCenterSlide(o,l){const c=this.leftMargin;o.style.transform=`translate3d(${c}px, 0px, 0px)`,o.style.transformOrigin="center center",o.style.zIndex=3,o.style.opacity=1,o.style.display="block",o.style.width=`${this.availableWidth}px`}applyRightFeather0(o,l){const c=this.availableWidth+(this.featherWidth-this.availableWidth)*l,r=this.leftMargin+(this.availableWidth-c);o.style.transform=`translate3d(${r}px, 0px, 0px)`,o.style.transformOrigin="right bottom",o.style.zIndex=3,o.style.opacity=1,o.style.display="block",o.style.width=`${c}px`}applyRightFeather1(o,l){const c=this.featherWidth,r=this.leftMargin+(this.availableWidth-c),d=this.featherRotation*l,u=1+(this.featherScale-1)*l;o.style.transform=`translate3d(${r}px, 0px, 0px) rotate(${d}deg) scale(${u})`,o.style.transformOrigin="right bottom",o.style.zIndex=2,o.style.opacity=1,o.style.display="block",o.style.width=`${c}px`}applyRightFeather2(o,l){const c=this.featherWidth,r=this.leftMargin+(this.availableWidth-c),d=this.featherRotation,u=d+(this.featherRotation+this.featherRotation*this.featherScale-d)*l,x=this.featherScale,v=x+(this.featherScale*this.featherScale*.9-x)*l;o.style.transform=`translate3d(${r}px, 0px, 0px) rotate(${u}deg) scale(${v})`,o.style.transformOrigin="right bottom",o.style.zIndex=1,o.style.opacity=1,o.style.display="block",o.style.width=`${c}px`}applyRightFeather3(o,l){const c=this.featherWidth,r=this.leftMargin+(this.availableWidth-c),d=this.featherRotation+this.featherRotation*this.featherScale,u=d+(d+.5*this.featherRotation-d)*l,x=this.featherScale*this.featherScale*.9,v=x+(x*this.featherScale-x)*l,m=l<.5?1:1*(1-(l-.5)/.5);o.style.transform=`translate3d(${r}px, 0px, 0px) rotate(${u}deg) scale(${v})`,o.style.transformOrigin="right bottom",o.style.zIndex=0,o.style.opacity=m,o.style.display="block",o.style.width=`${c}px`}applyHiddenState(o){o.style.opacity=0,o.style.display="none",o.style.zIndex=0,o.style.transform="translate3d(0px, 0px, 0px)",o.style.transformOrigin="center center",o.style.width=""}destroy(){super.destroy();const o=this.ctx.store.getSlides();for(let l=0;l<o.length;l++){const c=o[l];c&&c.style&&(c.style.transform="",c.style.transformOrigin="",c.style.opacity="",c.style.zIndex="",c.style.display="",c.style.width="")}}}return E.Tarot!==void 0&&E.Tarot.registerEffect(g),g})});export default vt();
