/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@magic-spells/tarot")):"function"==typeof define&&define.amd?define(["@magic-spells/tarot"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).PeacockEffect=e(t.Tarot)}(this,(function(t){"use strict";class PeacockEffect extends t.TarotEffect{static effectName="peacock";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1,loopBuffer:{left:2,right:2}};constructor(t){super(t);const e=this;e.viewportWidth=0,e.percentMargin=.18,e.leftMargin=0,e.rightMargin=0,e.availableWidth=0,e.featherRotation=8,e.featherScale=.86,e.init()}init(){super.init()}reInit(){super.reInit()}calculateLayout(){const t=this;t.leftMargin=t.viewportWidth*t.percentMargin,t.rightMargin=t.viewportWidth*t.percentMargin,t.availableWidth=t.viewportWidth-t.leftMargin-t.rightMargin,t.availableWidth<200&&(t.availableWidth=200,t.leftMargin=(t.viewportWidth-t.availableWidth)/2,t.rightMargin=t.leftMargin)}render(t,e){const i=this,{slides:a,widths:s,animation:l}=t;i.viewportWidth=s.viewport,i.calculateLayout(),i.gap=s.gap||0,i.featherWidth=(i.availableWidth-i.gap)/2,i.renderSlideWidth(i.availableWidth);for(let t=0,s=a.length;t<s;t++){const s=a[t],l=e.isSlideInRange(s,"L2","L3");if(l.isInRange){i.applyLeftFeather3(s,l.percent);continue}if(e.isSlideInRange(s,"L3","L+").isInRange){i.applyHiddenState(s);continue}const r=e.isSlideInRange(s,"L1","L2");if(r.isInRange){i.applyLeftFeather2(s,r.percent);continue}const n=e.isSlideInRange(s,"CL1","L1");if(n.isInRange){if(n.percent>=.5){i.applyLeftFeather0(s,(n.percent-.5)/.5);continue}i.applyLeftFeather1(s,n.percent/.5);continue}const h=e.isSlideInRange(s,"CL1","CR1");if(h.isInRange){i.applyCenterSlide(s,h.percent);continue}const o=e.isSlideInRange(s,"CR1","R1");if(o.isInRange){if(o.percent<.5){i.applyRightFeather0(s,o.percent/.5);continue}i.applyRightFeather1(s,(o.percent-.5)/.5);continue}const p=e.isSlideInRange(s,"R1","R2");if(p.isInRange){i.applyRightFeather2(s,p.percent);continue}const f=e.isSlideInRange(s,"R2","R3");if(f.isInRange){i.applyRightFeather3(s,f.percent);continue}e.isSlideInRange(s,"R3","R+").isInRange?i.applyHiddenState(s):i.applyHiddenState(s)}}applyLeftFeather3(t,e){const i=this.leftMargin,a=this.featherWidth,s=this.featherRotation+this.featherRotation*this.featherScale,l=s+.5*this.featherRotation,r=-(l+(s-l)*e),n=this.featherScale*this.featherScale*this.featherScale,h=n+(this.featherScale*this.featherScale*.9-n)*e,o=e>.5?1:e/.5*1;t.style.transform=`translate3d(${i}px, 0px, 0px) rotate(${r}deg) scale(${h})`,t.style.transformOrigin="left bottom",t.style.zIndex=0,t.style.opacity=o,t.style.display="block",t.style.width=`${a}px`}applyLeftFeather2(t,e){const i=this.leftMargin,a=this.featherWidth,s=this.featherRotation+this.featherRotation*this.featherScale,l=-(s+(this.featherRotation-s)*e),r=this.featherScale*this.featherScale*.9,n=r+(this.featherScale-r)*e;t.style.transform=`translate3d(${i}px, 0px, 0px) rotate(${l}deg) scale(${n})`,t.style.transformOrigin="left bottom",t.style.zIndex=1,t.style.opacity=1,t.style.display="block",t.style.width=`${a}px`}applyLeftFeather1(t,e){const i=this.leftMargin,a=this.featherWidth,s=-this.featherRotation*(1-e),l=this.featherScale+(1-this.featherScale)*e;t.style.transform=`translate3d(${i}px, 0px, 0px) rotate(${s}deg) scale(${l})`,t.style.transformOrigin="left bottom",t.style.zIndex=2,t.style.opacity=1,t.style.display="block",t.style.width=`${a}px`}applyLeftFeather0(t,e){const i=this.leftMargin,a=this.featherWidth+(this.availableWidth-this.featherWidth)*e;t.style.transform=`translate3d(${i}px, 0px, 0px)`,t.style.transformOrigin="left bottom",t.style.zIndex=3,t.style.opacity=1,t.style.display="block",t.style.width=`${a}px`}applyCenterSlide(t,e){const i=this.leftMargin;t.style.transform=`translate3d(${i}px, 0px, 0px)`,t.style.transformOrigin="center center",t.style.zIndex=3,t.style.opacity=1,t.style.display="block",t.style.width=`${this.availableWidth}px`}applyRightFeather0(t,e){const i=this.availableWidth+(this.featherWidth-this.availableWidth)*e,a=this.leftMargin+(this.availableWidth-i);t.style.transform=`translate3d(${a}px, 0px, 0px)`,t.style.transformOrigin="right bottom",t.style.zIndex=3,t.style.opacity=1,t.style.display="block",t.style.width=`${i}px`}applyRightFeather1(t,e){const i=this.featherWidth,a=this.leftMargin+(this.availableWidth-i),s=this.featherRotation*e,l=1+(this.featherScale-1)*e;t.style.transform=`translate3d(${a}px, 0px, 0px) rotate(${s}deg) scale(${l})`,t.style.transformOrigin="right bottom",t.style.zIndex=2,t.style.opacity=1,t.style.display="block",t.style.width=`${i}px`}applyRightFeather2(t,e){const i=this.featherWidth,a=this.leftMargin+(this.availableWidth-i),s=this.featherRotation,l=s+(this.featherRotation+this.featherRotation*this.featherScale-s)*e,r=this.featherScale,n=r+(this.featherScale*this.featherScale*.9-r)*e;t.style.transform=`translate3d(${a}px, 0px, 0px) rotate(${l}deg) scale(${n})`,t.style.transformOrigin="right bottom",t.style.zIndex=1,t.style.opacity=1,t.style.display="block",t.style.width=`${i}px`}applyRightFeather3(t,e){const i=this.featherWidth,a=this.leftMargin+(this.availableWidth-i),s=this.featherRotation+this.featherRotation*this.featherScale,l=s+(s+.5*this.featherRotation-s)*e,r=this.featherScale*this.featherScale*.9,n=r+(r*this.featherScale-r)*e,h=e<.5?1:1*(1-(e-.5)/.5);t.style.transform=`translate3d(${a}px, 0px, 0px) rotate(${l}deg) scale(${n})`,t.style.transformOrigin="right bottom",t.style.zIndex=0,t.style.opacity=h,t.style.display="block",t.style.width=`${i}px`}applyHiddenState(t){t.style.opacity=0,t.style.display="none",t.style.zIndex=0,t.style.transform="translate3d(0px, 0px, 0px)",t.style.transformOrigin="center center",t.style.width=""}destroy(){super.destroy();const t=this.ctx.store.getSlides();for(let e=0;e<t.length;e++){const i=t[e];i&&i.style&&(i.style.transform="",i.style.transformOrigin="",i.style.opacity="",i.style.zIndex="",i.style.display="",i.style.width="")}}}return void 0!==t.Tarot&&t.Tarot.registerEffect(PeacockEffect),PeacockEffect}));
