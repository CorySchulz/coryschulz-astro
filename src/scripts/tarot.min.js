/*!
 ████████╗ █████╗ ██████╗  ██████╗ ████████╗
 ╚══██╔══╝██╔══██╗██╔══██╗██╔═══██╗╚══██╔══╝
    ██║   ███████║██████╔╝██║   ██║   ██║   
    ██║   ██╔══██║██╔══██╗██║   ██║   ██║   
    ██║   ██║  ██║██║  ██║╚██████╔╝   ██║   
    ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝    ╚═╝   

   Tarot Carousel v0.1.0 - beta
   A highly customizable carousel with beautiful, physics-driven animations
   Copyright 2025 Magic Spells LLC

   This software is source-available but not open source.
   See LICENSES for usage tiers and commercial terms.

   Licensed under:
      - Magic Spells Non-Commercial License (free for personal use and non-revenue projects)
      - Magic Spells Commercial License (for commercial use by entities under $1M revenue)
      - Magic Spells Enterprise License (for all use by entities with $1M+ revenue)

     Author: Cory Schulz
    Website: https://www.magicspells.io/tarot
       Repo: https://github.com/magic-spells/tarot
     Issues: https://github.com/magic-spells/tarot/issues
   Licenses: https://www.magicspells.io/licenses
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Tarot={})}(this,(function(e){"use strict";class EventEmitter{#e;constructor(){this.#e=new Map}on(e,t){if("function"!=typeof t)throw new TypeError("Listener must be a function");const n=this.#e.get(e)||[];return n.includes(t)||n.push(t),this.#e.set(e,n),this}off(e,t){const n=this.#e.get(e);if(!n)return this;const r=n.indexOf(t);return-1!==r&&(n.splice(r,1),0===n.length?this.#e.delete(e):this.#e.set(e,n)),this}emit(e,...t){const n=this.#e.get(e);if(!n||0===n.length)return!1;for(let r=0,s=n.length;r<s;++r)try{void 0!==n[r]&&n[r].apply(this,t)}catch(t){console.error(`Error in listener for event '${e}':`,t)}return!0}destroy(){this.#e.clear()}}const t=0,n=-1,r=1;class DragHandler{constructor(e){const t=this;t.ctx=e,t.track=e.track,t.dragThreshold=3,t.drag={isDragging:!1,start:0,current:0,prev:0,delta:0,velocity:0,dragThresholdMet:!1,scrollWheelDelta:0,scrollWheelActive:!1},t.debouncedScrollEnd=t.ctx.utils.debounce((e=>{t.drag.scrollWheelDelta=0,t.handleScrollEnd(e)}),80),t.handlers={click:e=>t.handleClick(e),pointerdown:e=>t.handleDragStart(e),pointermove:e=>t.handleDragMove(e),pointerup:e=>t.handleDragEnd(e),pointerleave:e=>t.handleDragEnd(e),pointercancel:e=>t.handleDragEnd(e),touchstart:e=>t.handleTouchStart(e),touchmove:e=>t.handleTouchMove(e),dblclick:e=>(e.preventDefault(),e.stopPropagation(),!1),wheel:e=>t.handleSidewaysScroll(e)},t.bindUI()}bindUI(){const e=this,t=e.track;t.addEventListener("click",e.handlers.click),t.addEventListener("pointerdown",e.handlers.pointerdown,{passive:!1}),t.addEventListener("pointermove",e.handlers.pointermove,{passive:!1}),t.addEventListener("pointerup",e.handlers.pointerup,{passive:!1}),t.addEventListener("pointerleave",e.handlers.pointerleave,{passive:!1}),t.addEventListener("pointercancel",e.handlers.pointercancel,{passive:!1}),t.addEventListener("touchstart",e.handlers.touchstart,{passive:!1}),t.addEventListener("touchmove",e.handlers.touchmove,{passive:!1}),t.addEventListener("dblclick",e.handlers.dblclick)}handleSidewaysScroll(e){const t=this;if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){e.preventDefault();const n=t.drag;0===n.delta&&t.ctx.emitter.emit(t.ctx.events.drag.start,{event:e,drag:n}),n.delta+=-1*e.deltaX,t.ctx.emitter.emit(t.ctx.events.drag.move,{event:e,drag:n}),t.debouncedScrollEnd(e)}}handleScrollEnd(e){const t=this,n=t.drag;t.ctx.emitter.emit(t.ctx.events.drag.end,{event:e,drag:n}),n.delta=0}handleClick(e){const t=this;if(t.drag.dragThresholdMet)return void e.preventDefault();const n=e.target.closest("tarot-slide");if(n){const r=parseInt(n.getAttribute("index"))||0,s=n.renderIndex;t.ctx.emitter.emit(t.ctx.events.slides.click,{index:r,renderIndex:s,event:e})}}handleTouchStart(e){const t=this;e.touches.length>1&&(t.drag.isDragging=!1)}handleTouchMove(e){const t=this,s=t.drag;if(!s.isDragging)return;if(s.touchDirection===r)return void e.preventDefault();if(1.15*Math.abs(s.startX-e.touches[0].screenX)>Math.abs(s.startY-e.touches[0].screenY))return e.preventDefault(),void(s.touchDirection=r);s.isDragging=!1,s.touchDirection=n,s.delta=0,t.ctx.emitter.emit(t.ctx.events.drag.end,{event:e,drag:s})}handleDragStart(e){e.preventDefault();const n=this,r=n.drag;r.hasTouch="touch"===e.pointerType,r.touchDirection=t,r.isDragging=!0,r.dragThresholdMet=!1,r.startX=e.screenX,r.startY=e.screenY,r.velocity=0,r.delta=0,n.ctx.emitter.emit(n.ctx.events.drag.start,{event:e,drag:r})}handleDragMove(e){const n=this,s=n.drag;if(!s.isDragging)return;const i=Math.abs(s.startX-e.screenX),o=Math.abs(s.startY-e.screenY);return s.touchDirection===t&&1.15*i>o&&(s.touchDirection=r),s.hasTouch&&s.touchDirection!=r||(e.preventDefault(),s.prev=s.current,s.current=e.screenX,s.delta=s.current-s.startX,s.velocity=s.current-s.prev,!s.dragThresholdMet&&Math.abs(s.delta)>n.dragThreshold&&(s.dragThresholdMet=!0),!s.dragThresholdMet)?void 0:(n.ctx.emitter.emit(n.ctx.events.drag.move,{event:e,drag:s}),!1)}handleDragEnd(e){const t=this,n=t.drag;n.isDragging&&(e.preventDefault(),n.isDragging=!1,t.ctx.emitter.emit(t.ctx.events.drag.end,{event:e,drag:n}),n.delta=0)}destroy(){const e=this,t=e.track;e.debouncedScrollEnd&&e.debouncedScrollEnd.cancel(),t.removeEventListener("click",e.handlers.click),t.removeEventListener("pointerdown",e.handlers.pointerdown),t.removeEventListener("pointermove",e.handlers.pointermove),t.removeEventListener("pointerup",e.handlers.pointerup),t.removeEventListener("pointerleave",e.handlers.pointerleave),t.removeEventListener("pointercancel",e.handlers.pointercancel),t.removeEventListener("touchstart",e.handlers.touchstart),t.removeEventListener("touchmove",e.handlers.touchmove),t.removeEventListener("dblclick",e.handlers.dblclick),t.removeEventListener("wheel",e.handlers.wheel)}}class EffectManager{static defaultRules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:0,right:0}};#t;#n;#r=null;constructor(e,t){const n=this;n.#t=e,n.#n=t,n.handlers={optionsChanged:({currentOptions:e})=>{const t=n.#r?.constructor?.effectName||n.#r?.constructor?.name;e.effect!==t&&n.loadEffect(e.effect)}},n.bindEvents(),n.handlers.effectRegistered=e=>{try{const t=e?.detail?.effectName,r=String(n.#t.store.getOptions().effect||"").toLowerCase();t&&r&&t===r&&n.loadEffect(r)}catch(e){}},"undefined"!=typeof window&&"function"==typeof window.addEventListener&&window.addEventListener("tarot:effect-registered",n.handlers.effectRegistered)}init(){}reInit(){this.loadCurrentEffect()}bindEvents(){this.#t.emitter.on(this.#t.events.store.optionsChanged,this.handlers.optionsChanged)}loadCurrentEffect(){const e=this.#t.store.getOptions();this.loadEffect(e.effect)}loadEffect(e){const t=this;if(!e)return void console.error("Error: no effect detected or could not load effect ",e);const n=t.#n[e];if(!n)return console.warn(`Effect '${e}' not registered yet; falling back to 'carousel' until it loads`),void("carousel"!==e&&this.loadEffect("carousel"));const r=t.#r,s=r?.constructor?.effectName||r?.constructor?.name;t.#r&&(t.#r.destroy(),t.#t.emitter.emit(t.#t.events.effect.destroyed,{effectName:s})),t.#r=new n(t.#t),t.#t.carousel.setAttribute("effect",e),t.#t.emitter.emit(t.#t.events.effect.loaded,{effect:t.#r,effectName:e}),t.#t.emitter.emit(t.#t.events.effect.changed,{previousEffect:r,currentEffect:t.#r,effectName:e}),t.#r.render&&t.#t.store.getState()}getRules(){const e=this;return e.#r&&e.#r.rules?e.#r.rules:e.constructor.defaultRules}getEffect(){return this.#r}getEffectName(){return this.#r&&(this.#r.constructor?.effectName||this.#r.constructor?.name)||null}hasEffect(){return null!==this.#r}destroy(){const e=this;if("undefined"!=typeof window&&"function"==typeof window.removeEventListener&&e.handlers?.effectRegistered&&window.removeEventListener("tarot:effect-registered",e.handlers.effectRegistered),e.#t.emitter.off(e.#t.events.store.optionsChanged,e.handlers.optionsChanged),e.#r){const t=e.getEffectName();e.#r.destroy(),e.#t.emitter.emit(e.#t.events.effect.destroyed,{effectName:t}),e.#r=null}}}const s=Object.freeze({carousel:Object.freeze({init:"carousel:init",ready:"carousel:ready",reinit:"carousel:reinit",destroy:"carousel:destroy",error:"carousel:error",beforeTransition:"carousel:before-transition",afterTransition:"carousel:after-transition",hasFocus:"carousel:has-focus",lostFocus:"carousel:lost-focus"}),store:Object.freeze({optionsChanged:"options:changed",stateChanged:"state:changed",layoutChanged:"layout:changed",slidesChanged:"slides:changed",pageIndexChanged:"page-index:changed",pageCountChanged:"page-count:changed",selectedIndexChanged:"selected-index:changed",renderIndexChanged:"render-index:changed",transformPointsChanged:"transform-points:changed",changedDirty:"store:changed-dirty",changedClean:"store:changed-clean"}),drag:Object.freeze({start:"drag:start",move:"drag:move",end:"drag:end",cancel:"drag:cancel"}),frame:Object.freeze({beforeRender:"frame:before-render",afterRender:"frame:after-render"}),slides:Object.freeze({click:"slides:click",visibleChanged:"slides:visible-changed"}),window:Object.freeze({resize:"window:resize",orientationChange:"window:orientation-change",visibilityChange:"window:visibility-change",hasFocus:"window:has-focus",lostFocus:"window:lost-focus"}),track:Object.freeze({looped:"track:looped",shifted:"track:shifted",requestFrame:"track:request-frame",positionChanged:"track:position-changed"}),effect:Object.freeze({changed:"effect:changed",loaded:"effect:loaded",destroyed:"effect:destroyed"}),animation:Object.freeze({requested:"animation:requested",started:"animation:started",completed:"animation:completed"}),engine:Object.freeze({positionChanged:"engine:position-changed",finished:"engine:finished"}),user:Object.freeze({interacted:"user:interacted"}),keyboard:Object.freeze({arrow:"keyboard:arrow"})});class OptionsManager{constructor(e){const t=this;t.ctx=e,t.defaultOptions={asNavFor:!1,animation:{attraction:.026,friction:.24,speed:5,velocityBoost:1.1},autoplay:{interval:0,stopAfterInteraction:!0,afterInteraction:"pause"},breakpoints:{},breakpointElement:"window",centerSelectedSlide:!1,dragThreshold:40,filterClass:"",focusOnSelect:!1,initialIndex:0,loop:!1,effect:"carousel",gap:0,paddingLeft:0,paddingRight:0,slideMinWidth:"50px",slidesPerView:1,slidesPerMove:1,navigation:{showButtons:!0,showPrevButton:!0,showNextButton:!0,prevButtonSelector:!1,nextButtonSelector:!1,smartButtons:!1,showPagination:!0,paginationSelector:!1,showScrollbar:!1,scrollbarSelector:!1,scrollbarPosition:"bottom",scrollbarSize:"normal",scrollbarAutoHide:!1,scrollbarShowSnapPoints:!0,scrollbarClickToNavigate:!0,scrollbarDragToNavigate:!0},goToSelectedSlide:!1,syncWith:!1,announcements:!0},t.userOptions={},t.userOptionsElement=t.ctx.carousel.querySelector(":scope > [data-tarot-options]"),t.currentBreakpoint={minWidth:0,options:{}},t.prevBreakpoint={minWidth:0,options:{}},t.checkBreakpointsDebounced=t.ctx.utils.debounce((()=>t.checkBreakpoints()),4),t.handlers={onWindowResize:t.checkBreakpointsDebounced,onOrientationChange:t.checkBreakpointsDebounced},t.init()}init(){const e=this;e.bindEvents(),e.loadUserOptions(),e.currentBreakpoint=e.getCurrentBreakpoint(),e.applyMergedOptions()}reInit(){this.checkBreakpoints()}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.window.resize,e.handlers.onWindowResize),e.ctx.emitter.on(e.ctx.events.window.orientationChange,e.handlers.onOrientationChange)}destroy(){const e=this;e.ctx.emitter.off(e.ctx.events.window.resize,e.handlers.onWindowResize),e.ctx.emitter.off(e.ctx.events.window.orientationChange,e.handlers.onOrientationChange),e.checkBreakpointsDebounced&&"function"==typeof e.checkBreakpointsDebounced.cancel&&e.checkBreakpointsDebounced.cancel()}setUserOptions(e={}){const t=this;return e.slidesPerMove<1&&(e.slidesPerMove=1),e.slidesPerView<1&&(e.slidesPerView=1),t.userOptions=t.ctx.utils.deepMerge(t.userOptions,e),t.currentBreakpoint=t.getCurrentBreakpoint(),t.applyMergedOptions(),t}loadUserOptions(){const e=this;if(!e.userOptionsElement)return;let t=e.userOptionsElement.textContent||"";t=t.replace(/\n/g,"").trim(),t=t.replace(/(\w+)\s*:/g,'"$1":');try{e.userOptions=JSON.parse(t)}catch(e){console.error("tarot options: failed to parse data-tarot-options json",e)}}getCurrentBreakpoint(){const e=this,{breakpoints:t={},...n}=e.userOptions;let r;if(r="viewport"===e.ctx.utils.deepMerge(e.defaultOptions,n).breakpointElement&&e.ctx.viewport?e.ctx.viewport.offsetWidth:window.innerWidth,!t||"object"!=typeof t)return{minWidth:0,options:{}};const s=Object.keys(t).map(Number).filter((e=>!Number.isNaN(e))).sort(((e,t)=>e-t));let i=0;for(let e=0;e<s.length;e++){const t=s[e];if(!(r>=t))break;i=t}return{minWidth:i,options:t[i]||{}}}checkBreakpoints(){const e=this,t=e.getCurrentBreakpoint();t.minWidth!==e.currentBreakpoint.minWidth&&(e.prevBreakpoint=e.currentBreakpoint,e.currentBreakpoint=t,e.applyMergedOptions())}applyMergedOptions(){const e=this,{breakpoints:t,...n}=e.userOptions;let r=e.ctx.utils.deepMerge(e.defaultOptions,n);r=e.ctx.utils.deepMerge(r,e.currentBreakpoint.options||{}),delete r.breakpoints,r.slidesPerMove<1&&(r.slidesPerMove=1),r.slidesPerView<1&&(r.slidesPerView=1),e.ctx.store.setOptions(r)}}class SlideManager{constructor(e){const t=this;t.ctx=e,t.coreSlides=null,t.observer=null,t.debouncedSlideRefresh=t.ctx.utils.debounce((()=>{t.reInit()}),4),t.handlers={selectedIndexChanged:({currentIndex:e})=>{t.renderSelectedIndex(e)}},t.bindEvents(),t.init(),t.observeDOMChanges()}init(){this.reInit()}reInit(){const e=this;e.wrapSlides(),e.coreSlides=e.ctx.track.querySelectorAll(":scope > tarot-slide"),e.loadFilteredSlides(!0),e.renderSelectedIndex(e.ctx.store.getState().selectedIndex)}bindEvents(){this.ctx.emitter.on(this.ctx.events.store.selectedIndexChanged,this.handlers.selectedIndexChanged)}wrapSlides(){const e=this.ctx.track;Array.from(e.children).forEach((t=>{if("tarot-slide"!==t.tagName.toLowerCase()){const n=document.createElement("tarot-slide");e.replaceChild(n,t),n.appendChild(t)}}))}observeDOMChanges(){const e=this;e.observer=new MutationObserver((t=>{for(const n of t)if("childList"===n.type){e.debouncedSlideRefresh();break}})),e.observer.observe(e.ctx.track,{childList:!0,subtree:!1})}resetSlideIndexes(e){for(let t=0,n=e.length;t<n;++t)e[t].renderIndex=t,e[t].index=t,e[t].setAttribute("index",t)}prepSlidesForFrame(){const e=this,t=e.ctx.store.getSlides(),n=e.ctx.store.getWidths(),r=e.ctx.store.getAnimation(),s=e.ctx.store.getOptions();function i(e){return Math.round(2*e)/2}e.updateSlidePositions(r.trackPosition,t,n,s);for(let e=0,r=t.length;e<r;++e){const r=t[e];r.trackPosition=i(r.renderIndex*n.slideAndGap),r.centerPoint=i(r.trackPosition+n.slide/2)}}updateSlidePositions(e,t,n,r){const s=this;if(!s.ctx.utils.canLoop(t.length,r))return void s.resetAllSlides(t);const i=n.viewport,o=n.slide,a=o+n.gap,c=-e,l=c+i,d=new Set,u=Math.floor(c/a)-2,h=Math.ceil(l/a)+2;for(let e=u;e<=h;e++){const t=e*a;t+o>c&&t<l&&d.add(e)}const g=s.ctx.commands.getEffect(),p=g?.constructor?.rules?.loopBuffer||{left:0,right:0};if(d.size>0){const e=Array.from(d),t=Math.min(...e),n=Math.max(...e);for(let e=1;e<=p.left;e++)d.add(t-e);for(let e=1;e<=p.right;e++)d.add(n+e)}const f=t.length,m=new Set;for(const e of d){const t=(e%f+f)%f;m.add(t)}if(m.size<f){const e=Array.from(d);if(e.length>0){const t=Math.min(...e),n=Math.max(...e),r=f-m.size,s=Math.floor(r/2),i=r-s;for(let e=1;e<=s;e++)d.add(t-e);for(let e=1;e<=i;e++)d.add(n+e)}}const v=new Map;for(const e of d){const n=(e%f+f)%f;v.set(t[n],e)}for(const e of t){const t=v.get(e);void 0!==t&&(e.renderIndex=t)}}resetAllSlides(e){for(let t=0;t<e.length;t++)e[t].renderIndex=t}loadFilteredSlides(e=!1){const t=this,n=t.ctx.store.getOptions().filterClass,r=t.coreSlides,s=t.ctx.track;if(t.resetSlideIndexes(r),!n)return s.innerHTML="",r.forEach((e=>s.appendChild(e))),void t.ctx.store.setSlides(Array.from(r));const i=[];s.innerHTML="",r.forEach((e=>{e.classList.contains(n)&&(s.appendChild(e),i.push(e))})),t.ctx.store.setSlides(i)}addSlide(e,t){const n=this,r=n.ctx.track;let s;if("string"==typeof e){const t=document.createElement("div");t.innerHTML=`<tarot-slide>${e.trim()}</tarot-slide>`,s=t.firstChild}else{const t=document.createElement("tarot-slide");t.appendChild(e),s=t}const i=Array.from(n.ctx.store.getSlides());"number"==typeof t&&t>=0&&t<i.length?r.insertBefore(s,i[t]):r.appendChild(s),n.loadFilteredSlides()}removeSlide(e){const t=this,n=t.ctx.track,r=Array.from(t.coreSlides);e<0||e>=r.length||(n.removeChild(r[e]),t.loadFilteredSlides())}renderSelectedIndex(e){const t=this.ctx.store.getSlides();for(let n=0,r=t.length;n<r;++n){const r=t[n];r.selected=r.index===e}}destroy(){const e=this;e.ctx.emitter.off(e.ctx.events.store.selectedIndexChanged,e.handlers.selectedIndexChanged),e.observer&&(e.observer.disconnect(),e.observer=null),e.debouncedSlideRefresh&&"function"==typeof e.debouncedSlideRefresh.cancel&&e.debouncedSlideRefresh.cancel(),e.debouncedSlideRefresh=null,e.coreSlides=null}}class PhysicsEngine{#s;#i;#o;#a;#c;#l;#d;#u;#h;#g;#p;#f;constructor({attraction:e=.026,friction:t=.28}={}){const n=this;n.#m(e),n.#v(t),n.#s=e,n.#i=t,n.#o=1-t,n.#a=0,n.#c=0,n.#l=0,n.#d=0,n.#u=!1,n.#h=null,n.#f=0,n.#g=new EventEmitter}animateTo(e,t,n){const r=this;r.#u&&r.stop(),isNaN(t)?console.log("end value is not a number"):(++r.#f,n*=1.4,r.#d=e,r.#c=e,r.#l=t,r.#a=n,r.#u=!0,r.#h=null,r.#g.emit("engine:position-changed",{position:r.#c,positionDelta:0,progress:0,velocity:r.#a}))}tick(e){const t=this;if(!t.#u)return;const n=null==t.#h?8.33:e-t.#h;t.#h=e;const r=t.#l-t.#d;let s=Math.max(Math.abs(r)-230,1)/200;s=Math.max(.8,Math.min(s,1.3));const i=n/(13*s),o=(t.#l-t.#c)*t.#s;t.#a+=o*i,t.#a*=Math.pow(t.#o,i);const a=t.#a*i;t.#c+=a;const c=t.#c-t.#d;let l=0!==r?c/r:0;if(Math.abs(a)<.01&&Math.abs(t.#c-t.#l)<.1)return t.#u=!1,t.#c=t.#l,t.#g.emit("engine:position-changed",{position:t.#c,positionDelta:0,progress:1,velocity:0}),void t.#g.emit("engine:finished");t.#g.emit("engine:position-changed",{position:t.#c,positionDelta:a,progress:l,velocity:t.#a})}stop(){this.#u=!1}isAnimating(){return this.#u}setAttraction(e){this.#m(e),this.#s=e}setFriction(e){this.#v(e),this.#i=e,this.#o=1-e}on(e,t){this.#g.on(e,t)}off(e,t){this.#g.off(e,t)}#m(e){if("number"!=typeof e||e<=0||e>=1)throw new Error("Attraction must be a number between 0 and 1 (exclusive).")}#v(e){if("number"!=typeof e||e<=0||e>=1)throw new Error("Friction must be a number between 0 and 1 (exclusive).")}destroy(){this.stop(),this.#g.destroy(),this.#g=null}}class TrackAnimator{#x=0;#b=0;#y=0;#C=0;#S="";#w=0;constructor(e){const t=this;t.ctx=e;const n=t.ctx.store.getOptions();t.engine=new PhysicsEngine({attraction:n.animation.attraction,friction:n.animation.friction}),t.#b=1,t.handlers={optionsChanged:({currentOptions:e})=>{t.engine.setAttraction(e.animation?.attraction||.1),t.engine.setFriction(e.animation?.friction||.8)},dragStart:({event:e,drag:n})=>{t.stop(),t.#b=t.#x,t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"drag",event:e})},dragMove:({event:e,drag:n})=>{t.setPos(t.#b+n.delta,1,null,"drag",0),t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"drag",event:e})},dragEnd:({event:e,drag:n})=>{t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"drag",event:e}),Math.abs(n.delta)<t.ctx.store.getOptions().dragThreshold?t.ctx.commands.getTrackManager().settleTrack():n.delta<0?t.ctx.commands.next(n.velocity):t.ctx.commands.prev(n.velocity)},enginePositionChanged:({position:e,positionDelta:n,progress:r,velocity:s})=>{1===r?t.setPos(t.#C,r,s,t.#S,t.#w):t.setPos(t.#x+n,r,s,t.#S,t.#w)},engineAnimationFinished:()=>{t.ctx.emitter.emit("animationFinished",t.#C)},trackRequestFrame:({time:e})=>{t.engine.tick(e)}},t.bindEvents()}init(){}reInit(){}bindEvents(){const e=this,{emitter:t,events:n}=e.ctx;t.on(n.store.optionsChanged,e.handlers.optionsChanged),t.on(n.drag.start,e.handlers.dragStart),t.on(n.drag.move,e.handlers.dragMove),t.on(n.drag.end,e.handlers.dragEnd),t.on(n.track.requestFrame,e.handlers.trackRequestFrame),e.engine.on("engine:position-changed",e.handlers.enginePositionChanged),e.engine.on("engine:finished",e.handlers.engineAnimationFinished)}get currentPos(){return this.#x}getIsAnimating(){return this.engine.isAnimating()}canLoop(){const e=this,t=e.ctx.store.getOptions(),n=e.ctx.store.getSlides().length;return e.ctx.utils.canLoop(n,t)}stop(){this.engine.stop()}animateToPosition(e,t,n,r=0){const s=this;s.stop(),s.#S=n,s.#w=r,"jump"!==n?s.engine.isAnimating()&&s.#C==e||(t||(t=e<s.#x?-1*s.#y:s.#y),s.#C=e,s.engine.animateTo(s.#x,e,t)):this.setPos(e,1,0,"jump",r)}setPos(e,t,n=0,r,s=null){const i=this;let o=e-i.#x;if(i.#x,"drag"!==r&&1==t&&(o=0),i.#x=e,i.canLoop()){const e=i.ctx.store.getWidths().track;i.#x>0?i.shiftTrack("forwards"):i.#x<=-e&&i.shiftTrack("backwards")}i.ctx.store.setAnimation({type:r,trackPosition:e,trackDelta:o,velocity:n,progress:t,isAnimating:i.engine.isAnimating(),direction:null!==s?s:i.#w})}shiftTrack(e=1){const t=this,n=t.ctx.store.getWidths().track;let r;r="forwards"===e?-1:"backwards"===e?1:e,t.#x+=n*r,t.#b+=n*r,t.#C+=n*r,t.ctx.emitter.emit(t.ctx.events.track.shifted,{trackPosition:t.#x,animationType:"shift"})}destroy(){const e=this;if(e.engine&&(e.engine.off("engine:position-changed",e.handlers.enginePositionChanged),e.engine.off("engine:finished",e.handlers.engineAnimationFinished),e.engine.stop(),e.engine=null),e.ctx){const{emitter:t,events:n}=e.ctx;t.off(n.store.optionsChanged,e.handlers.optionsChanged),t.off(n.drag.start,e.handlers.dragStart),t.off(n.drag.move,e.handlers.dragMove),t.off(n.drag.end,e.handlers.dragEnd),t.off(n.track.requestFrame,e.handlers.trackRequestFrame)}e.handlers=null}}class TrackManager{constructor(e,t){const n=this;n.ctx=e,n.animator=t,n.handlers={animationRequested:e=>{const{index:t,trackPosition:n,velocity:r,type:s}=e;void 0!==n?this.animateToTrackPosition(n,r,s):void 0!==t&&this.animateToSlide(t,r,s)}},n.bindEvents()}init(){}reInit(){}bindEvents(){const{emitter:e,events:t}=this.ctx;e.on(t.animation.requested,this.handlers.animationRequested)}settleTrack(){const e=this.ctx.store.getState().renderIndex;this.animateToSlide(e,0,"settle")}animateToSlide(e,t,n){const r=this.getTrackPosForIndex(e);this.animateToTrackPosition(r,t,n)}animateToTrackPosition(e,t,n){const r=this,s=r.animator.currentPos;let i=e;const o=r.ctx.store.getWidths().track;if("jump"===n)return void r.animator.animateToPosition(i,0,"jump",0);if(r.ctx.store.getOptions().loop){const e=Math.abs(s-i);e===o/2?t&&0!=t?t<0?i>s&&(i-=o):i<=s&&(i+=o):i>s&&(i-=o):e>o/2&&(i>=s?i-=o:i+=o)}void 0===t?t=i<s?-15:15:(t*=1.2,Math.abs(t)<15&&(t*=1.3));let a=0;i<s?a=-1:i>s&&(a=1),r.animator.animateToPosition(i,t,n,a)}getTrackPosForIndex(e){const t=this.ctx.store.getOptions(),n=this.ctx.store.getWidths();let r=e*(n.slide+n.gap);const s=0-n.paddingLeft,i=n.track-n.viewport-n.gap+n.paddingRight-.1;return r!=s&&r!=i&&t.centerSelectedSlide?(r-=n.viewport/2,r+=n.slide/2):r-=n.paddingLeft,!t.loop&&r<0&&(r=s),!t.loop&&r>i&&(r=i),0!==r&&(r*=-1),r}destroy(){const{emitter:e,events:t}=this.ctx;e.off(t.animation.requested,this.handlers.animationRequested)}}class WindowEvents{constructor(e){const t=this;t.ctx=e,t.carousel=e.carousel,t.viewport=e.viewport,t.isInsideCarousel=e=>{const n=e?.composedPath?.()||[];return n.length?n.includes(t.carousel):t.carousel.contains(e?.target)},t.handlers={handleResize:e=>{t.ctx.emitter.emit(t.ctx.events.window.resize,{event:e})},handleCarouselClick:e=>{e.target.matches('button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])')||t.carousel.focus({preventScroll:!0})},handleWindowFocus:e=>{t.ctx.emitter.emit(t.ctx.events.window.hasFocus,{})},handleWindowBlur:e=>{t.ctx.emitter.emit(t.ctx.events.window.lostFocus,{})},handleCarouselFocus:e=>{t.ctx.emitter.emit(t.ctx.events.carousel.hasFocus,{}),t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"focus",event:e})},handleCarouselBlur:e=>{t.ctx.emitter.emit(t.ctx.events.carousel.lostFocus,{})},handleVisibilityChange:()=>{t.ctx.emitter.emit(t.ctx.events.window.visibilityChange,{hidden:document.hidden})},handleKeyDown:e=>{if(t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"key",event:e}),["ArrowLeft","ArrowRight"].includes(e.key)&&e.target===t.carousel){e.preventDefault();const n="ArrowLeft"===e.key?-1:1;t.ctx.emitter.emit(t.ctx.events.keyboard.arrow,{direction:n,event:e})}},handleWheel:e=>{t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"wheel",event:e})},unifiedResizeHandler:t.ctx.utils.debounce((e=>{t.handlers.handleResize(e)}),4)},t.viewportObserver=new ResizeObserver((e=>{t.handlers.unifiedResizeHandler(e?.[0])})),t.init()}init(){const e=this;window.addEventListener("resize",e.handlers.unifiedResizeHandler),window.addEventListener("orientationchange",e.handlers.unifiedResizeHandler),window.addEventListener("focus",e.handlers.handleWindowFocus),window.addEventListener("blur",e.handlers.handleWindowBlur),e.carousel.addEventListener("focus",e.handlers.handleCarouselFocus,!0),e.carousel.addEventListener("blur",e.handlers.handleCarouselBlur,!0),document.addEventListener("visibilitychange",e.handlers.handleVisibilityChange),e.carousel.addEventListener("keydown",e.handlers.handleKeyDown,!0),e.carousel.addEventListener("wheel",e.handlers.handleWheel,{passive:!0}),e.carousel.addEventListener("click",e.handlers.handleCarouselClick,!0),e.viewport&&e.viewportObserver.observe(e.viewport)}destroy(){const e=this;window.removeEventListener("resize",e.handlers.unifiedResizeHandler),window.removeEventListener("orientationchange",e.handlers.unifiedResizeHandler),window.removeEventListener("focus",e.handlers.handleWindowFocus),window.removeEventListener("blur",e.handlers.handleWindowBlur),e.carousel.removeEventListener("focus",e.handlers.handleCarouselFocus,!0),e.carousel.removeEventListener("blur",e.handlers.handleCarouselBlur,!0),document.removeEventListener("visibilitychange",e.handlers.handleVisibilityChange),e.carousel.removeEventListener("keydown",e.handlers.handleKeyDown,!0),e.carousel.removeEventListener("wheel",e.handlers.handleWheel,{passive:!0}),e.carousel.removeEventListener("click",e.handlers.handleCarouselClick,!0),e.viewportObserver&&(e.viewportObserver.disconnect(),e.viewportObserver=null)}}class SlideStateManager{ctx;constructor(e){const t=this;t.ctx=e,t.handlers={renderIndexChanged:({currentIndex:e})=>{t.handleSlideNavigation(e)}},t.ctx.emitter.on(t.ctx.events.store.renderIndexChanged,t.handlers.renderIndexChanged)}updateSlides(e=null){const t=this;null===e&&(e=t.ctx.store.getAnimation().trackPosition||0),t.updateAllSlidesSelection();const n=t.ctx.utils.getSlidesInViewport(t.ctx,e);for(const e of n)t.updateSlideState(e)}updateAllSlidesSelection(){const e=this.ctx.store.getSlides();for(const t of e)t.selected?t.classList.add("tarot-selected"):t.classList.remove("tarot-selected")}updateSlideState(e){const{slide:t,isVisible:n,isFullyVisible:r,visibilityPercent:s,leftVisibility:i,rightVisibility:o,parallax:a,parallaxVisibility:c}=e;t.style.setProperty("--tarot-visibility",s.toFixed(3)),t.style.setProperty("--tarot-left-visibility",i.toFixed(3)),t.style.setProperty("--tarot-right-visibility",o.toFixed(3)),t.style.setProperty("--tarot-parallax",a.toFixed(3)),t.style.setProperty("--tarot-parallax-visibility",c.toFixed(3)),t.classList.remove("tarot-hidden","tarot-visible","tarot-fully-visible"),n?(t.classList.add("tarot-visible"),r&&t.classList.add("tarot-fully-visible")):t.classList.add("tarot-hidden"),this.updateSlideARIA(t,n,s),this.updateSlideTabindex(t,n)}updateSlideARIA(e,t,n){const r=this;if(e.setAttribute("aria-hidden",String(!t)),e.hasAttribute("role")||e.setAttribute("role","group"),!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=e.getAttribute("index")||"0",n=parseInt(t,10)||0,s=r.ctx.store.getState().slideCount||r.ctx.store.getSlides().length||0;e.setAttribute("aria-label",`slide ${n+1} of ${s}`)}const s=r.ctx.store.getState().renderIndex,i=e.getAttribute("index");null!=i&&Number(i)===s?e.setAttribute("aria-current","true"):e.removeAttribute("aria-current")}updateSlideTabindex(e,t){e.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])').forEach((e=>{if(t){const t=e.getAttribute("data-original-tabindex");null!==t&&(e.setAttribute("tabindex",t),e.removeAttribute("data-original-tabindex"))}else{const t=e.getAttribute("tabindex");"-1"!==t&&(null!==t&&e.setAttribute("data-original-tabindex",t),e.setAttribute("tabindex","-1"))}}))}getSlideVisibility(){const e=this,t=e.ctx.store.getAnimation().trackPosition||0;return e.ctx.utils.getSlidesInViewport(e.ctx,t)}getVisibleSlides(){return this.getSlideVisibility().filter((e=>e.isVisible)).map((e=>e.slide))}getFullyVisibleSlides(){return this.getSlideVisibility().filter((e=>e.isFullyVisible)).map((e=>e.slide))}destroy(){const e=this.ctx.carousel.querySelectorAll("tarot-slide");for(const t of e){t.classList.remove("tarot-hidden","tarot-visible","tarot-fully-visible","tarot-selected"),t.style.removeProperty("--tarot-visibility"),t.style.removeProperty("--tarot-left-visibility"),t.style.removeProperty("--tarot-right-visibility"),t.style.removeProperty("--tarot-parallax"),t.style.removeProperty("--tarot-parallax-visibility"),t.removeAttribute("aria-hidden"),t.removeAttribute("aria-current");t.querySelectorAll("[data-original-tabindex]").forEach((e=>{const t=e.getAttribute("data-original-tabindex");null!==t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex"),e.removeAttribute("data-original-tabindex")}))}}handleSlideNavigation(e){const t=this;if(!t.ctx.store.getOptions().announcements||!t.ctx.announcements)return;const n=`Slide ${e+1} of ${t.ctx.store.getSlides().length}`;t.ctx.announcements.textContent=n}destroy(){const e=this;e.handlers?.renderIndexChanged&&e.ctx.emitter.off(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged)}}function i(e,t,n){if("L+"===e)return Number.NEGATIVE_INFINITY;if("R+"===e)return Number.POSITIVE_INFINITY;const r=n?.[e];if(null==r)throw new Error(`getPointValue: unknown point "${e}". Available points: ${Object.keys(n||{}).join(", ")}`);return r+t}function o(e,t,n,r){const s=i(e,n,r),o=i(t,n,r);return s>o?{start:s,end:o}:{start:o,end:s}}function a(e){const{animation:t,transformPoints:n}=e,r=0===t.trackPosition?0:-t.trackPosition;return{getPointValue:e=>i(e,r,n),getRange:(e,t)=>o(e,t,r,n),isSlideInRange:(e,t,s)=>function(e,t,n,r,s){function i(e){return Math.round(2*e)/2}const{start:a,end:c}=o(t,n,r,s),l=i(a),d=i(c),u=i(e.centerPoint),h=u<=l&&u>d;let g=0;if(h)if(Number.isFinite(l)&&Number.isFinite(d)){const e=l-d;g=e>0?Math.max(0,Math.min(1,(u-d)/e)):1}else g=1;return{isInRange:h,percent:g,start:l,end:d}}(e,t,s,r,n),trackPosition:r,transformPoints:n,frame:e}}class FrameEngine{#k;ctx;constructor(e){const t=this;t.ctx=e,t.#k=new SlideStateManager(e),t.effect=null,t.rafId=null,t.handlers={effectChanged:()=>{t.effect=e.commands.getEffect(),t.requestFrame()},storeDirty:()=>{t.requestFrame()}},t.bindEvents()}bindEvents(){const e=this,{emitter:t,events:n}=e.ctx;t.on(n.effect.changed,e.handlers.effectChanged),t.on(n.store.changedDirty,e.handlers.storeDirty)}requestFrame(){const e=this;null===e.rafId&&(e.rafId=requestAnimationFrame(e.onFrame.bind(e)))}cancel(){const e=this;null!==e.rafId&&(cancelAnimationFrame(e.rafId),e.rafId=null)}onFrame(e){const t=this;t.rafId=null,t.ctx.commands.getSlideManager().prepSlidesForFrame();const n=t.ctx.store.getSnapshot(),r=[...n.slides].sort(((e,t)=>e.renderIndex-t.renderIndex)),s=Object.freeze({state:n.state,widths:n.widths,options:n.options,slides:r,animation:n.animation,transformPoints:n.transformPoints,time:e});t.renderFrame(s),t.ctx.store.markAsClean(),n.animation.isAnimating&&(t.ctx.emitter.emit(t.ctx.events.track.requestFrame,{time:e}),t.requestFrame())}renderFrame(e){const t=this;t.ctx.emitter.emit(t.ctx.events.frame.beforeRender,e);const n=a(e);t.effect.render(e,n),t.#k.updateSlides(e.animation.trackPosition),t.ctx.emitter.emit(t.ctx.events.frame.afterRender,e)}destroy(){const e=this,{emitter:t,events:n}=e.ctx;e.cancel(),t.off(n.effect.changed,e.handlers.effectChanged),t.off(n.store.changedDirty,e.handlers.storeDirty),e.#k&&(e.#k.destroy(),e.#k=null),e.effect=null}}class DataStore{#E;#I;#P;#T;#A;#L;#O;#M;constructor(e){const t=this;if(!e||"function"!=typeof e.emit)throw new Error("data-store requires an emitter with an emit method");t.#E=e,t.#M=!1,t.#I={},t.#P={selectedIndex:0,renderIndex:0,pageIndex:0,pageCount:1,isDragging:!1,slideCount:0},t.#T={viewport:0,track:0,slide:0,slideMin:0,gap:0,slideAndGap:0,paddingLeft:0,paddingRight:0},t.#A=[],t.#L={},t.#O={type:"jump",trackPosition:0,trackDelta:0,velocity:0,progress:1,isAnimating:!1,direction:0}}getOptions(){return Object.freeze({...this.#I})}setOptions(e={}){const t=this,n=t.getOptions();t.#I={...t.#I,...e};const r=t.getOptions();t.#B(),t.#E.emit(s.store.optionsChanged,{prevOptions:n,currentOptions:r})}getState(){return Object.freeze({...this.#P})}setState(e={}){const t=this,n=t.getState();t.#P={...t.#P,...e};const r=t.getState();t.#B(),t.#E.emit(s.store.stateChanged,{prevState:n,currentState:r}),void 0!==e.selectedIndex&&e.selectedIndex!==n.selectedIndex&&t.#E.emit(s.store.selectedIndexChanged,{prevIndex:n.selectedIndex,currentIndex:e.selectedIndex}),void 0!==e.renderIndex&&e.renderIndex!==n.renderIndex&&t.#E.emit(s.store.renderIndexChanged,{prevIndex:n.renderIndex,currentIndex:e.renderIndex}),void 0!==e.pageIndex&&e.pageIndex!==n.pageIndex&&t.#E.emit(s.store.pageIndexChanged,{prevPageIndex:n.pageIndex,currentPageIndex:e.pageIndex}),void 0!==e.pageCount&&e.pageCount!==n.pageCount&&t.#E.emit(s.store.pageCountChanged,{count:e.pageCount})}getWidths(){return Object.freeze({...this.#T})}setWidths(e={}){const t=this,n=t.getWidths();t.#T={...e};const r=t.getWidths();t.#B(),t.#E.emit(s.store.layoutChanged,{prevWidths:n,currentWidths:r})}getSlides(){return Object.freeze([...this.#A])}setSlides(e=[]){const t=this,n=t.getSlides();t.#A=[...e];const r=t.getSlides();t.setState({slideCount:t.#A.length}),t.#B(),t.#E.emit(s.store.slidesChanged,{prevSlides:n,currentSlides:r})}getTransformPoints(){return Object.freeze({...this.#L})}setTransformPoints(e={}){const t=this,n=t.getTransformPoints();t.#L={...e},t.#B(),t.#E.emit(s.store.transformPointsChanged,{prevPoints:n,currentPoints:Object.freeze({...t.#L})})}setAnimation(e={}){const t=this,n={...t.#O};t.#O={...t.#O,...e},t.#B(),void 0!==e.trackPosition&&e.trackPosition!==n.trackPosition&&t.#E.emit(s.track.positionChanged,{prevTrackPosition:n.trackPosition,currentTrackPosition:e.trackPosition,trackDelta:e.trackPosition-n.trackPosition,animationType:e.type||"unknown"})}getAnimation(){return Object.freeze({...this.#O})}clearAnimation(){this.#O={type:"jump",trackPosition:0,trackDelta:0,velocity:0,progress:1}}isDirty(){return this.#M}markAsClean(){const e=this;e.#M&&(e.#M=!1,e.#E.emit(s.store.changedClean))}#B(){const e=this;e.#M||(e.#M=!0,e.#E.emit(s.store.changedDirty))}getSnapshot(){const e=this;return Object.freeze({state:e.getState(),widths:e.getWidths(),slides:e.getSlides(),transformPoints:e.getTransformPoints(),options:e.getOptions(),animation:e.getAnimation()})}destroy(){const e=this;e.#E=null,e.#I=null,e.#P=null,e.#T=null,e.#A=null,e.#L=null,e.#O=null,e.#M=!1}}function c(e,t){return"number"==typeof e?e>0&&e<1?e*t:e:e.indexOf("px")>-1?parseFloat(e.replace("px","")):e.indexOf("%")>-1?parseFloat(e.replace("%",""))/100*t:0}const l=Object.freeze({throttle:function(e,t){var n=!1;return function(...r){n||(e.apply(this,r),n=!0,setTimeout((function(){n=!1}),t))}},debounce:function(e,t,n){var r;return function(...s){var i=this,o=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,s)}),t),o&&e.apply(i,s)}},deepMerge:function e(t,n){const r=e=>e&&"object"==typeof e;return Object.keys(n).reduce(((t,s)=>(Array.isArray(t[s])&&Array.isArray(n[s])?t[s]=t[s].concat(n[s]):r(t[s])&&r(n[s])?t[s]=e({...t[s]},n[s]):t[s]=n[s],t)),{...t})},convertValueToNumber:c,areOptionsEqual:function e(t,n){if(t===n)return!0;if("object"!=typeof t||null===t||"object"!=typeof n||null===n)return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}const r=Object.keys(t),s=Object.keys(n);if(r.length!==s.length)return!1;for(const i of r)if(!s.includes(i)||!e(t[i],n[i]))return!1;return!0},canLoop:function(e,t){const n=t.slidesPerView||1;return!!(t.loop&&e>n)},getSlidesInViewport:function(e,t=null,n=0){const r=e.store.getWidths(),s=e.store.getSlides();if(e.store.getState(),null===t){t=e.store.getAnimation().trackPosition||0}const i=r.viewport,o=r.slide;r.gap;const a=r.slideAndGap,c=-t-n,l=c+i+2*n,d=i/2-t,u=[];for(let e=0;e<s.length;e++){const t=s[e],n=void 0!==t.renderIndex?t.renderIndex:e,r=n*a,h=r+o,g=Math.max(r,c),p=Math.min(h,l),f=Math.max(0,p-g),m=Math.max(0,Math.min(1,f/o)),v=m>0,x=m>=.66;let b=0,y=0,C=0,S=1;if(f>0){const e=r+o/2-d;C=Math.max(-1,Math.min(1,e/(i/2))),e>0?(y=Math.max(0,Math.min(1,m)),S=1-y):y=1,e<0?(b=Math.max(0,Math.min(1,m)),S=-1*(1-b)):b=1,m>=1&&(b=1,y=1,S=0)}else{const e=r+o/2-d;e>0&&(S=1),e<0&&(S=-1)}u.push({slide:t,index:e,renderIndex:n,visibilityPercent:m,isVisible:v,isFullyVisible:x,leftVisibility:b,rightVisibility:y,parallax:C,parallaxVisibility:S,slideStart:r,slideEnd:h})}return u}});class TarotEffect{static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1/0,loopBuffer:{left:0,right:0}};constructor(e){const t=this;t.ctx=e,t.currentSlideWidth=0,t.currentTrackWidth=0}init(){}reInit(){}renderSlideWidth(e){this.currentSlideWidth!==e&&(this.currentSlideWidth=e,this.ctx.viewport.style.setProperty("--tarot-slide-width",`${e}px`))}renderTrackPosition(e){let t=e.isAnimating?`translate3d(${e.trackPosition}px,0,0)`:`translateX(${e.trackPosition}px)`;this.ctx.track.style.transform=t}renderTrackWidth(e){this.currentTrackWidth!==e&&(this.currentTrackWidth=e,this.ctx.track.style.width=`${e}px`)}render(e,t){}get rules(){return this.constructor.rules}destroy(){}}class CarouselEffect extends TarotEffect{static effectName="carousel";constructor(e){super(e)}render(e,t){const{slides:n,widths:r,state:s,animation:i}=e,o=this;o.renderTrackWidth(r.track),o.renderSlideWidth(r.slide),o.renderTrackPosition(i);for(let e=0,t=n.length;e<t;++e){const t=n[e];t&&t.style&&(t.style.transition="none",t.style.transform=`translateX(${t.trackPosition}px)`)}}destroy(){this.ctx.track.style.transform="",this.ctx.track.style.width=""}}class Fade extends TarotEffect{static effectName="fade";static rules={min_slideWidth:1,max_slideWidth:1/0,min_slidesPerView:1,max_slidesPerView:1,loopBuffer:{left:0,right:0}};constructor(e){super(e);const t=this;t.blurAmount=10,t.scaleAmount=.1,t.lastState=new WeakMap}render(e,t){const n=this,{slides:r,widths:s,animation:i}=e;n.renderSlideWidth(s.slide);const o=n.lastState;for(let e=0,s=r.length;e<s;++e){const s=r[e];if(t.isSlideInRange(s,"L+","L1").isInRange){"hiddenLeft"!==o.get(s)&&(n.applyHiddenLeftFilter(s),o.set(s,"hiddenLeft"));continue}const i=t.isSlideInRange(s,"CL1","L1");if(i.isInRange){const e=`fadeLeft:${Math.round(100*i.percent)}`;o.get(s)!==e&&(n.applyFadeLeftFilter(s,i.percent),o.set(s,e));continue}if(t.isSlideInRange(s,"R1","CL1").isInRange){"fadeRight"!==o.get(s)&&(n.applyFadeRightFilter(s),o.set(s,"fadeRight"));continue}t.isSlideInRange(s,"R+","R1").isInRange&&("hiddenRight"!==o.get(s)&&(n.applyHiddenRightFilter(s),o.set(s,"hiddenRight")))}}applyHiddenLeftFilter(e){e.style.opacity="0",e.style.display="none",e.style.zIndex="1",e.style.filter=`blur(${this.blurAmount}px)`,e.style.transform=`scale(${1+this.scaleAmount})`}applyFadeLeftFilter(e,t){t>.995&&(t=1);const n=(1-t)*this.blurAmount,r=1+(1-t)*this.scaleAmount;e.style.opacity=String(t),e.style.display="block",e.style.zIndex="1",e.style.filter=`blur(${n}px)`,e.style.transform=`scale(${r})`}applyFadeRightFilter(e){e.style.opacity="1",e.style.display="block",e.style.zIndex="0",e.style.filter="blur(0px)",e.style.transform="scale(1)"}applyHiddenRightFilter(e){e.style.opacity="0",e.style.display="none",e.style.zIndex="0",e.style.filter="blur(0px)",e.style.transform="scale(1)"}destroy(){super.destroy();const e=this.ctx.store.getSlides()||[];for(let t=0;t<e.length;t++){const n=e[t];n&&n.style&&(n.style.opacity="",n.style.display="",n.style.zIndex="",n.style.filter="",n.style.transform="")}this.lastState=null}}class AsNavFor{constructor(e){const t=this;t.ctx=e,t.otherCarousel=null,t.isNavCarousel=!0,t.isActive=!1,t.handlers={otherAnimationRequested:({index:e,velocity:n,type:r})=>{t.ctx.store.getState().selectedIndex!==e&&setTimeout((()=>{t.ctx.commands.goToSlide(e)}),1)},renderIndexChanged:({currentIndex:e})=>{if(!t.isActive)return;t.ctx.store.getState().selectedIndex!==e&&t.ctx.store.setState({selectedIndex:e})},optionsChanged:()=>{t.reInit()},selectedIndexChanged:({prevIndex:e,currentIndex:n})=>{t.isActive&&(t.updateOtherCarousel(),t.updateNavClasses(e,n))},keyDown:e=>{t.isActive&&t.handleKeyDown(e)},slideClick:({index:e,renderIndex:n,event:r})=>{if(!t.isActive)return;const s=t.ctx.store.getSlides()[e];if(s&&"function"==typeof s.focus)try{s.focus({preventScroll:!0})}catch(e){}t.ctx.commands.goToSlide(e)}},t.bindEvents(),t.init()}init(){const e=this,t=e.ctx.store.getOptions().asNavFor;if(!t)return e.disableNavUI?.(),void(e.isActive=!1);const n=document.querySelector(t);if(!n)return e.disableNavUI?.(),void(e.isActive=!1);e.otherCarousel=n,e.isActive=!0,e.setupNavOptions(),e.enableNavUI?.(),setTimeout((()=>{e.otherCarousel.on(e.ctx.events.animation.requested,e.handlers.otherAnimationRequested),e.updateNavClasses(-1,e.ctx.store.getState().selectedIndex);const{renderIndex:t,selectedIndex:n}=e.ctx.store.getState();t!==n&&e.ctx.store.setState({selectedIndex:t})}),40)}reInit(){const e=this;e.otherCarousel&&(e.otherCarousel.off(e.ctx.events.animation.requested,e.handlers.otherAnimationRequested),e.otherCarousel=null),e.disableNavUI(),e.isActive=!1,e.init()}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.on(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged),e.ctx.emitter.on(e.ctx.events.store.selectedIndexChanged,e.handlers.selectedIndexChanged),e.ctx.emitter.on(e.ctx.events.slides.click,e.handlers.slideClick)}enableNavUI(){const e=this;if(!e.isActive)return;e.ctx.carousel.classList.add("tarot-nav-carousel"),e.ctx.track.addEventListener("keydown",e.handlers.keyDown,!0),e.ctx.carousel.setAttribute("tabindex","0"),e.ctx.carousel.setAttribute("role","tablist"),e.ctx.carousel.setAttribute("aria-label","Carousel Navigation");const t=e.ctx.store.getSlides(),n=e.ctx.store.getState().selectedIndex;for(let e=0;e<t.length;e++){const r=t[e];r.setAttribute("role","tab"),r.setAttribute("tabindex",e===n?"0":"-1")}}disableNavUI(){const e=this;e.ctx.carousel.classList.remove("tarot-nav-carousel"),e.ctx.track.removeEventListener("keydown",e.handlers.keyDown,!0),e.ctx.carousel.removeAttribute("role"),e.ctx.carousel.removeAttribute("aria-label");e.ctx.store.getSlides().forEach((e=>{e.removeAttribute("aria-selected"),e.removeAttribute("role")}))}setupNavOptions(){const e=this;e.ctx.store.getOptions().centerSelectedSlide||e.ctx.store.setOptions({centerSelectedSlide:!0})}handleKeyDown(e){const t=this,n=t.ctx.store.getState().selectedIndex,r=t.ctx.store.getState().slideCount;switch(e.key){case"ArrowLeft":case"ArrowUp":e.preventDefault(),e.stopPropagation();const s=n>0?n-1:t.ctx.store.getOptions().loop?r-1:n;t.ctx.commands.goToSlide(s);const i=t.ctx.store.getSlides()[s];i&&"function"==typeof i.focus&&setTimeout((()=>{try{i.focus({preventScroll:!0})}catch(e){}}),0);break;case"ArrowRight":case"ArrowDown":e.preventDefault(),e.stopPropagation();const o=n<r-1?n+1:t.ctx.store.getOptions().loop?0:n;t.ctx.commands.goToSlide(o);const a=t.ctx.store.getSlides()[o];a&&"function"==typeof a.focus&&setTimeout((()=>{try{a.focus({preventScroll:!0})}catch(e){}}),0);break;case"Home":e.preventDefault(),e.stopPropagation(),t.ctx.commands.goToSlide(0);const c=t.ctx.store.getSlides();c[0]?.focus&&setTimeout((()=>{try{c[0].focus({preventScroll:!0})}catch(e){}}),0);break;case"End":e.preventDefault(),e.stopPropagation(),t.ctx.commands.goToSlide(r-1);const l=t.ctx.store.getSlides(),d=r-1;l[d]?.focus&&setTimeout((()=>{try{l[d].focus({preventScroll:!0})}catch(e){}}),0)}}updateNavClasses(e,t){const n=this.ctx.store.getSlides();e>=0&&n[e]&&(n[e].setAttribute("aria-selected","false"),n[e].setAttribute("tabindex","-1")),n[t]&&(n[t].setAttribute("aria-selected","true"),n[t].setAttribute("role","tab"),n[t].setAttribute("tabindex","0"))}updateOtherCarousel(){const e=this;if(!e.otherCarousel)return;const t=e.ctx.store.getState().selectedIndex;setTimeout((()=>{e.otherCarousel.goToSlide(t)}),1)}destroy(){const e=this;e.ctx.emitter.off(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.off(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged),e.ctx.emitter.off(e.ctx.events.store.selectedIndexChanged,e.handlers.selectedIndexChanged),e.ctx.emitter.off(e.ctx.events.slides.click,e.handlers.slideClick),e.disableNavUI(),e.otherCarousel&&e.otherCarousel.off(e.ctx.events.animation.requested,e.handlers.otherAnimationRequested),e.otherCarousel=null,e.isActive=!1}}class SyncWith{constructor(e){const t=this;t.ctx=e,t.otherCarousel=null,t.handlers={otherAnimationRequested:({index:e,velocity:n,type:r})=>{t.ctx.store.getState().renderIndex!==e&&t.ctx.commands.goToSlide(e)},optionsChanged:e=>{t.reInit()},renderIndexChanged:({prevIndex:e,currentIndex:n})=>{t.updateSyncWithCarousel()}},t.bindEvents(),t.init()}init(){const e=this,t=e.ctx.store.getOptions().syncWith;t&&(e.otherCarousel=document.querySelector(t),e.otherCarousel&&setTimeout((()=>{e.otherCarousel.on(e.ctx.events.animation.requested,e.handlers.otherAnimationRequested)}),100))}reInit(){const e=this;e.otherCarousel&&(e.otherCarousel.off(e.ctx.events.animation.requested,e.handlers.otherAnimationRequested),e.otherCarousel=null),e.init()}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.on(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged)}updateSyncWithCarousel(){const e=this;if(!e.otherCarousel)return;const t=e.ctx.store.getState().renderIndex;e.otherCarousel.goToSlide(t)}destroy(){const e=this;e.ctx.emitter.off(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.off(e.ctx.events.store.renderIndexChanged,e.handlers.renderIndexChanged),e.otherCarousel&&e.otherCarousel.off(e.ctx.events.animation.requested,e.handlers.otherAnimationRequested),e.otherCarousel=null}}class Autoplay{constructor(e){const t=this;t.ctx=e,t.autoplayTimer=null,t.autoplayOptions=t.ctx.store.getOptions().autoplay||{},t.debouncedResume=t.ctx.utils.debounce((()=>t.start()),1e4),t.handlers={userInteracted:()=>{t.pause()},optionsChanged:()=>{t.autoplayOptions=t.ctx.store.getOptions().autoplay||{},t.reInit()},tick:()=>{document.hasFocus?.()&&t.ctx.commands.next(-5)}},t.bindEvents(),t.reInit()}reInit(){const e=this;e.autoplayOptions=e.ctx.store.getOptions().autoplay||{},e.autoplayOptions.interval?e.start():e.stop()}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.user.interacted,e.handlers.userInteracted),e.ctx.emitter.on(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged)}start(){const e=this;if(e.stop(),!e.autoplayOptions.interval)return;let t=e.autoplayOptions.interval;0!==t&&!1!==t&&(!0===t&&(t=4e3),e.autoplayTimer=setInterval(e.handlers.tick,t))}stop(){clearInterval(this.autoplayTimer),this.autoplayTimer=null}pause(){const e=this;e.stop(),e.autoplayOptions.interval&&e.debouncedResume()}destroy(){const e=this;e.stop(),e.ctx.emitter.off(e.ctx.events.user.interacted,e.handlers.userInteracted),e.ctx.emitter.off(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.debouncedResume.cancel&&e.debouncedResume.cancel()}}class Buttons{constructor(e){const t=this;t.ctx=e,t.navOptions={},t.prevButtonButton=null,t.nextButtonButton=null,t.handlers={prevClick:e=>{t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"button",event:e}),t.ctx.commands.prev(5)},nextClick:e=>{t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"button",event:e}),t.ctx.commands.next(-5)},buttonFocus:e=>{t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"focus",event:e})},buttonBlur:e=>{},optionsChanged:()=>{t.reInit()},pageChanged:()=>{t.checkDisabledState()},windowResize:()=>{t.updateSmartButtons()}},t.init()}init(){const e=this;e.navOptions=e.ctx.store.getOptions().navigation||{},e.queryButtons(),e.nextButton||e.buildNextButton(),e.prevButton||e.buildPrevButton(),e.checkButtonOptions(),e.bindUI(),e.bindEvents(),e.checkDisabledState(),setTimeout((()=>{e.updateSmartButtons()}),8),setTimeout((()=>{e.updateSmartButtons()}),30)}reInit(){const e=this;e.navOptions=e.ctx.store.getOptions().navigation||{},e.checkButtonOptions(),e.checkDisabledState(),e.updateSmartButtons()}bindUI(){const e=this;e.unbindUI(),e.prevButton&&(e.prevButton.addEventListener("click",e.handlers.prevClick,!0),e.prevButton.addEventListener("focus",e.handlers.buttonFocus),e.prevButton.addEventListener("blur",e.handlers.buttonBlur)),e.nextButton&&(e.nextButton.addEventListener("click",e.handlers.nextClick,!0),e.nextButton.addEventListener("focus",e.handlers.buttonFocus),e.nextButton.addEventListener("blur",e.handlers.buttonBlur));const t=e.ctx.store.getSlides();if(t.length>0){let n=t[0].el?.querySelector("img")||!1;n&&n.complete?e.updateSmartButtons(n):n&&(n.onload=function(){e.updateSmartButtons(n)})}}unbindUI(){const e=this;e.prevButton&&(e.prevButton.removeEventListener("click",e.handlers.prevClick,!0),e.prevButton.removeEventListener("focus",e.handlers.buttonFocus),e.prevButton.removeEventListener("blur",e.handlers.buttonBlur)),e.nextButton&&(e.nextButton.removeEventListener("click",e.handlers.nextClick,!0),e.nextButton.removeEventListener("focus",e.handlers.buttonFocus),e.nextButton.removeEventListener("blur",e.handlers.buttonBlur))}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.on(e.ctx.events.store.pageIndexChanged,e.handlers.pageChanged),e.ctx.emitter.on(e.ctx.events.window.resize,e.handlers.windowResize)}checkButtonOptions(){const e=this;e.navOptions.showButtons?e.showButtons():e.hideButtons()}queryButtons(){const e=this,t=e.navOptions;if(t.prevButtonSelector&&(e.prevButton=document.querySelector(t.prevButtonSelector)),t.nextButtonSelector&&(e.nextButton=document.querySelector(t.nextButtonSelector)),!e.prevButton){const t=e.ctx.carousel.querySelectorAll('[data-action="tarot-prev"]');e.prevButton=Array.from(t).find((t=>t.closest("tarot-carousel")===e.ctx.carousel))||null}if(!e.nextButton){const t=e.ctx.carousel.querySelectorAll('[data-action="tarot-next"]');e.nextButton=Array.from(t).find((t=>t.closest("tarot-carousel")===e.ctx.carousel))||null}}buildPrevButton(){const e=this;e.ctx.carousel.insertAdjacentHTML("afterbegin",'\n\t\t\t<button class="tarot-button" data-action="tarot-prev" aria-label="previous slide">\n\t\t\t\t<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n\t\t\t\t\t<title>angle left</title>\n\t\t\t\t\t<path d="m21 7-9 9 9 9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t'),e.prevButton=e.ctx.carousel.querySelector('[data-action="tarot-prev"]')}buildNextButton(){const e=this;e.ctx.carousel.insertAdjacentHTML("afterbegin",'\n\t\t\t<button class="tarot-button" data-action="tarot-next" aria-label="next slide">\n\t\t\t\t<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n\t\t\t\t\t<title>angle right</title>\n\t\t\t\t\t<path d="m11 25 9-9-9-9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t'),e.nextButton=e.ctx.carousel.querySelector('[data-action="tarot-next"]')}showButtons(){const e=this,t=e.prevButton,n=e.nextButton;t&&!1!==e.navOptions.showPrevButton?(t.style.display="",t.setAttribute("aria-label","previous"),t.classList.add("tarot-button","tarot-prev")):e.hidePrevButton(),n&&!1!==e.navOptions.showNextButton?(n.style.display="",n.setAttribute("aria-label","next"),n.classList.add("tarot-button","tarot-next")):e.hideNextButton()}hideButtons(){this.hidePrevButton(),this.hideNextButton()}hidePrevButton(){this.prevButton&&(this.prevButton.style.display="none")}hideNextButton(){this.nextButton&&(this.nextButton.style.display="none")}updateSmartButtons(){const e=this,t=e.ctx.store.getOptions().navigation?.smartButtons||!1,n=e.prevButton,r=e.nextButton,s=40,i=e.ctx.viewport,o=i?.offsetWidth||0,a=e.ctx.store.getSlides();if(!i)return;if(!a||0===a.length)return;if(!t)return n&&n.classList.remove("tarot-smart-position"),void(r&&r.classList.remove("tarot-smart-position"));const c=a[0]?.el;if(!c)return;const l=window.getComputedStyle(i),d=parseInt(l.paddingTop)||0;let u=i.offsetHeight;const h=c.querySelector("img");h&&h.offsetHeight<u&&(u=h.height+2*d),u/=2;const g=e.ctx.store.getWidths(),p=g.paddingLeft||0,f=g.paddingRight||0,m=g.gap||0;if(n){n.classList.add("tarot-smart-position"),n.style.top=`${u}px`;let e=s,t=p-m/2,r=p;window.innerWidth===o?t<s?r>=s?e=r:m>0&&(e+=m):t>=s&&(e=t):e=r,n.style.left=`${e}px`}if(r){r.classList.add("tarot-smart-position"),r.style.top=`${u}px`;let e=s,t=f-m/2,n=f;window.innerWidth===o?t<s?n>=s?e=n:m>0&&(e+=m):t>=s&&(e=t):e=n,r.style.right=`${e}px`}}checkDisabledState(){const e=this,t=e.ctx.store.getState(),n=e.ctx.store.getOptions(),r=t.pageIndex,s=t.pageCount;n.loop||(e.prevButton&&(e.prevButton.disabled=0==r),e.nextButton&&(e.nextButton.disabled=r==s-1))}destroy(){const e=this;e.unbindUI(),e.ctx.emitter.off(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.off(e.ctx.events.store.pageIndexChanged,e.handlers.pageChanged),e.ctx.emitter.off(e.ctx.events.window.resize,e.handlers.windowResize),e.prevButtonButton=null,e.nextButtonButton=null}}class LazyLoad{constructor(e){const t=this;t.ctx=e,t.handlers={userInteracted:()=>{t.checkLazyImages(),t.ctx.emitter.off(t.ctx.events.user.interacted,t.handlers.userInteracted)},slidesChanged:()=>{t.reInit()}},t.init()}init(){this.bindEvents(),this.checkLazyImages()}reInit(){this.checkLazyImages()}bindEvents(){const e=this,{emitter:t,events:n}=e.ctx;t.on(n.user.interacted,e.handlers.userInteracted),t.on(n.store.slidesChanged,e.handlers.slidesChanged)}checkLazyImages(){const e=this.ctx.store.getSlides();if(!e||void 0===e.length)return void console.warn("LazyLoad: Slides not available");let t;for(let n=0,r=e.length;n<r;++n)if(e[n]&&e[n].el){t=e[n].el.querySelectorAll('img[loading="lazy"]');for(let e=0,n=t.length;e<n;++e)t[e].removeAttribute("loading")}}destroy(){const e=this,{emitter:t,events:n}=e.ctx;t.off(n.user.interacted,e.handlers.userInteracted),t.off(n.store.slidesChanged,e.handlers.slidesChanged)}}class Pagination{constructor(e){const t=this;t.ctx=e,t.navOptions={},t.paginationContainer=null,t.dotsList=null,t.isAutoGeneratedNav=!1,t.debouncedRender=t.ctx.utils.debounce((()=>t.render()),20),t.handlers={paginationClick:e=>{t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"pagination",event:e});const n=e.target.closest('[data-action="tarot-go-to-page"]');if(!n)return;const r=parseInt(n.getAttribute("data-page-index"),10);t.activateDot(r)},keyDown:e=>{if(!["ArrowLeft","ArrowRight","Home","End"].includes(e.key))return;const n=Array.from(t.paginationContainer.querySelectorAll(".tarot-dots-button")),r=n.findIndex((e=>"0"===e.getAttribute("tabIndex")));let s=r;const i=t.ctx.store.getOptions();switch(e.key){case"ArrowRight":s=r+1,s>=n.length&&(s=i.loop?0:r);break;case"ArrowLeft":s=r-1,s<0&&(s=i.loop?n.length-1:r);break;case"Home":s=0;break;case"End":s=n.length-1;break;default:return}e.preventDefault(),e.stopPropagation(),n.forEach(((e,t)=>{e.tabIndex=t===s?0:-1})),n[s].focus(),t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"key",event:e}),t.activateDot(s)},optionsChanged:()=>{t.reInit()},slidesChanged:()=>{t.reInit()},pageChanged:()=>{t.updateSelectedDot()}},t.init()}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.on(e.ctx.events.store.slidesChanged,e.handlers.slidesChanged),e.ctx.emitter.on(e.ctx.events.store.pageIndexChanged,e.handlers.pageChanged),e.paginationContainer.addEventListener("click",e.handlers.paginationClick,!1),e.paginationContainer.addEventListener("keydown",e.handlers.keyDown,!1)}init(){const e=this;if(e.navOptions=e.ctx.store.getOptions().navigation||{},e.isAutoGeneratedNav=!1,e.navOptions&&e.navOptions.paginationSelector){const t=document.querySelector(e.navOptions.paginationSelector);t&&(e.paginationContainer=t)}if(!e.paginationContainer){e.isAutoGeneratedNav=!0;const t=document.createElement("nav");t.setAttribute("aria-label","carousel navigation"),e.paginationContainer=document.createElement("div"),t.appendChild(e.paginationContainer),e.ctx.carousel.appendChild(t)}e.paginationContainer.innerHTML="",e.paginationContainer.classList.add("tarot-dots-container"),e.dotsList=document.createElement("ul"),e.dotsList.classList.add("tarot-dots-list"),e.dotsList.setAttribute("role","tablist"),e.dotsList.setAttribute("aria-orientation","horizontal"),e.paginationContainer.appendChild(e.dotsList),e.bindEvents(),e.render()}reInit(){const e=this;e.navOptions=e.ctx.store.getOptions().navigation||{},e.debouncedRender()}render(){const e=this,t=e.ctx.store.getState(),n=t.pageIndex,r=t.pageCount,s=e.ctx.carousel.id||"";e.dotsList.innerHTML="";for(let t=0;t<r;++t){const r=document.createElement("li");r.setAttribute("role","presentation");const i=document.createElement("button");i.type="button",i.classList.add("tarot-dots-button"),i.setAttribute("role","tab"),i.setAttribute("data-page-index",t),i.setAttribute("data-action","tarot-go-to-page"),i.setAttribute("aria-selected",n===t?"true":"false"),i.tabIndex=n===t?0:-1,i.setAttribute("aria-label",`page ${t+1}`),i.id=`carousel-tab-${t+1}`,s&&i.setAttribute("aria-controls",s);const o=document.createElement("span");o.className="tarot-visually-hidden",o.textContent=`slide ${t+1}`,i.appendChild(o),r.appendChild(i),e.dotsList.appendChild(r)}e.updateSelectedDot(),e.navOptions&&e.navOptions.showPagination?e.show():e.hide()}activateDot(e){this.ctx.commands.goToPage(e),this.updateSelectedDot()}updateSelectedDot(){const e=this.paginationContainer.querySelectorAll(".tarot-dots-button"),t=`${this.ctx.store.getState().pageIndex}`;e.forEach((e=>{e.dataset.pageIndex===t?(e.setAttribute("aria-selected","true"),e.tabIndex=0):(e.setAttribute("aria-selected","false"),e.tabIndex=-1)}))}show(){this.paginationContainer.parentElement?this.paginationContainer.parentElement.style.display="":this.paginationContainer.style.display=""}hide(){this.paginationContainer.parentElement?this.paginationContainer.parentElement.style.display="none":this.paginationContainer.style.display="none"}destroy(){const e=this;e.paginationContainer&&(e.paginationContainer.removeEventListener("click",e.handlers.paginationClick,!1),e.paginationContainer.removeEventListener("keydown",e.handlers.keyDown,!1)),e.ctx.emitter.off(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.off(e.ctx.events.store.slidesChanged,e.handlers.slidesChanged),e.ctx.emitter.off(e.ctx.events.store.pageIndexChanged,e.handlers.pageChanged),e.debouncedRender&&"function"==typeof e.debouncedRender.cancel&&e.debouncedRender.cancel(),e.isAutoGeneratedNav&&e.paginationContainer&&e.paginationContainer.parentNode&&e.paginationContainer.parentNode.parentNode===e.ctx.carousel&&e.ctx.carousel.removeChild(e.paginationContainer.parentNode),e.paginationContainer=null,e.dotsList=null,e.debouncedRender=null}}class Scrollbar{constructor(e){const t=this;t.ctx=e,t.navOptions={},t.scrollbarContainer=null,t.scrollbarTrack=null,t.scrollbarThumb=null,t.snapPointsContainer=null,t.isAutoGeneratedScrollbar=!1,t.isDragging=!1,t.dragStartX=0,t.dragStartThumbPercent=0,t.isUpdatingFromCarousel=!1,t.lastRequestedPercent=null,t.lastRequestedTrackPosition=null,t.rafId=null,t.debouncedRender=t.ctx.utils.debounce((()=>t.render()),20),t.handlers={pointerDown:e=>t.startDrag(e),pointerMove:e=>t.handleDrag(e),pointerUp:e=>t.endDrag(e),scrollbarClick:e=>{if(t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"scrollbar",event:e}),e.target.closest(".tarot-scrollbar-thumb"))return;const n=e.target.closest("[data-page]");if(n){const e=parseInt(n.getAttribute("data-page"),10);t.navigateToPage(e)}else t.navOptions.scrollbarClickToNavigate&&t.handleTrackClick(e)},keyDown:e=>{if(e.target!==t.scrollbarThumb)return;if(!["ArrowLeft","ArrowRight","Home","End"].includes(e.key))return;const n=t.ctx.store.getState(),r=t.ctx.store.getOptions();let s=n.pageIndex;switch(e.key){case"ArrowRight":s=n.pageIndex+1,s>=n.pageCount&&(s=r.loop?0:n.pageCount-1);break;case"ArrowLeft":s=n.pageIndex-1,s<0&&(s=r.loop?n.pageCount-1:0);break;case"Home":s=0;break;case"End":s=n.pageCount-1;break;default:return}e.preventDefault(),e.stopPropagation(),t.ctx.emitter.emit(t.ctx.events.user.interacted,{via:"key",event:e}),t.navigateToPage(s)},optionsChanged:()=>{t.reInit()},slidesChanged:()=>{t.reInit()},pageChanged:()=>{t.updateThumbPosition(),t.updateAriaValues()},pageCountChanged:()=>{t.buildSnapPoints(),t.checkVisibility()},windowResize:()=>{t.updateThumbPosition()},trackPositionChanged:e=>{t.handleTrackPositionChanged(e)}},t.init()}convertPercentToTrackPosition(e){const t=this.ctx.store.getState(),n=this.ctx.store.getWidths();if(t.pageCount<=1)return 0;return-e/100*((t.pageCount-1)*n.slideAndGap)}convertTrackPositionToPercent(e){const t=this.ctx.store.getState(),n=this.ctx.store.getWidths();if(t.pageCount<=1)return 0;const r=(t.pageCount-1)*n.slideAndGap;return 0===r?0:Math.max(0,Math.min(100,Math.abs(e)/r*100))}calculateScrollbarPercent(e){const t=this;if(!t.scrollbarTrack)return 0;const n=t.scrollbarTrack.getBoundingClientRect().width,r=(e.clientX-t.dragStartX)/n*100;let s=t.dragStartThumbPercent+r;return Math.max(0,Math.min(100,s))}handleTrackPositionChanged(e){const t=this;t.isDragging||t.isOurChange(e)||t.updateScrollbarVisualPosition(e.currentTrackPosition)}isOurChange(e){const t=this;return null!==t.lastRequestedTrackPosition&&Math.abs(e.currentTrackPosition-t.lastRequestedTrackPosition)<5}updateScrollbarVisualPosition(e){const t=this;t.rafId&&cancelAnimationFrame(t.rafId),t.rafId=requestAnimationFrame((()=>{const n=t.convertTrackPositionToPercent(e);t.scrollbarThumb.style.left=`${n}%`,t.rafId=null}))}bindEvents(){const e=this;e.ctx.emitter.on(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.on(e.ctx.events.store.slidesChanged,e.handlers.slidesChanged),e.ctx.emitter.on(e.ctx.events.store.pageIndexChanged,e.handlers.pageChanged),e.ctx.emitter.on(e.ctx.events.store.pageCountChanged,e.handlers.pageCountChanged),e.ctx.emitter.on(e.ctx.events.window.resize,e.handlers.windowResize),e.ctx.emitter.on(e.ctx.events.track.positionChanged,e.handlers.trackPositionChanged),e.scrollbarContainer&&(e.scrollbarContainer.addEventListener("click",e.handlers.scrollbarClick,!1),e.scrollbarContainer.addEventListener("keydown",e.handlers.keyDown,!1),e.scrollbarContainer.addEventListener("pointerdown",e.handlers.pointerDown,!1))}unbindEvents(){const e=this;e.ctx.emitter.off(e.ctx.events.store.optionsChanged,e.handlers.optionsChanged),e.ctx.emitter.off(e.ctx.events.store.slidesChanged,e.handlers.slidesChanged),e.ctx.emitter.off(e.ctx.events.store.pageIndexChanged,e.handlers.pageChanged),e.ctx.emitter.off(e.ctx.events.store.pageCountChanged,e.handlers.pageCountChanged),e.ctx.emitter.off(e.ctx.events.window.resize,e.handlers.windowResize),e.ctx.emitter.off(e.ctx.events.track.positionChanged,e.handlers.trackPositionChanged),e.scrollbarContainer&&(e.scrollbarContainer.removeEventListener("click",e.handlers.scrollbarClick,!1),e.scrollbarContainer.removeEventListener("keydown",e.handlers.keyDown,!1),e.scrollbarContainer.removeEventListener("pointerdown",e.handlers.pointerDown,!1)),document.removeEventListener("pointermove",e.handlers.pointerMove,!1),document.removeEventListener("pointerup",e.handlers.pointerUp,!1)}init(){const e=this;e.navOptions=e.ctx.store.getOptions().navigation||{},e.isAutoGeneratedScrollbar=!1,e.queryScrollbarContainer(),e.scrollbarContainer&&(e.buildScrollbar(),e.bindEvents(),e.render())}reInit(){const e=this;e.navOptions=e.ctx.store.getOptions().navigation||{},e.debouncedRender()}queryScrollbarContainer(){const e=this;if(e.navOptions&&e.navOptions.scrollbarSelector){const t=document.querySelector(e.navOptions.scrollbarSelector);if(t)return void(e.scrollbarContainer=t)}!e.scrollbarContainer&&e.navOptions.showScrollbar&&(e.isAutoGeneratedScrollbar=!0,e.scrollbarContainer=document.createElement("div"),e.ctx.carousel.appendChild(e.scrollbarContainer))}buildScrollbar(){const e=this;if(!e.scrollbarContainer)return;e.scrollbarContainer.innerHTML="",e.scrollbarContainer.classList.add("tarot-scrollbar"),e.scrollbarContainer.classList.add(`tarot-scrollbar--${e.navOptions.scrollbarPosition||"bottom"}`),e.scrollbarContainer.classList.add(`tarot-scrollbar--${e.navOptions.scrollbarSize||"normal"}`);const t=e.ctx.carousel.id||"";e.scrollbarContainer.setAttribute("role","scrollbar"),e.scrollbarContainer.setAttribute("aria-orientation","horizontal"),e.scrollbarContainer.setAttribute("aria-label","Carousel navigation"),t&&e.scrollbarContainer.setAttribute("aria-controls",t),e.scrollbarTrack=document.createElement("div"),e.scrollbarTrack.classList.add("tarot-scrollbar-track"),e.navOptions.scrollbarShowSnapPoints&&(e.snapPointsContainer=document.createElement("div"),e.snapPointsContainer.classList.add("tarot-scrollbar-snap-points"),e.scrollbarTrack.appendChild(e.snapPointsContainer)),e.scrollbarThumb=document.createElement("div"),e.scrollbarThumb.classList.add("tarot-scrollbar-thumb"),e.scrollbarThumb.setAttribute("role","slider"),e.scrollbarThumb.setAttribute("tabindex","0"),e.scrollbarThumb.setAttribute("aria-label","Navigation thumb"),e.scrollbarTrack.appendChild(e.scrollbarThumb),e.scrollbarContainer.appendChild(e.scrollbarTrack)}buildSnapPoints(){const e=this;if(!e.snapPointsContainer)return;const t=e.ctx.store.getState().pageCount;e.snapPointsContainer.innerHTML="";for(let n=0;n<t;n++){const r=document.createElement("div");r.classList.add("tarot-scrollbar-snap-point"),r.setAttribute("data-page",n),r.setAttribute("aria-label",`Go to page ${n+1}`);const s=t>1?n/(t-1)*100:0;r.style.left=`${s}%`,e.snapPointsContainer.appendChild(r)}}render(){const e=this;e.checkVisibility()?(e.show(),e.buildSnapPoints(),e.updateThumbPosition(),e.updateAriaValues()):e.hide()}checkVisibility(){const e=this,t=e.ctx.store.getState();return!!e.navOptions.showScrollbar&&!(e.navOptions.scrollbarAutoHide&&t.pageCount<=1)}show(){const e=this;e.scrollbarContainer&&(e.scrollbarContainer.style.display="")}hide(){const e=this;e.scrollbarContainer&&(e.scrollbarContainer.style.display="none")}updateThumbPosition(){const e=this;if(!e.scrollbarThumb)return;const t=e.ctx.store.getState(),n=t.pageCount>1?t.pageIndex/(t.pageCount-1)*100:0;e.scrollbarThumb.style.left=`${n}%`}updateAriaValues(){const e=this;if(!e.scrollbarThumb)return;const t=e.ctx.store.getState();e.scrollbarThumb.setAttribute("aria-valuemin","0"),e.scrollbarThumb.setAttribute("aria-valuemax",Math.max(0,t.pageCount-1)),e.scrollbarThumb.setAttribute("aria-valuenow",t.pageIndex),e.scrollbarThumb.setAttribute("aria-label",`Page ${t.pageIndex+1} of ${t.pageCount}`)}handleTrackClick(e){const t=this;if(!t.scrollbarTrack)return;const n=t.scrollbarTrack.getBoundingClientRect(),r=e.clientX-n.left,s=n.width,i=Math.max(0,Math.min(100,r/s*100)),o=t.ctx.store.getState(),a=Math.round(i/100*(o.pageCount-1));t.navigateToPage(a)}navigateToPage(e){this.ctx.commands.goToPage(e)}startDrag(e){const t=this;if(!t.navOptions.scrollbarDragToNavigate)return;if(!e.target.closest(".tarot-scrollbar-thumb"))return;e.preventDefault(),t.isDragging=!0,t.dragStartX=e.clientX;const n=t.ctx.store.getState();t.dragStartThumbPercent=n.pageCount>1?n.pageIndex/(n.pageCount-1)*100:0,document.addEventListener("pointermove",t.handlers.pointerMove,!1),document.addEventListener("pointerup",t.handlers.pointerUp,!1),t.scrollbarThumb.setPointerCapture&&t.scrollbarThumb.setPointerCapture(e.pointerId),t.scrollbarContainer.classList.add("tarot-scrollbar--dragging")}handleDrag(e){const t=this;if(!t.isDragging||!t.scrollbarTrack)return;e.preventDefault();const n=t.calculateScrollbarPercent(e),r=t.convertPercentToTrackPosition(n);t.scrollbarThumb.style.left=`${n}%`,t.ctx.commands.requestTrackPosition(`${r}px`),t.lastRequestedPercent=n,t.lastRequestedTrackPosition=r}endDrag(e){const t=this;if(!t.isDragging)return;t.isDragging=!1,document.removeEventListener("pointermove",t.handlers.pointerMove,!1),document.removeEventListener("pointerup",t.handlers.pointerUp,!1),t.scrollbarThumb.releasePointerCapture&&t.scrollbarThumb.releasePointerCapture(e.pointerId),t.scrollbarContainer.classList.remove("tarot-scrollbar--dragging");const n=t.ctx.store.getState();t.ctx.commands.goToPage(n.pageIndex),setTimeout((()=>{t.lastRequestedPercent=null,t.lastRequestedTrackPosition=null}),100)}destroy(){const e=this;e.unbindEvents(),e.debouncedRender&&"function"==typeof e.debouncedRender.cancel&&e.debouncedRender.cancel(),e.rafId&&(cancelAnimationFrame(e.rafId),e.rafId=null),e.isAutoGeneratedScrollbar&&e.scrollbarContainer&&e.scrollbarContainer.parentNode===e.ctx.carousel&&e.ctx.carousel.removeChild(e.scrollbarContainer),e.scrollbarContainer=null,e.scrollbarTrack=null,e.scrollbarThumb=null,e.snapPointsContainer=null,e.debouncedRender=null}}class Tarot extends HTMLElement{static effects={carousel:CarouselEffect,fade:Fade};static plugins=[AsNavFor,SyncWith,Autoplay,Buttons,LazyLoad,Pagination,Scrollbar];static instanceCount=0;static registerEffect(e){if(!e)return void console.warn("tarot-carousel.registerEffect requires an effect class");let t=e.effectName;if(!t)return void console.warn("tarot-carousel.registerEffect: effect must have a static string id (e.g., effectName)");const n=String(t).trim().toLowerCase().replace(/effect$/,"");this.effects[n]&&console.warn(`tarot-carousel: overwriting existing effect '${n}'`),this.effects[n]=e;try{"undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent("tarot:effect-registered",{detail:{effectName:n}}))}catch(e){}}static use(e){const t=this;return t.plugins||(t.plugins=[]),t.plugins.push(e),t}#g;#D;#t;#R;#F;#q;#N;#V;#z;#W;#j;#$=[];#H;#U;#X;constructor(){super();const e=this;e.id||(e.id=`tarot-carousel-${Tarot.instanceCount}`),Tarot.instanceCount++,e.#g=new EventEmitter,e.#D=new DataStore(e.#g)}async connectedCallback(){const e=this;customElements.get("tarot-slide")||(await customElements.whenDefined("tarot-slide"),await new Promise(requestAnimationFrame)),e.#G(),e.setAttribute("tabindex","0"),e.#t=e.#_();const t=e.#t;e.#N=new OptionsManager(t),e.#W=new WindowEvents(t),e.#q=new SlideManager(t),e.#V=new EffectManager(t,e.constructor.effects),e.#z=new DragHandler(t),e.#F=new TrackAnimator(t),e.#R=new TrackManager(t,e.#F),e.#j=new FrameEngine(t),e.#Y(),e.#V.loadCurrentEffect(),e.#K();e.constructor.plugins.forEach((n=>{try{const r=new n(t);e.#$.push(r)}catch(e){console.error(`plugin ${n?.name||"(anonymous)"} failed to initialize:`,e)}}));const n=e.#D.getOptions().initialIndex??0;e.jumpToSlide(n),e.#j.requestFrame()}#_(){const e=this;return Object.freeze({emitter:e.#g,events:s,store:e.#D,utils:l,carousel:e,viewport:e.#H,track:e.#U,announcements:e.#X,commands:{goToSlide:(t,n=0)=>e.goToSlide(t,n),jumpToSlide:t=>e.jumpToSlide(t),next:(t=0)=>e.next(t),prev:(t=0)=>e.prev(t),goToPage:(t,n=0)=>e.goToPage(t,n),jumpToPage:t=>e.jumpToPage(t),requestTrackPosition:t=>e.requestTrackPosition(t),getEffect:()=>e.#V.getEffect(),getSlideManager:()=>e.#q,getTrackManager:()=>e.#R,requestFrame:()=>e.#j.requestFrame(0)}})}#G(){const e=this;let t=e.querySelector(":scope tarot-viewport"),n=e.querySelector(":scope tarot-slides");if(!t&&!n)throw new Error("tarot-carousel: missing both <tarot-viewport> and <tarot-slides> elements");if(n&&!t&&(t=document.createElement("tarot-viewport"),n.parentNode.insertBefore(t,n),t.appendChild(n)),t&&!n){for(n=document.createElement("tarot-slides");t.firstChild;)n.appendChild(t.firstChild);t.appendChild(n)}const r=document.createElement("div");r.className="tarot-visually-hidden tarot-announcements",r.id=`tarot-announcements-${e.id}`,r.setAttribute("aria-live","polite"),r.setAttribute("aria-atomic","true"),e.insertBefore(r,e.firstChild),e.#H=t,e.#U=n,e.#X=r}#Y(){const e=this,{emitter:t,events:n,store:r}=e.#t;t.on(n.store.optionsChanged,(({currentOptions:t})=>{e.#K(t),e.#V.reInit(),e.jumpToSlide(r.getState().renderIndex)})),t.on(n.window.resize,(()=>{e.#K(r.getOptions()),e.#V.reInit(),e.jumpToSlide(r.getState().renderIndex)})),t.on(n.slides.click,(({index:t})=>{e.#D.setState({selectedIndex:t}),e.#D.getOptions().goToSelectedSlide&&e.goToSlide(t)})),t.on(n.keyboard.arrow,(({direction:t})=>{-1===t?e.prev():e.next()}))}#K(e){const t=this,n=e||t.#D.getOptions(),r=t.#D.getSlides(),s=function({viewportEl:e,options:t,slideCount:n}){const r=e.offsetWidth||0,s=Math.max(1,Number(t.slidesPerView)||1),i=c(t.gap,r),o=c(t.paddingLeft,r),a=c(t.paddingRight,r),l=o+a,d=i*(s-1),u=Math.max(0,r-d-l);let h=s>0?Math.round(u/s*1e3)/1e3:0;const g=c(t.slideMinWidth,h);return h<g&&(h=g),{viewport:r,track:Math.max(0,n)*(h+i),slide:h,slideMin:g,gap:i,slideAndGap:Math.round(1e3*(h+i))/1e3,paddingLeft:o,paddingRight:a}}({viewportEl:t.#H,options:n,slideCount:r.length});t.#D.setWidths(s);const i=function(e){const{store:t}=e,n=t.getWidths(),r=t.getOptions(),s=n.slide/2,i=n.slideAndGap,o=r.slidesPerView,a=n.paddingLeft+s,c={CL1:a};for(let e=1;e<=o;e++)c[`CL${e}`]=a+i*(e-1);for(let e=1;e<=o;e++){const t=o-e+1;c[`CR${e}`]=c[`CL${t}`]}c.C=1===o?c.CL1:(c.CL1+c[`CL${o}`])/2;for(let e=1;e<=10;e++)c[`L${e}`]=a-i*e;const l=c[`CL${o}`];for(let e=1;e<=10;e++)c[`R${e}`]=l+i*e;return c}(t.#t);t.#D.setTransformPoints(i);const o=function({loop:e,slidesPerMove:t,slidesPerView:n,slideCount:r}){if(e)return Math.max(1,Math.ceil(r/t));if(r<=n)return 1;const s=r-n;return Math.ceil(s/t)+1}({loop:n.loop,slidesPerMove:n.slidesPerMove,slidesPerView:n.slidesPerView,slideCount:r.length});t.#D.setState({pageCount:o})}next(e=0){this.goToPage(this.state.pageIndex+1,e)}prev(e=0){this.goToPage(this.state.pageIndex-1,e)}goToSlide(e,t=0){if(void 0===e)return;const n=this,r=n.#D.getState(),i=n.#D.getSlides(),o=r.slideCount??i.length;if(e<0){const r=n.#D.getOptions();e=r.loop?(e%o+o)%o:0,r.loop||t||(t=10)}else if(e>=o){const r=n.#D.getOptions();e=r.loop?e%o:o-1,r.loop||t||(t=-10)}n.#D.setState({renderIndex:e,pageIndex:n.#J(e)}),n.#g.emit(s.animation.requested,{index:e,velocity:t,type:"animate"})}jumpToSlide(e){if(void 0===e)return;const t=this,n=t.#D.getState(),r=t.#D.getSlides(),i=(n.slideCount??r.length)-1;if(e<0||e>i)throw new Error(`slide index ${e} is out of bounds. valid range is 0 to ${i}.`);t.#D.setState({renderIndex:e,pageIndex:t.#J(e)}),t.#g.emit(s.animation.requested,{index:e,velocity:0,type:"jump"})}goToPage(e,t=0){if(void 0===e)return;const n=this,r=n.#D.getState(),s=n.#D.getOptions();e<0?(e=s.loop?(e%r.pageCount+r.pageCount)%r.pageCount:0,s.loop||t||(t=10)):e>=r.pageCount&&(e=s.loop?0:r.pageCount-1,s.loop||t||(t=-10));const i=e*(s.slidesPerMove??1);n.goToSlide(i,t)}jumpToPage(e){if(void 0===e)return;const t=this,n=t.#D.getState(),r=t.#D.getOptions();e<0?e=r.loop?(e%n.pageCount+n.pageCount)%n.pageCount:0:e>=n.pageCount&&(e=r.loop?0:n.pageCount-1);const s=e*(r.slidesPerMove??1);t.jumpToSlide(s)}requestTrackPosition(e){const t=this;if(null==e)return;t.#D.getState(),t.#D.getOptions();let n=0;if("string"==typeof e)if(e.endsWith("px"))n=parseFloat(e.replace("px",""));else if(e.endsWith("%")){const r=parseFloat(e.replace("%",""));n=t.#Q(r)}else{const r=parseFloat(e);n=t.#Q(r)}else{if("number"!=typeof e)return void console.warn("requestTrackPosition: invalid position type",e);n=t.#Q(e)}t.#g.emit(s.animation.requested,{trackPosition:n,velocity:0,type:"jump"})}#Q(e){const t=this,n=t.#D.getState(),r=t.#D.getOptions();if(e=Math.max(0,Math.min(100,e)),n.pageCount<=1)return 0;const s=(n.pageCount-1)*(r.slidesPerMove??1);return e/100*t.#R.getTrackPosForIndex(s)}#J(e){const t=this.#D.getOptions().slidesPerMove??1;return Math.floor(e/t)}get state(){return this.#D.getState()}get slides(){return this.#D.getSlides()}get options(){return this.#D.getOptions()}get viewport(){return this.#H}get track(){return this.#U}getEffects(){return Object.keys(this.constructor.effects)}getUserOptions(){return this.#N.getUserOptions?.()}getIndex(){return this.state.renderIndex}getPage(){return this.state.pageIndex}getSelectedIndex(){return this.state.selectedIndex}setSelectedIndex(e){const t=this.#D.getSlides().length;e<0||e>=t?console.warn(`setSelectedIndex: index ${e} out of bounds (0-${t-1})`):this.#D.setState({selectedIndex:e})}getSelectedSlide(){return this.#D.getSlides()[this.state.selectedIndex]}getSlideAtIndex(e){return this.#D.getSlides()[e]}updateOptions(e){this.#N.updateOptions?.(e)}on(e,t){this.#g.on(e,t)}off(e,t){this.#g.off(e,t)}_emit(e,...t){this.#g.emit(e,...t)}destroy(){const e=this;e.#$.forEach((e=>e?.destroy?.())),e.#$.length=0,e.#R?.destroy?.(),e.#V?.destroy?.(),e.#q?.destroy?.(),e.#z?.destroy?.(),e.#W?.destroy?.(),e.#j?.destroy?.(),e.#X?.parentNode&&e.#X.parentNode.removeChild(e.#X),e.#X=null,e.#g?.removeAllListeners?.()}}class TarotViewport extends HTMLElement{constructor(){super()}}class TarotSlides extends HTMLElement{constructor(){super()}}class TarotSlide extends HTMLElement{constructor(){super(),this.index=0,this.renderIndex=0,this.selected=!1,this.trackPosition=0,this.renderPosition=0,this.centerPoint=0}}class TarotContent extends HTMLElement{constructor(){super()}}class TarotSlideIcon extends HTMLElement{constructor(){super()}}customElements.define("tarot-viewport",TarotViewport),customElements.define("tarot-slides",TarotSlides),customElements.define("tarot-slide",TarotSlide),customElements.define("tarot-content",TarotContent),customElements.define("tarot-slide-icon",TarotSlideIcon),customElements.define("tarot-carousel",Tarot),e.Tarot=Tarot,e.TarotEffect=TarotEffect,e.default=Tarot,Object.defineProperty(e,"__esModule",{value:!0})}));
